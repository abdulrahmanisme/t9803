const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-DLULj8Wu.js","assets/react-vendor-CpT81wZu.js"])))=>i.map(i=>d[i]);
var e,t,n=Object.defineProperty,r=(e,t,r)=>((e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);import{r as s,a as i,g as a,R as o,b as l,c,u as d,d as u,L as h,e as m,f,h as p,B as g}from"./react-vendor-CpT81wZu.js";import{V as x,X as y,M as b,L as v,C as w,S as j,B as N,a as k,P as _,G as S,b as C,c as T,d as E,I as A,T as O,e as P,f as I,g as R,h as D,i as L,j as M,k as F,l as $,m as U,n as z,o as B,A as q,p as H,U as V,q as W,r as G,s as J,t as K,u as Y,F as X,v as Q,w as Z,x as ee,y as te,z as ne,H as re,D as se,E as ie,J as ae,K as oe,N as le,O as ce,Q as de,R as ue,W as he,Y as me,Z as fe,_ as pe,$ as ge,a0 as xe,a1 as ye,a2 as be,a3 as ve,a4 as we,a5 as je,a6 as Ne,a7 as ke,a8 as _e,a9 as Se,aa as Ce}from"./ui-vendor-DHI68Y_p.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Te={exports:{}},Ee={},Ae=s,Oe=Symbol.for("react.element"),Pe=Symbol.for("react.fragment"),Ie=Object.prototype.hasOwnProperty,Re=Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,De={key:!0,ref:!0,__self:!0,__source:!0};function Le(e,t,n){var r,s={},i=null,a=null;for(r in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(a=t.ref),t)Ie.call(t,r)&&!De.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:Oe,type:e,key:i,ref:a,props:s,_owner:Re.current}}Ee.Fragment=Pe,Ee.jsx=Le,Ee.jsxs=Le,Te.exports=Ee;var Me,Fe=Te.exports,$e=i;Me=$e.createRoot,$e.hydrateRoot;var Ue="undefined"!=typeof Element,ze="function"==typeof Map,Be="function"==typeof Set,qe="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function He(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var n,r,s,i;if(Array.isArray(e)){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(!He(e[r],t[r]))return!1;return!0}if(ze&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i=e.entries();!(r=i.next()).done;)if(!t.has(r.value[0]))return!1;for(i=e.entries();!(r=i.next()).done;)if(!He(r.value[1],t.get(r.value[0])))return!1;return!0}if(Be&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i=e.entries();!(r=i.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(qe&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"==typeof e.valueOf&&"function"==typeof t.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&"function"==typeof e.toString&&"function"==typeof t.toString)return e.toString()===t.toString();if((n=(s=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(t,s[r]))return!1;if(Ue&&e instanceof Element)return!1;for(r=n;0!=r--;)if(("_owner"!==s[r]&&"__v"!==s[r]&&"__o"!==s[r]||!e.$$typeof)&&!He(e[s[r]],t[s[r]]))return!1;return!0}return e!=e&&t!=t}const Ve=a((function(e,t){try{return He(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}));var We=function(e,t,n,r,s,i,a,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,s,i,a,o],d=0;(l=new Error(t.replace(/%s/g,(function(){return c[d++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}};const Ge=a(We);const Je=a((function(e,t,n,r){var s=n?n.call(r,e,t):void 0;if(void 0!==s)return!!s;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var o=Object.prototype.hasOwnProperty.bind(t),l=0;l<i.length;l++){var c=i[l];if(!o(c))return!1;var d=e[c],u=t[c];if(!1===(s=n?n.call(r,d,u,c):void 0)||void 0===s&&d!==u)return!1}return!0}));var Ke=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(Ke||{}),Ye={rel:["amphtml","canonical","alternate"]},Xe={type:["application/ld+json"]},Qe={charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},Ze=Object.values(Ke),et={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},tt=Object.entries(et).reduce(((e,[t,n])=>(e[n]=t,e)),{}),nt="data-rh",rt="defaultTitle",st="defer",it="encodeSpecialCharacters",at="onChangeClientState",ot="titleTemplate",lt="prioritizeSeoTags",ct=(e,t)=>{for(let n=e.length-1;n>=0;n-=1){const r=e[n];if(Object.prototype.hasOwnProperty.call(r,t))return r[t]}return null},dt=e=>{let t=ct(e,"title");const n=ct(e,ot);if(Array.isArray(t)&&(t=t.join("")),n&&t)return n.replace(/%s/g,(()=>t));const r=ct(e,rt);return t||r||void 0},ut=e=>ct(e,at)||(()=>{}),ht=(e,t)=>t.filter((t=>void 0!==t[e])).map((t=>t[e])).reduce(((e,t)=>({...e,...t})),{}),mt=(e,t)=>t.filter((e=>void 0!==e.base)).map((e=>e.base)).reverse().reduce(((t,n)=>{if(!t.length){const r=Object.keys(n);for(let s=0;s<r.length;s+=1){const i=r[s].toLowerCase();if(-1!==e.indexOf(i)&&n[i])return t.concat(n)}}return t}),[]),ft=(e,t,n)=>{const r={};return n.filter((t=>{return!!Array.isArray(t[e])||(void 0!==t[e]&&(n=`Helmet: ${e} should be of type "Array". Instead found type "${typeof t[e]}"`,console&&"function"==typeof console.warn&&console.warn(n)),!1);var n})).map((t=>t[e])).reverse().reduce(((e,n)=>{const s={};n.filter((e=>{let n;const i=Object.keys(e);for(let r=0;r<i.length;r+=1){const s=i[r],a=s.toLowerCase();-1===t.indexOf(a)||"rel"===n&&"canonical"===e[n].toLowerCase()||"rel"===a&&"stylesheet"===e[a].toLowerCase()||(n=a),-1===t.indexOf(s)||"innerHTML"!==s&&"cssText"!==s&&"itemprop"!==s||(n=s)}if(!n||!e[n])return!1;const a=e[n].toLowerCase();return r[n]||(r[n]={}),s[n]||(s[n]={}),!r[n][a]&&(s[n][a]=!0,!0)})).reverse().forEach((t=>e.push(t)));const i=Object.keys(s);for(let t=0;t<i.length;t+=1){const e=i[t],n={...r[e],...s[e]};r[e]=n}return e}),[]).reverse()},pt=(e,t)=>{if(Array.isArray(e)&&e.length)for(let n=0;n<e.length;n+=1){if(e[n][t])return!0}return!1},gt=e=>Array.isArray(e)?e.join(""):e,xt=(e,t)=>Array.isArray(e)?e.reduce(((e,n)=>(((e,t)=>{const n=Object.keys(e);for(let r=0;r<n.length;r+=1)if(t[n[r]]&&t[n[r]].includes(e[n[r]]))return!0;return!1})(n,t)?e.priority.push(n):e.default.push(n),e)),{priority:[],default:[]}):{default:e,priority:[]},yt=(e,t)=>({...e,[t]:void 0}),bt=["noscript","script","style"],vt=(e,t=!0)=>!1===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),wt=e=>Object.keys(e).reduce(((t,n)=>{const r=void 0!==e[n]?`${n}="${e[n]}"`:`${n}`;return t?`${t} ${r}`:r}),""),jt=(e,t={})=>Object.keys(e).reduce(((t,n)=>(t[et[n]||n]=e[n],t)),t),Nt=(e,t)=>t.map(((t,n)=>{const r={key:n,[nt]:!0};return Object.keys(t).forEach((e=>{const n=et[e]||e;if("innerHTML"===n||"cssText"===n){const e=t.innerHTML||t.cssText;r.dangerouslySetInnerHTML={__html:e}}else r[n]=t[e]})),o.createElement(e,r)})),kt=(e,t,n=!0)=>{switch(e){case"title":return{toComponent:()=>((e,t,n)=>{const r=jt(n,{key:t,[nt]:!0});return[o.createElement("title",r,t)]})(0,t.title,t.titleAttributes),toString:()=>((e,t,n,r)=>{const s=wt(n),i=gt(t);return s?`<${e} ${nt}="true" ${s}>${vt(i,r)}</${e}>`:`<${e} ${nt}="true">${vt(i,r)}</${e}>`})(e,t.title,t.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>jt(t),toString:()=>wt(t)};default:return{toComponent:()=>Nt(e,t),toString:()=>((e,t,n=!0)=>t.reduce(((t,r)=>{const s=r,i=Object.keys(s).filter((e=>!("innerHTML"===e||"cssText"===e))).reduce(((e,t)=>{const r=void 0===s[t]?t:`${t}="${vt(s[t],n)}"`;return e?`${e} ${r}`:r}),""),a=s.innerHTML||s.cssText||"",o=-1===bt.indexOf(e);return`${t}<${e} ${nt}="true" ${i}${o?"/>":`>${a}</${e}>`}`}),""))(e,t,n)}}},_t=e=>{const{baseTag:t,bodyAttributes:n,encode:r=!0,htmlAttributes:s,noscriptTags:i,styleTags:a,title:o="",titleAttributes:l,prioritizeSeoTags:c}=e;let{linkTags:d,metaTags:u,scriptTags:h}=e,m={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:m,linkTags:d,metaTags:u,scriptTags:h}=(({metaTags:e,linkTags:t,scriptTags:n,encode:r})=>{const s=xt(e,Qe),i=xt(t,Ye),a=xt(n,Xe);return{priorityMethods:{toComponent:()=>[...Nt("meta",s.priority),...Nt("link",i.priority),...Nt("script",a.priority)],toString:()=>`${kt("meta",s.priority,r)} ${kt("link",i.priority,r)} ${kt("script",a.priority,r)}`},metaTags:s.default,linkTags:i.default,scriptTags:a.default}})(e)),{priority:m,base:kt("base",t,r),bodyAttributes:kt("bodyAttributes",n,r),htmlAttributes:kt("htmlAttributes",s,r),link:kt("link",d,r),meta:kt("meta",u,r),noscript:kt("noscript",i,r),script:kt("script",h,r),style:kt("style",a,r),title:kt("title",{title:o,titleAttributes:l},r)}},St=[],Ct=!("undefined"==typeof window||!window.document||!window.document.createElement),Tt=class{constructor(e,t){r(this,"instances",[]),r(this,"canUseDOM",Ct),r(this,"context"),r(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?St:this.instances,add:e=>{(this.canUseDOM?St:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?St:this.instances).indexOf(e);(this.canUseDOM?St:this.instances).splice(t,1)}}}),this.context=e,this.canUseDOM=t||!1,t||(e.helmet=_t({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Et=o.createContext({}),At=(e=class extends s.Component{constructor(t){super(t),r(this,"helmetData"),this.helmetData=new Tt(this.props.context||{},e.canUseDOM)}render(){return o.createElement(Et.Provider,{value:this.helmetData.value},this.props.children)}},r(e,"canUseDOM",Ct),e),Ot=(e,t)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${e}[${nt}]`),s=[].slice.call(r),i=[];let a;return t&&t.length&&t.forEach((t=>{const n=document.createElement(e);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))if("innerHTML"===e)n.innerHTML=t.innerHTML;else if("cssText"===e)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{const r=e,s=void 0===t[r]?"":t[r];n.setAttribute(e,s)}n.setAttribute(nt,"true"),s.some(((e,t)=>(a=t,n.isEqualNode(e))))?s.splice(a,1):i.push(n)})),s.forEach((e=>{var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),i.forEach((e=>n.appendChild(e))),{oldTags:s,newTags:i}},Pt=(e,t)=>{const n=document.getElementsByTagName(e)[0];if(!n)return;const r=n.getAttribute(nt),s=r?r.split(","):[],i=[...s],a=Object.keys(t);for(const o of a){const e=t[o]||"";n.getAttribute(o)!==e&&n.setAttribute(o,e),-1===s.indexOf(o)&&s.push(o);const r=i.indexOf(o);-1!==r&&i.splice(r,1)}for(let o=i.length-1;o>=0;o-=1)n.removeAttribute(i[o]);s.length===i.length?n.removeAttribute(nt):n.getAttribute(nt)!==a.join(",")&&n.setAttribute(nt,a.join(","))},It=(e,t)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:s,linkTags:i,metaTags:a,noscriptTags:o,onChangeClientState:l,scriptTags:c,styleTags:d,title:u,titleAttributes:h}=e;Pt("body",r),Pt("html",s),((e,t)=>{void 0!==e&&document.title!==e&&(document.title=gt(e)),Pt("title",t)})(u,h);const m={baseTag:Ot("base",n),linkTags:Ot("link",i),metaTags:Ot("meta",a),noscriptTags:Ot("noscript",o),scriptTags:Ot("script",c),styleTags:Ot("style",d)},f={},p={};Object.keys(m).forEach((e=>{const{newTags:t,oldTags:n}=m[e];t.length&&(f[e]=t),n.length&&(p[e]=m[e].oldTags)})),t&&t(),l(e,f,p)},Rt=null,Dt=e=>{Rt&&cancelAnimationFrame(Rt),e.defer?Rt=requestAnimationFrame((()=>{It(e,(()=>{Rt=null}))})):(It(e),Rt=null)},Lt=class extends s.Component{constructor(){super(...arguments),r(this,"rendered",!1)}shouldComponentUpdate(e){return!Je(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let n=null;const r=(s=e.get().map((e=>{const t={...e.props};return delete t.context,t})),{baseTag:mt(["href"],s),bodyAttributes:ht("bodyAttributes",s),defer:ct(s,st),encode:ct(s,it),htmlAttributes:ht("htmlAttributes",s),linkTags:ft("link",["rel","href"],s),metaTags:ft("meta",["name","charset","http-equiv","property","itemprop"],s),noscriptTags:ft("noscript",["innerHTML"],s),onChangeClientState:ut(s),scriptTags:ft("script",["src","innerHTML"],s),styleTags:ft("style",["cssText"],s),title:dt(s),titleAttributes:ht("titleAttributes",s),prioritizeSeoTags:pt(s,lt)});var s;At.canUseDOM?Dt(r):_t&&(n=_t(r)),t(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Mt=(t=class extends s.Component{shouldComponentUpdate(e){return!Ve(yt(this.props,"helmetData"),yt(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,n,r){return{...t,[e.type]:[...t[e.type]||[],{...n,...this.mapNestedChildrenToProps(e,r)}]}}mapObjectTypeChildren(e,t,n,r){switch(e.type){case"title":return{...t,[e.type]:r,titleAttributes:{...n}};case"body":return{...t,bodyAttributes:{...n}};case"html":return{...t,htmlAttributes:{...n}};default:return{...t,[e.type]:{...n}}}}mapArrayTypeChildrenToProps(e,t){let n={...t};return Object.keys(e).forEach((t=>{n={...n,[t]:e[t]}})),n}warnOnInvalidChildren(e,t){return Ge(Ze.some((t=>e.type===t)),"function"==typeof e.type?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Ze.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),Ge(!t||"string"==typeof t||Array.isArray(t)&&!t.some((e=>"string"!=typeof e)),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let n={};return o.Children.forEach(e,(e=>{if(!e||!e.props)return;const{children:r,...s}=e.props,i=Object.keys(s).reduce(((e,t)=>(e[tt[t]||t]=s[t],e)),{});let{type:a}=e;switch("symbol"==typeof a?a=a.toString():this.warnOnInvalidChildren(e,r),a){case"Symbol(react.fragment)":t=this.mapChildrenToProps(r,t);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(e,n,i,r);break;default:t=this.mapObjectTypeChildren(e,t,i,r)}})),this.mapArrayTypeChildrenToProps(n,t)}render(){const{children:e,...t}=this.props;let n={...t},{helmetData:r}=t;if(e&&(n=this.mapChildrenToProps(e,n)),r&&!(r instanceof Tt)){r=new Tt(r.context,!0),delete n.helmetData}return r?o.createElement(Lt,{...n,context:r.value}):o.createElement(Et.Consumer,null,(e=>o.createElement(Lt,{...n,context:e})))}},r(t,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),t);const Ft={},$t=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map((e=>{if((e=function(e){return"/"+e}(e))in Ft)return;Ft[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,n&&s.setAttribute("nonce",n),document.head.appendChild(s),t?new Promise(((t,n)=>{s.addEventListener("load",t),s.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then((t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)}))};class Ut extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class zt extends Ut{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Bt extends Ut{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class qt extends Ut{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ht,Vt;(Vt=Ht||(Ht={})).Any="any",Vt.ApNortheast1="ap-northeast-1",Vt.ApNortheast2="ap-northeast-2",Vt.ApSouth1="ap-south-1",Vt.ApSoutheast1="ap-southeast-1",Vt.ApSoutheast2="ap-southeast-2",Vt.CaCentral1="ca-central-1",Vt.EuCentral1="eu-central-1",Vt.EuWest1="eu-west-1",Vt.EuWest2="eu-west-2",Vt.EuWest3="eu-west-3",Vt.SaEast1="sa-east-1",Vt.UsEast1="us-east-1",Vt.UsWest1="us-west-1",Vt.UsWest2="us-west-2";var Wt=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};class Gt{constructor(e,{headers:t={},customFetch:n,region:r=Ht.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>$t((async()=>{const{default:e}=await Promise.resolve().then((()=>on));return{default:e}}),void 0).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)})(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return Wt(this,void 0,void 0,(function*(){try{const{headers:r,method:s,body:i}=t;let a,o={},{region:l}=t;l||(l=this.region),l&&"any"!==l&&(o["x-region"]=l),i&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!=typeof Blob&&i instanceof Blob||i instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",a=i):"string"==typeof i?(o["Content-Type"]="text/plain",a=i):"undefined"!=typeof FormData&&i instanceof FormData?a=i:(o["Content-Type"]="application/json",a=JSON.stringify(i)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),r),body:a}).catch((e=>{throw new zt(e)})),d=c.headers.get("x-relay-error");if(d&&"true"===d)throw new Bt(c);if(!c.ok)throw new qt(c);let u,h=(null!==(n=c.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return u="application/json"===h?yield c.json():"application/octet-stream"===h?yield c.blob():"text/event-stream"===h?c:"multipart/form-data"===h?yield c.formData():yield c.text(),{data:u,error:null}}catch(r){return{data:null,error:r}}}))}}var Jt={},Kt={},Yt={},Xt={},Qt={},Zt={},en=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const tn=en.fetch,nn=en.fetch.bind(en),rn=en.Headers,sn=en.Request,an=en.Response,on=Object.freeze(Object.defineProperty({__proto__:null,Headers:rn,Request:sn,Response:an,default:nn,fetch:tn},Symbol.toStringTag,{value:"Module"})),ln=l(on);var cn={};Object.defineProperty(cn,"__esModule",{value:!0});let dn=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};cn.default=dn;var un=c&&c.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zt,"__esModule",{value:!0});const hn=un(ln),mn=un(cn);Zt.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=hn.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async e=>{var t,n,r;let s=null,i=null,a=null,o=e.status,l=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(i="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),c=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");r&&c&&c.length>1&&(a=parseInt(c[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(i)&&(i.length>1?(s={code:"PGRST116",details:`Results contain ${i.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},i=null,a=null,o=406,l="Not Acceptable"):i=1===i.length?i[0]:null)}else{const t=await e.text();try{s=JSON.parse(t),Array.isArray(s)&&404===e.status&&(i=[],s=null,o=200,l="OK")}catch(c){404===e.status&&""===t?(o=204,l="No Content"):s={message:t}}if(s&&this.isMaybeSingle&&(null===(r=null==s?void 0:s.details)||void 0===r?void 0:r.includes("0 rows"))&&(s=null,o=200,l="OK"),s&&this.shouldThrowOnError)throw new mn.default(s)}return{error:s,data:i,count:a,status:o,statusText:l}}));return this.shouldThrowOnError||(n=n.catch((e=>{var t,n,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}}))),n.then(e,t)}returns(){return this}overrideTypes(){return this}};var fn=c&&c.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qt,"__esModule",{value:!0});const pn=fn(Zt);let gn=class extends pn.default{select(e){let t=!1;const n=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=void 0===r?"offset":`${r}.offset`,i=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var a;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.Accept)&&void 0!==a?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${l}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Qt.default=gn;var xn=c&&c.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xt,"__esModule",{value:!0});const yn=xn(Qt);let bn=class extends yn.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map((e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";"plain"===r?s="pl":"phrase"===r?s="ph":"websearch"===r&&(s="w");const i=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach((([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)})),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};Xt.default=bn;var vn=c&&c.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yt,"__esModule",{value:!0});const wn=vn(Xt);Yt.default=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=t,this.schema=n,this.fetch=r}select(e,{head:t=!1,count:n}={}){const r=t?"HEAD":"GET";let s=!1;const i=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e))).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new wn.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new wn.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){const i=[`resolution=${n?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new wn.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new wn.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new wn.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};var jn={},Nn={};Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.version=void 0,Nn.version="0.0.0-automated",Object.defineProperty(jn,"__esModule",{value:!0}),jn.DEFAULT_HEADERS=void 0;const kn=Nn;jn.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${kn.version}`};var _n=c&&c.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kt,"__esModule",{value:!0});const Sn=_n(Yt),Cn=_n(Xt),Tn=jn;Kt.default=class e{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},Tn.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new Sn.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:r=!1,count:s}={}){let i;const a=new URL(`${this.url}/rpc/${e}`);let o;n||r?(i=n?"HEAD":"GET",Object.entries(t).filter((([e,t])=>void 0!==t)).map((([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`])).forEach((([e,t])=>{a.searchParams.append(e,t)}))):(i="POST",o=t);const l=Object.assign({},this.headers);return s&&(l.Prefer=`count=${s}`),new Cn.default({method:i,url:a,headers:l,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}};var En=c&&c.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.PostgrestError=Jt.PostgrestBuilder=Jt.PostgrestTransformBuilder=Jt.PostgrestFilterBuilder=Jt.PostgrestQueryBuilder=Jt.PostgrestClient=void 0;const An=En(Kt);Jt.PostgrestClient=An.default;const On=En(Yt);Jt.PostgrestQueryBuilder=On.default;const Pn=En(Xt);Jt.PostgrestFilterBuilder=Pn.default;const In=En(Qt);Jt.PostgrestTransformBuilder=In.default;const Rn=En(Zt);Jt.PostgrestBuilder=Rn.default;const Dn=En(cn);Jt.PostgrestError=Dn.default;var Ln=Jt.default={PostgrestClient:An.default,PostgrestQueryBuilder:On.default,PostgrestFilterBuilder:Pn.default,PostgrestTransformBuilder:In.default,PostgrestBuilder:Rn.default,PostgrestError:Dn.default};const{PostgrestClient:Mn,PostgrestQueryBuilder:Fn,PostgrestFilterBuilder:$n,PostgrestTransformBuilder:Un,PostgrestBuilder:zn,PostgrestError:Bn}=Ln,qn={"X-Client-Info":"realtime-js/2.11.2"};var Hn,Vn,Wn,Gn,Jn,Kn,Yn,Xn,Qn,Zn,er;(Vn=Hn||(Hn={}))[Vn.connecting=0]="connecting",Vn[Vn.open=1]="open",Vn[Vn.closing=2]="closing",Vn[Vn.closed=3]="closed",(Gn=Wn||(Wn={})).closed="closed",Gn.errored="errored",Gn.joined="joined",Gn.joining="joining",Gn.leaving="leaving",(Kn=Jn||(Jn={})).close="phx_close",Kn.error="phx_error",Kn.join="phx_join",Kn.reply="phx_reply",Kn.leave="phx_leave",Kn.access_token="access_token",(Yn||(Yn={})).websocket="websocket",(Qn=Xn||(Xn={})).Connecting="connecting",Qn.Open="open",Qn.Closing="closing",Qn.Closed="closed";class tr{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),s=t.getUint8(2);let i=this.HEADER_LENGTH+2;const a=n.decode(e.slice(i,i+r));i+=r;const o=n.decode(e.slice(i,i+s));i+=s;return{ref:null,topic:a,event:o,payload:JSON.parse(n.decode(e.slice(i,e.byteLength)))}}}class nr{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}(er=Zn||(Zn={})).abstime="abstime",er.bool="bool",er.date="date",er.daterange="daterange",er.float4="float4",er.float8="float8",er.int2="int2",er.int4="int4",er.int4range="int4range",er.int8="int8",er.int8range="int8range",er.json="json",er.jsonb="jsonb",er.money="money",er.numeric="numeric",er.oid="oid",er.reltime="reltime",er.text="text",er.time="time",er.timestamp="timestamp",er.timestamptz="timestamptz",er.timetz="timetz",er.tsrange="tsrange",er.tstzrange="tstzrange";const rr=(e,t,n={})=>{var r;const s=null!==(r=n.skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce(((n,r)=>(n[r]=sr(r,e,t,s),n)),{})},sr=(e,t,n,r)=>{const s=t.find((t=>t.name===e)),i=null==s?void 0:s.type,a=n[e];return i&&!r.includes(i)?ir(i,a):ar(a)},ir=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return dr(t,n)}switch(e){case Zn.bool:return or(t);case Zn.float4:case Zn.float8:case Zn.int2:case Zn.int4:case Zn.int8:case Zn.numeric:case Zn.oid:return lr(t);case Zn.json:case Zn.jsonb:return cr(t);case Zn.timestamp:return ur(t);case Zn.abstime:case Zn.date:case Zn.daterange:case Zn.int4range:case Zn.int8range:case Zn.money:case Zn.reltime:case Zn.text:case Zn.time:case Zn.timestamptz:case Zn.timetz:case Zn.tsrange:case Zn.tstzrange:default:return ar(t)}},ar=e=>e,or=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},lr=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},cr=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},dr=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const i=e.slice(1,n);try{r=JSON.parse("["+i+"]")}catch(s){r=i?i.split(","):[]}return r.map((e=>ir(t,e)))}return e},ur=e=>"string"==typeof e?e.replace(" ","T"):e,hr=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class mr{constructor(e,t,n={},r=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var fr,pr,gr,xr,yr,br,vr,wr;(pr=fr||(fr={})).SYNC="sync",pr.JOIN="join",pr.LEAVE="leave";class jr{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},(e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=jr.syncState(this.state,e,t,n),this.pendingDiffs.forEach((e=>{this.state=jr.syncDiff(this.state,e,t,n)})),this.pendingDiffs=[],r()})),this.channel._on(n.diff,{},(e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=jr.syncDiff(this.state,e,t,n),r())})),this.onJoin(((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})})),this.onLeave(((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(e,t,n,r){const s=this.cloneDeep(e),i=this.transformState(t),a={},o={};return this.map(s,((e,t)=>{i[e]||(o[e]=t)})),this.map(i,((e,t)=>{const n=s[e];if(n){const r=t.map((e=>e.presence_ref)),s=n.map((e=>e.presence_ref)),i=t.filter((e=>s.indexOf(e.presence_ref)<0)),l=n.filter((e=>r.indexOf(e.presence_ref)<0));i.length>0&&(a[e]=i),l.length>0&&(o[e]=l)}else a[e]=t})),this.syncDiff(s,{joins:a,leaves:o},n,r)}static syncDiff(e,t,n,r){const{joins:s,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(s,((t,r)=>{var s;const i=null!==(s=e[t])&&void 0!==s?s:[];if(e[t]=this.cloneDeep(r),i.length>0){const n=e[t].map((e=>e.presence_ref)),r=i.filter((e=>n.indexOf(e.presence_ref)<0));e[t].unshift(...r)}n(t,i,r)})),this.map(i,((t,n)=>{let s=e[t];if(!s)return;const i=n.map((e=>e.presence_ref));s=s.filter((e=>i.indexOf(e.presence_ref)<0)),e[t]=s,r(t,s,n),0===s.length&&delete e[t]})),e}static map(e,t){return Object.getOwnPropertyNames(e).map((n=>t(n,e[n])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):r,t}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(xr=gr||(gr={})).ALL="*",xr.INSERT="INSERT",xr.UPDATE="UPDATE",xr.DELETE="DELETE",(br=yr||(yr={})).BROADCAST="broadcast",br.PRESENCE="presence",br.POSTGRES_CHANGES="postgres_changes",br.SYSTEM="system",(wr=vr||(vr={})).SUBSCRIBED="SUBSCRIBED",wr.TIMED_OUT="TIMED_OUT",wr.CLOSED="CLOSED",wr.CHANNEL_ERROR="CHANNEL_ERROR";class Nr{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Wn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new mr(this,Jn.join,this.params,this.timeout),this.rejoinTimer=new nr((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=Wn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Wn.closed,this.socket._remove(this)})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Wn.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Wn.errored,this.rejoinTimer.scheduleTimeout())})),this._on(Jn.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e)})),this.presence=new jr(this),this.broadcastEndpointURL=hr(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:i,private:a}}=this.params;this._onError((t=>null==e?void 0:e(vr.CHANNEL_ERROR,t))),this._onClose((()=>null==e?void 0:e(vr.CLOSED)));const o={},l={broadcast:s,presence:i,postgres_changes:null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map((e=>e.filter)))&&void 0!==r?r:[],private:a};this.socket.accessTokenValue&&(o.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(async({postgres_changes:t})=>{var n;if(this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,s=null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0,i=[];for(let n=0;n<s;n++){const s=r[n],{filter:{event:a,schema:o,table:l,filter:c}}=s,d=t&&t[n];if(!d||d.event!==a||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),void(null==e||e(vr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},s),{id:d.id}))}return this.bindings.postgres_changes=i,void(e&&e(vr.SUBSCRIBED))}null==e||e(vr.SUBSCRIBED)})).receive("error",(t=>{null==e||e(vr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(()=>{null==e||e(vr.TIMED_OUT)}))}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise((n=>{var r,s,i;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(s=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===s?void 0:s.broadcast)||void 0===i?void 0:i.ack)||n("ok"),a.receive("ok",(()=>n("ok"))),a.receive("error",(()=>n("error"))),a.receive("timeout",(()=>n("timed out")))}));{const{event:i,payload:a}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(s){return"AbortError"===s.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Wn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Jn.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((n=>{const r=new mr(this,Jn.leave,{},e);r.receive("ok",(()=>{t(),n("ok")})).receive("timeout",(()=>{t(),n("timed out")})).receive("error",(()=>{n("error")})),r.send(),this._canPush()||r.trigger("ok",{})}))}async _fetchWithTimeout(e,t,n){const r=new AbortController,s=setTimeout((()=>r.abort()),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(s),i}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new mr(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,s;const i=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:c}=Jn;if(n&&[a,o,l,c].indexOf(i)>=0&&n!==this._joinRef())return;let d=this._onMessage(i,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter((e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===i})).map((e=>e.callback(d,n))):null===(s=this.bindings[i])||void 0===s||s.filter((e=>{var n,r,s,a,o,l;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,a=null===(n=e.filter)||void 0===n?void 0:n.event;return i&&(null===(r=t.ids)||void 0===r?void 0:r.includes(i))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null===(s=t.data)||void 0===s?void 0:s.type.toLocaleLowerCase()))}{const n=null===(o=null===(a=null==e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i})).map((e=>{if("object"==typeof d&&"ids"in d){const e=d.data,{schema:t,table:n,commit_timestamp:r,type:s,errors:i}=e,a={schema:t,table:n,commit_timestamp:r,eventType:s,new:{},old:{},errors:i};d=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(d,n)}))}_isClosed(){return this.state===Wn.closed}_isJoined(){return this.state===Wn.joined}_isJoining(){return this.state===Wn.joining}_isLeaving(){return this.state===Wn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),s={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter((e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&Nr.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Jn.close,{},e)}_onError(e){this._on(Jn.error,{},(t=>e(t)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Wn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=rr(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=rr(e.columns,e.old_record)),t}}const kr=()=>{},_r="undefined"!=typeof WebSocket;class Sr{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=qn,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=kr,this.conn=null,this.sendBuffer=[],this.serializer=new tr,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>$t((async()=>{const{default:e}=await Promise.resolve().then((()=>on));return{default:e}}),void 0).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},this.endPoint=`${e}/${Yn.websocket}`,this.httpEndpoint=hr(e),(null==t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new nr((async()=>{this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch),null==t?void 0:t.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null==t?void 0:t.worker)||!1,this.workerUrl=null==t?void 0:t.workerUrl}this.accessToken=(null==t?void 0:t.accessToken)||null}connect(){if(!this.conn)if(this.transport)this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});else{if(_r)return this.conn=new WebSocket(this.endpointURL()),void this.setupConnection();this.conn=new Cr(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),$t((async()=>{const{default:e}=await import("./browser-DLULj8Wu.js").then((e=>e.b));return{default:e}}),__vite__mapDeps([0,1])).then((({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()}))}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map((e=>e.unsubscribe())));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Hn.connecting:return Xn.Connecting;case Hn.open:return Xn.Open;case Hn.closing:return Xn.Closing;default:return Xn.Closed}}isConnected(){return this.connectionState()===Xn.Open}channel(e,t={config:{}}){const n=new Nr(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:r,ref:s}=e,i=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};this.log("push",`${t} ${n} (${s})`,r),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let e=null;try{e=JSON.parse(atob(t.split(".")[1]))}catch(n){}if(e&&e.exp){if(!(Math.floor(Date.now()/1e3)-e.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${e.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${e.exp}`)}this.accessTokenValue=t,this.channels.forEach((e=>{t&&e.updateJoinPayload({access_token:t}),e.joinedOnce&&e._isJoined()&&e._push(Jn.access_token,{access_token:t})}))}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter((t=>t._joinRef()!==e._joinRef()))}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:n,payload:r,ref:s}=e;s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${r.status||""} ${t} ${n} ${s&&"("+s+")"||""}`,r),this.channels.filter((e=>e._isMember(t))).forEach((e=>e._trigger(n,r,s))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}else this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this.sendHeartbeat()),this.heartbeatIntervalMs);this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e._trigger(Jn.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class Cr{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Hn.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class Tr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Er(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Ar extends Tr{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Or extends Tr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Pr=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};const Ir=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>$t((async()=>{const{default:e}=await Promise.resolve().then((()=>on));return{default:e}}),void 0).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},Rr=e=>{if(Array.isArray(e))return e.map((e=>Rr(e)));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach((([e,n])=>{const r=e.replace(/([-_][a-z])/gi,(e=>e.toUpperCase().replace(/[-_]/g,"")));t[r]=Rr(n)})),t};var Dr=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};const Lr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Mr=(e,t,n)=>Dr(void 0,void 0,void 0,(function*(){const r=yield Pr(void 0,void 0,void 0,(function*(){return"undefined"==typeof Response?(yield $t((()=>Promise.resolve().then((()=>on))),void 0)).Response:Response}));e instanceof r&&!(null==n?void 0:n.noResolveJson)?e.json().then((n=>{t(new Ar(Lr(n),e.status||500))})).catch((e=>{t(new Or(Lr(e),e))})):t(new Or(Lr(e),e))}));function Fr(e,t,n,r,s,i){return Dr(this,void 0,void 0,(function*(){return new Promise(((a,o)=>{e(n,((e,t,n,r)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))})(t,r,s,i)).then((e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()})).then((e=>a(e))).catch((e=>Mr(e,o,r)))}))}))}function $r(e,t,n,r){return Dr(this,void 0,void 0,(function*(){return Fr(e,"GET",t,n,r)}))}function Ur(e,t,n,r,s){return Dr(this,void 0,void 0,(function*(){return Fr(e,"POST",t,r,s,n)}))}function zr(e,t,n,r,s){return Dr(this,void 0,void 0,(function*(){return Fr(e,"DELETE",t,r,s,n)}))}var Br=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};const qr={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Hr={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Vr{constructor(e,t={},n,r){this.url=e,this.headers=t,this.bucketId=n,this.fetch=Ir(r)}uploadOrUpdate(e,t,n,r){return Br(this,void 0,void 0,(function*(){try{let s;const i=Object.assign(Object.assign({},Hr),r);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});const o=i.metadata;"undefined"!=typeof Blob&&n instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),o&&s.append("metadata",this.encodeMetadata(o)),s.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(s=n,s.append("cacheControl",i.cacheControl),o&&s.append("metadata",this.encodeMetadata(o))):(s=n,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,o&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==r?void 0:r.headers)&&(a=Object.assign(Object.assign({},a),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},(null==i?void 0:i.duplex)?{duplex:i.duplex}:{})),u=yield d.json();if(d.ok)return{data:{path:l,id:u.Id,fullPath:u.Key},error:null};return{data:null,error:u}}catch(s){if(Er(s))return{data:null,error:s};throw s}}))}upload(e,t,n){return Br(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,n)}))}uploadToSignedUrl(e,t,n,r){return Br(this,void 0,void 0,(function*(){const s=this._removeEmptyFolders(e),i=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Hr.upsert},r),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType);const o=yield this.fetch(a.toString(),{method:"PUT",body:e,headers:i}),l=yield o.json();if(o.ok)return{data:{path:s,fullPath:l.Key},error:null};return{data:null,error:l}}catch(o){if(Er(o))return{data:null,error:o};throw o}}))}createSignedUploadUrl(e,t){return Br(this,void 0,void 0,(function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(r["x-upsert"]="true");const s=yield Ur(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),i=new URL(this.url+s.url),a=i.searchParams.get("token");if(!a)throw new Tr("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(n){if(Er(n))return{data:null,error:n};throw n}}))}update(e,t,n){return Br(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,n)}))}move(e,t,n){return Br(this,void 0,void 0,(function*(){try{return{data:yield Ur(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Er(r))return{data:null,error:r};throw r}}))}copy(e,t,n){return Br(this,void 0,void 0,(function*(){try{return{data:{path:(yield Ur(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Er(r))return{data:null,error:r};throw r}}))}createSignedUrl(e,t,n){return Br(this,void 0,void 0,(function*(){try{let r=this._getFinalPath(e),s=yield Ur(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const i=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(r){if(Er(r))return{data:null,error:r};throw r}}))}createSignedUrls(e,t,n){return Br(this,void 0,void 0,(function*(){try{const r=yield Ur(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:r.map((e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${s}`):null}))),error:null}}catch(r){if(Er(r))return{data:null,error:r};throw r}}))}download(e,t){return Br(this,void 0,void 0,(function*(){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),s=r?`?${r}`:"";try{const t=this._getFinalPath(e),r=yield $r(this.fetch,`${this.url}/${n}/${t}${s}`,{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(i){if(Er(i))return{data:null,error:i};throw i}}))}info(e){return Br(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{const e=yield $r(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Rr(e),error:null}}catch(n){if(Er(n))return{data:null,error:n};throw n}}))}exists(e){return Br(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return Dr(this,void 0,void 0,(function*(){return Fr(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)}))}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Er(n)&&n instanceof Or){const e=n.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:n}}throw n}}))}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==s&&r.push(s);const i=void 0!==(null==t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&r.push(a);let o=r.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${o}`)}}}remove(e){return Br(this,void 0,void 0,(function*(){try{return{data:yield zr(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Er(t))return{data:null,error:t};throw t}}))}list(e,t,n){return Br(this,void 0,void 0,(function*(){try{const r=Object.assign(Object.assign(Object.assign({},qr),t),{prefix:e||""});return{data:yield Ur(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Er(r))return{data:null,error:r};throw r}}))}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Wr={"X-Client-Info":"storage-js/2.7.1"};var Gr=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};class Jr{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},Wr),t),this.fetch=Ir(n)}listBuckets(){return Gr(this,void 0,void 0,(function*(){try{return{data:yield $r(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Er(e))return{data:null,error:e};throw e}}))}getBucket(e){return Gr(this,void 0,void 0,(function*(){try{return{data:yield $r(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Er(t))return{data:null,error:t};throw t}}))}createBucket(e,t={public:!1}){return Gr(this,void 0,void 0,(function*(){try{return{data:yield Ur(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Er(n))return{data:null,error:n};throw n}}))}updateBucket(e,t){return Gr(this,void 0,void 0,(function*(){try{const n=yield function(e,t,n,r,s){return Dr(this,void 0,void 0,(function*(){return Fr(e,"PUT",t,r,s,n)}))}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(n){if(Er(n))return{data:null,error:n};throw n}}))}emptyBucket(e){return Gr(this,void 0,void 0,(function*(){try{return{data:yield Ur(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Er(t))return{data:null,error:t};throw t}}))}deleteBucket(e){return Gr(this,void 0,void 0,(function*(){try{return{data:yield zr(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Er(t))return{data:null,error:t};throw t}}))}}class Kr extends Jr{constructor(e,t={},n){super(e,t,n)}from(e){return new Vr(this.url,this.headers,e,this.fetch)}}let Yr="";Yr="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Xr={headers:{"X-Client-Info":`supabase-js-${Yr}/2.49.4`}},Qr={schema:"public"},Zr={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},es={};var ts=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};const ns=(e,t,n)=>{const r=(e=>{let t;return t=e||("undefined"==typeof fetch?nn:fetch),(...e)=>t(...e)})(n),s="undefined"==typeof Headers?rn:Headers;return(n,i)=>ts(void 0,void 0,void 0,(function*(){var a;const o=null!==(a=yield t())&&void 0!==a?a:e;let l=new s(null==i?void 0:i.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),r(n,Object.assign(Object.assign({},i),{headers:l}))}))};var rs=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};const ss="2.69.1",is=3e4,as=9e4,os={"X-Client-Info":`gotrue-js/${ss}`},ls="X-Supabase-Api-Version",cs={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},ds=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class us extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function hs(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class ms extends us{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class fs extends us{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ps extends us{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class gs extends ps{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class xs extends ps{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ys extends ps{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class bs extends ps{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vs extends ps{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ws extends ps{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function js(e){return hs(e)&&"AuthRetryableFetchError"===e.name}class Ns extends ps{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class ks extends ps{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const _s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ss=" \t\n\r=".split(""),Cs=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ss.length;t+=1)e[Ss[t].charCodeAt(0)]=-2;for(let t=0;t<_s.length;t+=1)e[_s[t].charCodeAt(0)]=t;return e})();function Ts(e,t,n){const r=Cs[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Es(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let a=0;a<e.length;a+=1)Ts(e.charCodeAt(a),s,i);return t.join("")}function As(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Os(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let s=0;s<e.length;s+=1)Ts(e.charCodeAt(s),n,r);return new Uint8Array(t)}function Ps(e){const t=[];return function(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}As(r,t)}}(e,(e=>t.push(e))),new Uint8Array(t)}const Is=()=>"undefined"!=typeof window&&"undefined"!=typeof document,Rs={tested:!1,writable:!1},Ds=()=>{if(!Is())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(t){return!1}if(Rs.tested)return Rs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Rs.tested=!0,Rs.writable=!0}catch(t){Rs.tested=!0,Rs.writable=!1}return Rs.writable};const Ls=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>$t((async()=>{const{default:e}=await Promise.resolve().then((()=>on));return{default:e}}),void 0).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},Ms=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Fs=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},$s=async(e,t)=>{await e.removeItem(t)};class Us{constructor(){this.promise=new Us.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t}))}}function zs(e){const t=e.split(".");if(3!==t.length)throw new ks("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!ds.test(t[n]))throw new ks("JWT not in base64url format");return{header:JSON.parse(Es(t[0])),payload:JSON.parse(Es(t[1])),signature:Os(t[2]),raw:{header:t[0],payload:t[1]}}}function Bs(e){return("0"+e.toString(16)).substr(-2)}async function qs(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map((e=>String.fromCharCode(e))).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Hs(e,t,n=!1){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Bs).join("")}();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Ms(e,`${t}-code-verifier`,s);const i=await qs(r);return[i,r===i?"plain":"s256"]}Us.promiseConstructor=Promise;const Vs=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Ws=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Gs=[502,503,504];async function Js(e){var t,n;if(!("object"==typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json))throw new ws(Ws(e),0);if(Gs.includes(e.status))throw new ws(Ws(e),e.status);let r,s;try{r=await e.json()}catch(a){throw new fs(Ws(a),a)}const i=function(e){const t=e.headers.get(ls);if(!t)return null;if(!t.match(Vs))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(a){return null}}(e);if(i&&i.getTime()>=cs.timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?s=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(s=r.error_code),s){if("weak_password"===s)throw new Ns(Ws(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===s)throw new gs}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce(((e,t)=>e&&"string"==typeof t),!0))throw new Ns(Ws(r),e.status,r.weak_password.reasons);throw new ms(Ws(r),e.status||500,s)}async function Ks(e,t,n,r){var s;const i=Object.assign({},null==r?void 0:r.headers);i[ls]||(i[ls]=cs.name),(null==r?void 0:r.jwt)&&(i.Authorization=`Bearer ${r.jwt}`);const a=null!==(s=null==r?void 0:r.query)&&void 0!==s?s:{};(null==r?void 0:r.redirectTo)&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await async function(e,t,n,r,s,i){const a=((e,t,n,r)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))})(t,r,s,i);let o;try{o=await e(n,Object.assign({},a))}catch(l){throw console.error(l),new ws(Ws(l),0)}o.ok||await Js(o);if(null==r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(l){await Js(l)}}(e,t,n+o,{headers:i,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function Ys(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Xs(e){const t=Ys(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce(((e,t)=>e&&"string"==typeof t),!0)&&(t.data.weak_password=e.weak_password),t}function Qs(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Zs(e){return{data:e,error:null}}function ei(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},user:Object.assign({},a)},error:null}}function ti(e){return e}class ni{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Ls(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Ks(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(hs(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await Ks(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Qs})}catch(n){if(hs(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null==n?void 0:n.newEmail,delete r.newEmail),await Ks(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:ei,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(hs(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ks(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Qs})}catch(t){if(hs(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,s,i,a,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Ks(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(s=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==s?s:""},xform:ti});if(c.error)throw c.error;const d=await c.json(),u=null!==(i=c.headers.get("x-total-count"))&&void 0!==i?i:0,h=null!==(o=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t})),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(hs(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){try{return await Ks(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Qs})}catch(t){if(hs(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Ks(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Qs})}catch(n){if(hs(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await Ks(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Qs})}catch(n){if(hs(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await Ks(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(hs(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Ks(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(hs(t))return{data:null,error:t};throw t}}}const ri={getItem:e=>Ds()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Ds()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Ds()&&globalThis.localStorage.removeItem(e)}};function si(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const ii=!!(globalThis&&Ds()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class ai extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class oi extends ai{}async function li(e,t,n){ii&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout((()=>{r.abort(),ii&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)}),t),await Promise.resolve().then((()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},(async r=>{if(!r){if(0===t)throw ii&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new oi(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ii)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}ii&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{ii&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const ci={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:os,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function di(e,t,n){return await n()}class ui{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ui.nextInstanceID,ui.nextInstanceID+=1,this.instanceID>0&&Is()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},ci),e);if(this.logDebugMessages=!!r.debug,"function"==typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new ni({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Ls(r.fetch),this.lock=r.lock||di,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Is()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=li:this.lock=di,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:Ds()?this.storage=ri:(this.memoryStorage={},this.storage=si(this.memoryStorage)):(this.memoryStorage={},this.storage=si(this.memoryStorage)),Is()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",(async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ss}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,(async()=>await this._initialize())))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach(((e,n)=>{t[n]=e}))}catch(r){}return n.searchParams.forEach(((e,n)=>{t[n]=e})),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Is()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:s}=await this._getSessionFromURL(t,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),function(e){return hs(e)&&"AuthImplicitGrantRedirectError"===e.name}(s)){const t=null===(e=s.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:s}}return await this._removeSession(),{error:s}}const{session:i,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout((async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)}),0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return hs(t)?{error:t}:{error:new fs("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const s=await Ks(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:Ys}),{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const o=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(hs(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,n,r;try{let s;if("email"in e){const{email:n,password:r,options:i}=e;let a=null,o=null;"pkce"===this.flowType&&([a,o]=await Hs(this.storage,this.storageKey)),s=await Ks(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==i?void 0:i.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:a,code_challenge_method:o},xform:Ys})}else{if(!("phone"in e))throw new ys("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:a}=e;s=await Ks(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:i,data:null!==(n=null==a?void 0:a.data)&&void 0!==n?n:{},channel:null!==(r=null==a?void 0:a.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:Ys})}}const{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const o=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(hs(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:s}=e;t=await Ks(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:Xs})}else{if(!("phone"in e))throw new ys("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:s}=e;t=await Ks(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:Xs})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new xs}}catch(t){if(hs(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,s;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,(async()=>this._exchangeCodeForSession(e)))}async _exchangeCodeForSession(e){const t=await Fs(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!=t?t:"").split("/");try{const{data:t,error:s}=await Ks(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ys});if(await $s(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:s}):{data:{user:null,session:null,redirectType:null},error:new xs}}catch(s){if(hs(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:s,nonce:i}=e,a=await Ks(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Ys}),{data:o,error:l}=a;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new xs}}catch(t){if(hs(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,s,i;try{if("email"in e){const{email:r,options:s}=e;let i=null,a=null;"pkce"===this.flowType&&([i,a]=await Hs(this.storage,this.storageKey));const{error:o}=await Ks(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},create_user:null===(n=null==s?void 0:s.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:i,code_challenge_method:a},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:a,error:o}=await Ks(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(s=null==n?void 0:n.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(i=null==n?void 0:n.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:o}}throw new ys("You must provide either an email or phone number.")}catch(a){if(hs(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let r,s;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,s=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:i,error:a}=await Ks(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:Ys});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const o=i.session,l=i.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(hs(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let s=null,i=null;return"pkce"===this.flowType&&([s,i]=await Hs(this.storage,this.storageKey)),await Ks(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:i}),headers:this.headers,xform:Zs})}catch(s){if(hs(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._reauthenticate()))}async _reauthenticate(){try{return await this._useSession((async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new gs;const{error:r}=await Ks(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}}))}catch(e){if(hs(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:s}=e,{error:i}=await Ks(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:n,type:r,options:s}=e,{data:i,error:a}=await Ks(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:a}}throw new ys("You must provide either an email or phone number and a type")}catch(t){if(hs(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,(async()=>this._useSession((async e=>e))))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,(async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Fs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<as;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,(async()=>await this._getUser()))}async _getUser(e){try{return e?await Ks(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Qs}):await this._useSession((async e=>{var t,n,r;const{data:s,error:i}=e;if(i)throw i;return(null===(t=s.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Ks(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(n=s.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:Qs}):{data:{user:null},error:new gs}}))}catch(t){if(hs(t))return function(e){return hs(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await $s(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._updateUser(e,t)))}async _updateUser(e,t={}){try{return await this._useSession((async n=>{const{data:r,error:s}=n;if(s)throw s;if(!r.session)throw new gs;const i=r.session;let a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await Hs(this.storage,this.storageKey));const{data:l,error:c}=await Ks(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:i.access_token,xform:Qs});if(c)throw c;return i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}}))}catch(n){if(hs(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._setSession(e)))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new gs;const t=Date.now()/1e3;let n=t,r=!0,s=null;const{payload:i}=zs(e.access_token);if(i.exp&&(n=i.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};s=t}else{const{data:r,error:i}=await this._getUser(e.access_token);if(i)throw i;s={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(hs(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._refreshSession(e)))}async _refreshSession(e){try{return await this._useSession((async t=>{var n;if(!e){const{data:r,error:s}=t;if(s)throw s;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new gs;const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}}))}catch(t){if(hs(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Is())throw new bs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new bs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new vs("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new bs("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new vs("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:s,refresh_token:i,expires_in:a,expires_at:o,token_type:l}=e;if(!(s&&a&&i&&l))throw new bs("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let u=c+d;o&&(u=parseInt(o));const h=u-c;1e3*h<=is&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const m=u-d;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,u,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,u,c);const{data:f,error:p}=await this._getUser(s);if(p)throw p;const g={provider_token:n,provider_refresh_token:r,access_token:s,expires_in:d,expires_at:u,refresh_token:i,token_type:l,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(hs(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Fs(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._signOut(e)))}async _signOut({scope:e}={scope:"global"}){return await this._useSession((async t=>{var n;const{data:r,error:s}=t;if(s)return{error:s};const i=null===(n=r.session)||void 0===n?void 0:n.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return hs(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await $s(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,(async()=>{this._emitInitialSession(t)}))})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession((async t=>{var n,r;try{const{data:{session:r},error:s}=t;if(s)throw s;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(s){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}}))}async resetPasswordForEmail(e,t={}){let n=null,r=null;"pkce"===this.flowType&&([n,r]=await Hs(this.storage,this.storageKey,!0));try{return await Ks(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(hs(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(hs(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession((async t=>{var n,r,s,i,a;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:!0});return await Ks(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(i=o.session)||void 0===i?void 0:i.access_token)&&void 0!==a?a:void 0})}));if(r)throw r;return Is()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==n?void 0:n.url),{data:{provider:e.provider,url:null==n?void 0:n.url},error:null}}catch(n){if(hs(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession((async t=>{var n,r;const{data:s,error:i}=t;if(i)throw i;return await Ks(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=s.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})}))}catch(t){if(hs(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise((t=>{setTimeout((()=>t(null)),e)}))}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Ks(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ys})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&js(t)&&Date.now()+n-s<is},new Promise(((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{const t=await n(i);if(!r(i,null,t))return void e(t)}catch(s){if(!r(i,s))return void t(s)}})()})))}catch(s){if(this._debug(t,"error",s),hs(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Is()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await Fs(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n))return this._debug(t,"session is not valid"),void(null!==n&&await this._removeSession());const r=1e3*(null!==(e=n.expires_at)&&void 0!==e?e:1/0)-Date.now()<as;if(this._debug(t,`session has${r?"":" not"} expired with margin of 90000s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),js(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return this._debug(t,"error",n),void console.error(n)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new gs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Us;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new gs;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(s){if(this._debug(r,"error",s),hs(s)){const e={session:null,error:s};return js(s)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],s=Array.from(this.stateChangeEmitters.values()).map((async n=>{try{await n.callback(e,t)}catch(s){r.push(s)}}));if(await Promise.all(s),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ms(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await $s(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Is()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval((()=>this._autoRefreshTokenTick()),is);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout((async()=>{await this.initializePromise,await this._autoRefreshTokenTick()}),0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,(async()=>{try{const t=Date.now();try{return await this._useSession((async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-t)/is);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)}))}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(!(e.isAcquireTimeout||e instanceof ai))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Is()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,(async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if((null==n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null==n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await Hs(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(null==n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null==n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession((async t=>{var n;const{data:r,error:s}=t;return s?{data:null,error:s}:await Ks(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})}))}catch(t){if(hs(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession((async t=>{var n,r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await Ks(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null==o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})}))}catch(t){if(hs(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:r,error:s}=t;if(s)return{data:null,error:s};const{data:i,error:a}=await Ks(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})}))}catch(t){if(hs(t))return{data:null,error:t};throw t}}))}async _challenge(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:r,error:s}=t;return s?{data:null,error:s}:await Ks(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})}))}catch(t){if(hs(t))return{data:null,error:t};throw t}}))}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null==e?void 0:e.factors)||[],r=n.filter((e=>"totp"===e.factor_type&&"verified"===e.status)),s=n.filter((e=>"phone"===e.factor_type&&"verified"===e.status));return{data:{all:n,totp:r,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,(async()=>await this._useSession((async e=>{var t,n;const{data:{session:r},error:s}=e;if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=zs(r.access_token);let a=null;i.aal&&(a=i.aal);let o=a;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter((e=>"verified"===e.status)))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:i.amr||[]},error:null}}))))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find((t=>t.kid===e));if(n)return n;if(n=this.jwks.keys.find((t=>t.kid===e)),n&&this.jwks_cached_at+6e5>Date.now())return n;const{data:r,error:s}=await Ks(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!r.keys||0===r.keys.length)throw new ks("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),n=r.keys.find((t=>t.kid===e)),!n)throw new ks("No matching signing key found in JWKS");return n}async getClaims(e,t={keys:[]}){try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:s,signature:i,raw:{header:a,payload:o}}=zs(n);if(function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(s.exp),!r.kid||"HS256"===r.alg||!("crypto"in globalThis)||!("subtle"in globalThis.crypto)){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:s,header:r,signature:i},error:null}}const l=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),c=await this.fetchJwk(r.kid,t),d=await crypto.subtle.importKey("jwk",c,l,!0,["verify"]);if(!(await crypto.subtle.verify(l,d,i,Ps(`${a}.${o}`))))throw new ks("Invalid JWT signature");return{data:{claims:s,header:r,signature:i},error:null}}catch(n){if(hs(n))return{data:null,error:n};throw n}}}ui.nextInstanceID=0;const hi=ui;class mi extends hi{constructor(e){super(e)}}var fi=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};class pi{constructor(e,t,n){var r,s,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=e.replace(/\/$/,"");this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const o=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,l=function(e,t){const{db:n,auth:r,realtime:s,global:i}=e,{db:a,auth:o,realtime:l,global:c}=t,d={db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},o),r),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},c),i),accessToken:()=>rs(this,void 0,void 0,(function*(){return""}))};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}(null!=n?n:{},{db:Qr,realtime:es,auth:Object.assign(Object.assign({},Zr),{storageKey:o}),global:Xr});this.storageKey=null!==(r=l.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(s=l.global.headers)&&void 0!==s?s:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(i=l.auth)&&void 0!==i?i:{},this.headers,l.global.fetch),this.fetch=ns(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new Mn(`${a}/rest/v1`,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),l.accessToken||this._listenForAuthEvents()}get functions(){return new Gt(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Kr(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return fi(this,void 0,void 0,(function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null}))}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,storageKey:s,flowType:i,lock:a,debug:o},l,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new mi({url:this.authUrl,headers:Object.assign(Object.assign({},d),l),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,flowType:i,lock:a,debug:o,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Sr(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)}))}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}const gi=new pi("https://fbdxutsajyfvvzqpulpd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZiZHh1dHNhanlmdnZ6cXB1bHBkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzg4MTM4MzAsImV4cCI6MjA1NDM4OTgzMH0.i5cRlHyP_wzGMFFsr21DJOcTFwhEGX8Wl99dSz3pDyQ",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"college-consultancy-directory"}},db:{schema:"public"},realtime:{params:{eventsPerSecond:2}}});let xi=0,yi=null;async function bi(e,t=3,n=1e3){if(xi>=3)throw new Error("Service temporarily unavailable. Please try again later.");let r;for(let i=0;i<t;i++)try{const t=await e();return xi=0,t}catch(s){if(r=s,vi(s)){if(xi++,xi>=3)throw wi(),new Error("Service temporarily unavailable. Please try again later.");const e=n*Math.pow(2,i)+1e3*Math.random();console.log(`Retrying query attempt ${i+1} after ${Math.round(e)}ms`),await new Promise((t=>setTimeout(t,e)));continue}throw s}throw r}function vi(e){var t,n,r;return!!(e instanceof Error&&("Failed to fetch"===e.message||e.message.includes("NetworkError")||e.message.includes("Network request failed")))||(!("429"!==(null==e?void 0:e.code)&&!(null==(t=null==e?void 0:e.message)?void 0:t.includes("Too many requests")))||!(!(null==(n=null==e?void 0:e.message)?void 0:n.includes("connection"))&&!(null==(r=null==e?void 0:e.message)?void 0:r.includes("timeout"))))}function wi(){yi&&clearTimeout(yi),yi=setTimeout((()=>{xi=0,yi=null}),3e4)}function ji(e){var t;if(xi>=3)return"Service is temporarily unavailable. Please try again in a few minutes.";if(vi(e))return"Connection issue detected. Retrying...";switch(null==e?void 0:e.code){case"PGRST116":return"No data found.";case"42703":return"Invalid database query. Please try again later.";case"23505":return"This record already exists.";case"23503":return"This operation would break data relationships.";case"42501":return"You don't have permission to perform this action.";default:return(null==(t=null==e?void 0:e.message)?void 0:t.includes("JWT"))?"Your session has expired. Please log in again.":"An unexpected error occurred. Please try again later."}}const Ni=s.createContext({user:null,loading:!0,error:null});function ki({children:e}){const[t,n]=s.useState(null),[r,i]=s.useState(!0),[a,o]=s.useState(null);return s.useEffect((()=>{let e=!0;(async()=>{try{const{data:{session:t},error:r}=await gi.auth.getSession();if(r)throw r;e&&(n((null==t?void 0:t.user)??null),o(null))}catch(t){console.error("Auth initialization error:",t),e&&(o(t instanceof Error?t:new Error("Failed to initialize authentication")),x.error("Unable to connect to authentication service. Please try again later."))}finally{e&&i(!1)}})();const{data:{subscription:t}}=gi.auth.onAuthStateChange((async(t,r)=>{e&&(n((null==r?void 0:r.user)??null),o(null))}));return()=>{e=!1,t.unsubscribe()}}),[]),Fe.jsx(Ni.Provider,{value:{user:t,loading:r,error:a},children:e})}const _i=()=>s.useContext(Ni);function Si({onClose:e}){const[t,n]=s.useState(""),[r,i]=s.useState(""),[a,o]=s.useState(!1),[l,c]=s.useState(!1);return Fe.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[Fe.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Fe.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:l?"Create Account":"Welcome Back"}),Fe.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 transition-colors",children:Fe.jsx(y,{className:"h-5 w-5"})})]}),Fe.jsxs("form",{onSubmit:async n=>{n.preventDefault(),o(!0);try{if(l){const{error:e}=await gi.auth.signUp({email:t,password:r});if(e)throw e;x.success("Account created successfully! You can now log in."),c(!1)}else{const{error:n,data:{user:s}}=await gi.auth.signInWithPassword({email:t,password:r});if(n)throw n;const{data:i,error:a}=await gi.from("profiles").select("is_admin, is_super_admin").eq("id",null==s?void 0:s.id).single();if(a)throw a;i.is_super_admin?x.success("Welcome back, Super Admin!"):i.is_admin?x.success("Welcome back, Admin!"):x.success("Logged in successfully!"),e()}}catch(s){console.error("Auth error:",s),x.error(s instanceof Error?s.message:"An error occurred")}finally{o(!1)}},className:"space-y-4",children:[Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(b,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"email",required:!0,value:t,onChange:e=>n(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"you@example.com"})]})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(v,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"password",required:!0,value:r,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"",minLength:6})]})]}),Fe.jsx("button",{type:"submit",disabled:a,className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:a?"Please wait...":l?"Create Account":"Sign In"}),Fe.jsx("div",{className:"text-center",children:Fe.jsx("button",{type:"button",onClick:()=>c(!l),className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:l?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})]})}function Ci({agency:e}){return e.is_verified?Fe.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[Fe.jsx(w,{className:"h-4 w-4 mr-1"}),"Verified"]}):Fe.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Pending Verification"})}function Ti({agencies:e,selectedAgency:t,onSelectAgency:n}){const[r,i]=s.useState(""),[a,o]=s.useState(e);return s.useEffect((()=>{if(""===r.trim()){const t=[...e].sort(((e,t)=>{const n=/^\d/.test(e.name),r=/^\d/.test(t.name);return n&&!r?1:!n&&r?-1:e.name.localeCompare(t.name)}));return void o(t)}const t=r.toLowerCase(),n=[...e.filter((e=>e.name.toLowerCase().includes(t)||e.location.toLowerCase().includes(t)))].sort(((e,t)=>{const n=/^\d/.test(e.name),r=/^\d/.test(t.name);return n&&!r?1:!n&&r?-1:e.name.localeCompare(t.name)}));o(n)}),[r,e]),Fe.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[Fe.jsx("h2",{className:"font-semibold text-gray-900 mb-4",children:"Your Agencies"}),Fe.jsx("div",{className:"mb-4",children:Fe.jsxs("div",{className:"relative",children:[Fe.jsx(j,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"text",placeholder:"Search agencies...",value:r,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})}),Fe.jsx("div",{className:"space-y-2",children:0===a.length?Fe.jsx("p",{className:"text-gray-500 text-center py-4",children:"No agencies found"}):a.map((e=>Fe.jsxs("div",{className:"space-y-2",children:[Fe.jsx("button",{onClick:()=>n(e),className:"w-full text-left px-4 py-2 rounded-lg transition-colors "+((null==t?void 0:t.id)===e.id?"bg-indigo-50 text-indigo-700":"hover:bg-gray-50"),children:e.name}),Fe.jsx("div",{className:"mt-2 px-4",children:Fe.jsx(Ci,{agency:e})})]},e.id)))})]})}function Ei({agency:e,onUpdate:t,onSubmit:n}){return Fe.jsxs("form",{onSubmit:n,className:"bg-white p-6 rounded-lg shadow-md",children:[Fe.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Edit Agency Details"}),Fe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Agency Name"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(N,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"text",value:e.name,onChange:n=>t({...e,name:n.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(k,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"text",value:e.location,onChange:n=>t({...e,location:n.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),Fe.jsxs("div",{className:"md:col-span-2",children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),Fe.jsx("textarea",{value:e.description,onChange:n=>t({...e,description:n.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(_,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"text",value:e.contact_phone,onChange:n=>t({...e,contact_phone:n.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(b,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"email",value:e.contact_email,onChange:n=>t({...e,contact_email:n.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(S,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"url",value:e.website,onChange:n=>t({...e,website:n.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Hours"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(C,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"text",value:e.business_hours,onChange:n=>t({...e,business_hours:n.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Mon-Fri: 9AM-6PM"})]})]})]}),Fe.jsx("div",{className:"mt-6",children:Fe.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700",children:[Fe.jsx(T,{className:"h-5 w-5"}),"Save Changes"]})})]})}function Ai({services:e,onAddService:t,onDeleteService:n}){const[r,i]=s.useState({name:"",description:""});return Fe.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[Fe.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Services"}),Fe.jsxs("form",{onSubmit:e=>{e.preventDefault(),r.name&&(t(r),i({name:"",description:""}))},className:"mb-6",children:[Fe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Name"}),Fe.jsx("input",{type:"text",placeholder:"e.g., College Application Review",value:r.name,onChange:e=>i({...r,name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),Fe.jsx("input",{type:"text",placeholder:"Detailed service description",value:r.description,onChange:e=>i({...r,description:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),Fe.jsxs("button",{type:"submit",className:"mt-4 flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700",children:[Fe.jsx(E,{className:"h-5 w-5"}),"Add Service"]})]}),Fe.jsx("div",{className:"space-y-4",children:e.map((e=>Fe.jsxs("div",{className:"flex items-start justify-between p-4 bg-gray-50 rounded-lg",children:[Fe.jsxs("div",{className:"flex-1",children:[Fe.jsxs("div",{className:"flex items-center gap-2",children:[Fe.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),e.description&&Fe.jsx(A,{className:"h-4 w-4 text-gray-400"})]}),e.description&&Fe.jsx("p",{className:"mt-1 text-sm text-gray-600",children:e.description})]}),Fe.jsx("button",{onClick:()=>n(e.id),className:"text-red-600 hover:text-red-800 ml-4",children:Fe.jsx(O,{className:"h-5 w-5"})})]},e.id)))})]})}function Oi({photos:e,onAddPhoto:t,onDeletePhoto:n,onSetCover:r}){const[i,a]=s.useState(""),[o,l]=s.useState(!1),c=s.useRef(null);return Fe.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[Fe.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Agency Photos"}),Fe.jsxs("div",{className:"mb-6",children:[Fe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Photo (Max 5MB)"}),Fe.jsx("input",{type:"file",ref:c,accept:"image/*",onChange:async n=>{var r;const s=null==(r=n.target.files)?void 0:r[0];if(s)if(s.type.startsWith("image/"))if(s.size>5242880)x.error("File size must be less than 5MB");else try{l(!0);const n=s.name.split(".").pop(),r=`${`${Math.random().toString(36).substring(2)}.${n}`}`,{data:o,error:d}=await gi.storage.from("agency-photos").upload(r,s);if(d)throw d;const{data:{publicUrl:u}}=gi.storage.from("agency-photos").getPublicUrl(r);t({url:u,caption:i||s.name,is_cover:0===e.length}),a(""),c.current&&(c.current.value=""),x.success("Photo uploaded successfully")}catch(o){console.error("Error uploading photo:",o),x.error("Failed to upload photo. Please try again.")}finally{l(!1)}else x.error("Please upload an image file")},disabled:o,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 disabled:opacity-50"}),Fe.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Supported formats: JPG, PNG, GIF"})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Caption (optional)"}),Fe.jsx("input",{type:"text",placeholder:"Photo description",value:i,onChange:e=>a(e.target.value),disabled:o,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50"})]})]}),o&&Fe.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-gray-600",children:[Fe.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-600"}),"Uploading photo..."]})]}),Fe.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((e=>Fe.jsxs("div",{className:"relative group",children:[Fe.jsx("img",{src:e.url,alt:e.caption,className:"w-full h-48 object-cover rounded-lg",onError:e=>{e.target.src="https://via.placeholder.com/400x300?text=Image+Not+Found"}}),Fe.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-opacity rounded-lg"}),Fe.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:Fe.jsxs("div",{className:"flex gap-2",children:[Fe.jsx("button",{onClick:()=>r(e.id),className:(e.is_cover?"bg-yellow-500":"bg-indigo-600")+" text-white p-2 rounded-full hover:bg-opacity-80",title:e.is_cover?"Cover Photo":"Set as Cover",children:e.is_cover?Fe.jsx(P,{className:"h-5 w-5"}):Fe.jsx(I,{className:"h-5 w-5"})}),Fe.jsx("button",{onClick:()=>(async e=>{try{const t=new URL(e.url).pathname.split("/").pop();if(t){const{error:e}=await gi.storage.from("agency-photos").remove([t]);if(e)throw e}n(e.id)}catch(t){console.error("Error deleting photo:",t),x.error("Failed to delete photo")}})(e),className:"bg-red-600 text-white p-2 rounded-full hover:bg-red-700",title:"Delete Photo",children:Fe.jsx(O,{className:"h-5 w-5"})})]})}),e.caption&&Fe.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-black bg-opacity-50 text-white text-sm rounded-b-lg",children:e.caption}),e.is_cover&&Fe.jsx("div",{className:"absolute top-2 right-2 bg-yellow-500 text-white px-2 py-1 rounded-full text-xs",children:"Cover Photo"})]},e.id)))})]})}function Pi({metrics:e,trustScore:t}){return Fe.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[Fe.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[Fe.jsx(R,{className:"h-5 w-5 text-indigo-600"}),"Trust Score Metrics"]}),Fe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[Fe.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[Fe.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Average Rating"}),Fe.jsxs("div",{className:"flex items-center",children:[Fe.jsx("span",{className:"text-2xl font-bold text-gray-900 mr-2",children:e.averageRating.toFixed(1)}),Fe.jsx("div",{className:"flex text-yellow-500",children:Array.from({length:5}).map(((t,n)=>Fe.jsx(P,{className:"h-5 w-5 "+(n<Math.round(e.averageRating)?"fill-current":"")},n)))})]}),Fe.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[e.totalReviews," reviews"]})]}),Fe.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[Fe.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Verified Services"}),Fe.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.verifiedServices}),Fe.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[Math.min(5*e.verifiedServices,30),"% contribution"]})]}),Fe.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[Fe.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Verification Status"}),Fe.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.isVerified?Fe.jsx("span",{className:"text-green-600",children:"Verified"}):Fe.jsx("span",{className:"text-yellow-600",children:"Pending"})}),Fe.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[e.isVerified?"20%":"0%"," contribution"]})]}),Fe.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[Fe.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Overall Trust Score"}),Fe.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[t,"%"]}),Fe.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Updated automatically"})]})]})]})}function Ii({reviews:e,responses:t,loading:n,onReviewAction:r,onResponseSubmit:i}){const[a,o]=s.useState({});return Fe.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[Fe.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Reviews"}),n?Fe.jsx("div",{className:"text-center py-4",children:"Loading reviews..."}):0===e.length?Fe.jsx("div",{className:"text-center py-4 text-gray-500",children:"No reviews yet"}):Fe.jsx("div",{className:"space-y-6",children:e.map((e=>Fe.jsxs("div",{className:"border rounded-lg p-4",children:[Fe.jsxs("div",{className:"flex justify-between items-start mb-4",children:[Fe.jsxs("div",{children:[Fe.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Fe.jsx("span",{className:"font-medium",children:e.user_email}),Fe.jsx("span",{className:"text-gray-500",children:""}),Fe.jsx("span",{className:"text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]}),Fe.jsx("div",{className:"flex items-center gap-1 text-yellow-500",children:Array.from({length:e.rating}).map(((e,t)=>Fe.jsx(P,{className:"h-4 w-4 fill-current"},t)))})]}),Fe.jsxs("div",{className:"flex items-center gap-2",children:["pending"===e.status&&Fe.jsxs(Fe.Fragment,{children:[Fe.jsx("button",{onClick:()=>r(e.id,"approved"),className:"text-green-600 hover:text-green-800",title:"Approve",children:Fe.jsx(D,{className:"h-5 w-5"})}),Fe.jsx("button",{onClick:()=>r(e.id,"rejected"),className:"text-red-600 hover:text-red-800",title:"Reject",children:Fe.jsx(L,{className:"h-5 w-5"})})]}),Fe.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("approved"===e.status?"bg-green-100 text-green-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status})]})]}),Fe.jsx("p",{className:"text-gray-700 mb-4",children:e.content}),t[e.id]?Fe.jsxs("div",{className:"ml-8 mt-4 p-4 bg-gray-50 rounded-lg",children:[Fe.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Fe.jsx(M,{className:"h-4 w-4 text-gray-500"}),Fe.jsx("span",{className:"font-medium",children:"Your Response"})]}),Fe.jsx("p",{className:"text-gray-700",children:t[e.id].content})]}):Fe.jsx("div",{className:"ml-8 mt-4",children:Fe.jsxs("div",{className:"flex gap-4",children:[Fe.jsx("textarea",{value:a[e.id]||"",onChange:t=>o((n=>({...n,[e.id]:t.target.value}))),placeholder:"Write your response...",className:"flex-1 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",rows:3}),Fe.jsx("button",{onClick:()=>(e=>{const t=a[e];t&&(i(e,t),o((t=>{const n={...t};return delete n[e],n})))})(e.id),disabled:!a[e.id],className:"self-start bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:Fe.jsx(F,{className:"h-5 w-5"})})]})})]},e.id)))})]})}function Ri({onClose:e,onCreate:t}){const[n,r]=s.useState(!1),[i,a]=s.useState({name:"",location:"",description:"",contact_phone:"",contact_email:"",website:"",business_hours:""});return Fe.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:Fe.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[Fe.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[Fe.jsxs("div",{className:"flex items-center gap-2",children:[Fe.jsx(N,{className:"h-6 w-6 text-indigo-600"}),Fe.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Create New Agency"})]}),Fe.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 transition-colors",children:Fe.jsx(y,{className:"h-5 w-5"})})]}),Fe.jsxs("form",{onSubmit:async e=>{e.preventDefault(),r(!0);try{await t(i)}catch(n){console.error("Error creating agency:",n)}finally{r(!1)}},className:"p-6 space-y-6",children:[Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Agency Name *"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(N,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"text",required:!0,value:i.name,onChange:e=>a({...i,name:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter agency name"})]})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location *"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(k,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"text",required:!0,value:i.location,onChange:e=>a({...i,location:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"City, State"})]})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),Fe.jsx("textarea",{required:!0,value:i.description,onChange:e=>a({...i,description:e.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Describe your agency and services"})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Phone"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(_,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"tel",value:i.contact_phone,onChange:e=>a({...i,contact_phone:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"+1 (555) 123-4567"})]})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Email *"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(b,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"email",required:!0,value:i.contact_email,onChange:e=>a({...i,contact_email:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"contact@agency.com"})]})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(S,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"url",value:i.website,onChange:e=>a({...i,website:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"https://www.agency.com"})]})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Hours"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(C,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"text",value:i.business_hours,onChange:e=>a({...i,business_hours:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Mon-Fri: 9AM-6PM"})]})]}),Fe.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[Fe.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-50 border border-gray-300 rounded-lg",children:"Cancel"}),Fe.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-gray-400",children:n?"Creating...":"Create Agency"})]})]})]})})}function Di(){const{user:e}=_i(),[t,n]=s.useState([]),[r,i]=s.useState(null),[a,o]=s.useState([]),[l,c]=s.useState([]),[d,u]=s.useState([]),[h,m]=s.useState({}),[f,p]=s.useState(!0),[g,y]=s.useState(!0),[b,v]=s.useState(!1),[w,j]=s.useState({averageRating:0,totalReviews:0,verifiedServices:0,isVerified:!1});s.useEffect((()=>{e&&k()}),[e]),s.useEffect((()=>{r&&(_(),S(),C(),T(),A())}),[r]);const k=async()=>{try{const t=await bi((()=>gi.from("agencies").select("*").eq("owner_id",null==e?void 0:e.id)));if(t.error)throw t.error;n(t.data||[])}catch(t){console.error("Failed to load agencies:",t);const e=ji(t);x.error(e)}finally{p(!1)}},_=async()=>{if(r)try{const e=await bi((()=>gi.from("agency_services").select("*").eq("agency_id",r.id)));if(e.error)throw e.error;o(e.data||[])}catch(e){console.error("Failed to load services:",e);const t=ji(e);x.error(t)}},S=async()=>{if(r)try{const e=await bi((()=>gi.from("agency_photos").select("*").eq("agency_id",r.id)));if(e.error)throw e.error;c(e.data||[])}catch(e){console.error("Failed to load photos:",e);const t=ji(e);x.error(t)}},C=async()=>{if(r)try{const e=await bi((()=>gi.from("reviews").select("*, profiles(email)").eq("agency_id",r.id).order("created_at",{ascending:!1})));if(e.error)throw e.error;u((e.data||[]).map((e=>{var t;return{...e,user_email:null==(t=e.profiles)?void 0:t.email}})))}catch(e){console.error("Failed to load reviews:",e);const t=ji(e);x.error(t)}finally{y(!1)}},T=async()=>{if(r)try{const e=await bi((()=>gi.from("review_responses").select("*").in("review_id",d.map((e=>e.id)))));if(e.error)throw e.error;const t=(e.data||[]).reduce(((e,t)=>(e[t.review_id]=t,e)),{});m(t)}catch(e){console.error("Failed to load responses:",e);const t=ji(e);x.error(t)}},A=async()=>{if(r)try{const e=d.filter((e=>"approved"===e.status)),t=e.length>0?e.reduce(((e,t)=>e+t.rating),0)/e.length:0,n=a.length;j({averageRating:t,totalReviews:e.length,verifiedServices:n,isVerified:r.is_verified||!1});const s=t/5*50,o=Math.min(5*n,30),l=r.is_verified?20:0,c=Math.round(s+o+l),{error:u}=await gi.from("agencies").update({trust_score:c}).eq("id",r.id);if(u)throw u;i((e=>e?{...e,trust_score:c}:null))}catch(e){console.error("Failed to calculate trust score:",e)}};return f?Fe.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-blue-50 to-white",children:Fe.jsxs("div",{className:"text-center",children:[Fe.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),Fe.jsx("p",{className:"mt-4 text-gray-600",children:"Loading dashboard..."})]})}):e?Fe.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white",children:[Fe.jsx("div",{className:"bg-gradient-to-r from-blue-800 to-blue-600 shadow-lg",children:Fe.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Fe.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center py-4 sm:py-6 space-y-4 sm:space-y-0",children:[Fe.jsxs("div",{className:"flex items-center gap-3",children:[Fe.jsx(N,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white"}),Fe.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Admin Dashboard"})]}),Fe.jsxs("button",{onClick:()=>v(!0),className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 bg-white rounded-lg shadow-sm text-sm font-medium text-blue-800 hover:bg-blue-50 transition-colors",children:[Fe.jsx(E,{className:"h-4 w-4 mr-2"}),"Create New Agency"]})]})})}),Fe.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:0===t.length?Fe.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 text-center border border-gray-100",children:[Fe.jsx(N,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Fe.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Agencies Yet"}),Fe.jsx("p",{className:"text-gray-600 mb-6",children:"Get started by creating your first agency."}),Fe.jsxs("button",{onClick:()=>v(!0),className:"inline-flex items-center justify-center px-4 py-2 bg-gradient-to-r from-blue-800 to-blue-600 text-white rounded-lg hover:from-blue-700 hover:to-blue-500 transition-colors shadow-sm",children:[Fe.jsx(E,{className:"h-4 w-4 mr-2"}),"Create Agency"]})]}):Fe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 sm:gap-8",children:[Fe.jsx("div",{className:"lg:col-span-1",children:Fe.jsx("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden hover:shadow-lg transition-shadow duration-300",children:Fe.jsx("div",{className:"p-4 sm:p-6",children:Fe.jsx(Ti,{agencies:t,selectedAgency:r,onSelectAgency:i})})})}),r&&Fe.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[Fe.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[Fe.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:Fe.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[Fe.jsx(N,{className:"h-5 w-5 text-blue-600"}),"Agency Details"]})}),Fe.jsx("div",{className:"p-6",children:Fe.jsx(Ei,{agency:r,onUpdate:i,onSubmit:async e=>{if(e.preventDefault(),r)try{const{error:e}=await gi.from("agencies").update(r).eq("id",r.id);if(e)throw e;x.success("Agency updated successfully"),k()}catch(t){x.error("Failed to update agency")}}})})]}),Fe.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[Fe.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:Fe.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[Fe.jsx(P,{className:"h-5 w-5 text-blue-600"}),"Trust Score & Metrics"]})}),Fe.jsx("div",{className:"p-6",children:Fe.jsx(Pi,{metrics:w,trustScore:r.trust_score||0})})]}),Fe.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[Fe.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:Fe.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[Fe.jsx($,{className:"h-5 w-5 text-blue-600"}),"Photos"]})}),Fe.jsx("div",{className:"p-6",children:Fe.jsx(Oi,{photos:l,onAddPhoto:async e=>{if(r)try{const{error:t}=await gi.from("agency_photos").insert([{...e,agency_id:r.id}]);if(t)throw t;S(),x.success("Photo added successfully")}catch(t){x.error("Failed to add photo")}},onDeletePhoto:async e=>{try{const{error:t}=await gi.from("agency_photos").delete().eq("id",e);if(t)throw t;S(),x.success("Photo deleted successfully")}catch(t){x.error("Failed to delete photo")}},onSetCover:async e=>{if(r)try{await gi.from("agency_photos").update({is_cover:!1}).eq("agency_id",r.id);const{error:t}=await gi.from("agency_photos").update({is_cover:!0}).eq("id",e);if(t)throw t;S(),x.success("Cover photo updated")}catch(t){x.error("Failed to update cover photo")}}})})]}),Fe.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[Fe.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:Fe.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[Fe.jsx(U,{className:"h-5 w-5 text-blue-600"}),"Services"]})}),Fe.jsx("div",{className:"p-6",children:Fe.jsx(Ai,{services:a,onAddService:async e=>{if(r)try{const{error:t}=await gi.from("agency_services").insert([{...e,agency_id:r.id}]);if(t)throw t;_(),x.success("Service added successfully")}catch(t){x.error("Failed to add service")}},onDeleteService:async e=>{try{const{error:t}=await gi.from("agency_services").delete().eq("id",e);if(t)throw t;_(),x.success("Service deleted successfully")}catch(t){x.error("Failed to delete service")}}})})]}),Fe.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[Fe.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:Fe.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[Fe.jsx(z,{className:"h-5 w-5 text-blue-600"}),"Reviews"]})}),Fe.jsx("div",{className:"p-6",children:Fe.jsx(Ii,{reviews:d,responses:h,loading:g,onReviewAction:async(e,t)=>{try{const{error:n}=await gi.from("reviews").update({status:t}).eq("id",e);if(n)throw n;C(),x.success(`Review ${t}`)}catch(n){x.error("Failed to update review status")}},onResponseSubmit:async(e,t)=>{try{const{error:n}=await gi.from("review_responses").insert([{review_id:e,content:t}]);if(n)throw n;T(),x.success("Response submitted")}catch(n){x.error("Failed to submit response")}}})})]})]})]})}),b&&Fe.jsxs("div",{className:"fixed inset-0 z-50",children:[Fe.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),Fe.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:Fe.jsx(Ri,{onClose:()=>v(!1),onCreate:async t=>{try{const{error:n}=await gi.from("agencies").insert([{...t,owner_id:null==e?void 0:e.id}]);if(n)throw n;k(),v(!1),x.success("Agency created successfully")}catch(n){x.error("Failed to create agency")}}})})]})]}):Fe.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-blue-50 to-white",children:Fe.jsxs("div",{className:"text-center",children:[Fe.jsx("p",{className:"text-red-600 mb-4",children:"Access Denied"}),Fe.jsx("p",{className:"text-gray-600 mb-4",children:"Please sign in to access the admin dashboard."})]})})}function Li({agency:e,onStatusChange:t,onVerificationChange:n,onTrustScoreChange:r,onDelete:i}){var a;const[o,l]=s.useState(!1);return Fe.jsxs("tr",{className:"hover:bg-gray-50",children:[Fe.jsx("td",{className:"px-4 sm:px-6 py-4",children:Fe.jsxs("div",{className:"flex items-center",children:[Fe.jsx(N,{width:"24",height:"24",className:"text-gray-400 mr-3 flex-shrink-0"}),Fe.jsxs("div",{className:"min-w-0",children:[Fe.jsx("div",{className:"font-medium text-gray-900 truncate",children:e.name}),Fe.jsx("div",{className:"text-sm text-gray-500 truncate",children:e.location})]})]})}),Fe.jsx("td",{className:"hidden sm:table-cell px-4 sm:px-6 py-4 text-sm text-gray-500",children:(null==(a=e.owner)?void 0:a.email)||"No owner"}),Fe.jsx("td",{className:"px-4 sm:px-6 py-4",children:Fe.jsxs("span",{className:"inline-flex items-center px-2 sm:px-2.5 py-0.5 rounded-full text-xs font-medium "+("approved"===e.status?"bg-green-100 text-green-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:["approved"===e.status&&Fe.jsx(w,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),"rejected"===e.status&&Fe.jsx(B,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),"pending"===e.status&&Fe.jsx(q,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),Fe.jsx("span",{className:"hidden sm:inline",children:e.status})]})}),Fe.jsx("td",{className:"hidden sm:table-cell px-4 sm:px-6 py-4",children:Fe.jsx("button",{onClick:()=>n(e.id,!e.is_verified),className:"inline-flex items-center px-2 sm:px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.is_verified?"bg-green-100 text-green-800 hover:bg-green-200":"bg-yellow-100 text-yellow-800 hover:bg-yellow-200"),children:e.is_verified?Fe.jsxs(Fe.Fragment,{children:[Fe.jsx(w,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),"Verified"]}):Fe.jsxs(Fe.Fragment,{children:[Fe.jsx(q,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),"Unverified"]})})}),Fe.jsx("td",{className:"hidden sm:table-cell px-4 sm:px-6 py-4",children:Fe.jsx("input",{type:"number",min:"0",max:"100",value:e.trust_score,onChange:t=>r(e.id,Number(t.target.value)),className:"w-16 sm:w-20 px-2 py-1 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})}),Fe.jsx("td",{className:"px-4 sm:px-6 py-4",children:Fe.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:["pending"===e.status&&Fe.jsxs(Fe.Fragment,{children:[Fe.jsx("button",{onClick:()=>t(e.id,"approved"),className:"p-1 text-green-600 hover:text-green-800",title:"Approve",children:Fe.jsx(D,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),Fe.jsx("button",{onClick:()=>t(e.id,"rejected"),className:"p-1 text-red-600 hover:text-red-800",title:"Reject",children:Fe.jsx(L,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]}),Fe.jsx("button",{onClick:async()=>{window.confirm(`Are you sure you want to delete ${e.name}? This action cannot be undone.`)&&await i(e.id)},className:"p-1 text-red-600 hover:text-red-800 ml-1 sm:ml-2",title:"Delete Agency",children:Fe.jsx(O,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})})]})}function Mi({agencies:e,onStatusChange:t,onVerificationChange:n,onTrustScoreChange:r,onDelete:s}){return Fe.jsx("div",{className:"bg-white shadow-sm",children:Fe.jsx("div",{className:"min-w-full",children:Fe.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Fe.jsx("thead",{className:"bg-gray-50",children:Fe.jsxs("tr",{children:[Fe.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agency"}),Fe.jsx("th",{scope:"col",className:"hidden sm:table-cell px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Owner"}),Fe.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),Fe.jsx("th",{scope:"col",className:"hidden sm:table-cell px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Verified"}),Fe.jsx("th",{scope:"col",className:"hidden sm:table-cell px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trust Score"}),Fe.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),Fe.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:0===e.length?Fe.jsx("tr",{children:Fe.jsx("td",{colSpan:6,className:"px-4 sm:px-6 py-8 text-center text-sm text-gray-500",children:"No agencies found"})}):e.map((e=>Fe.jsx(Li,{agency:e,onStatusChange:t,onVerificationChange:n,onTrustScoreChange:r,onDelete:s},e.id)))})]})})})}function Fi(e){const t=[];let n="",r=!1;const s=e.replace(/^\uFEFF/,"");for(let i=0;i<s.length;i++){const e=s[i];'"'===e?r&&'"'===s[i+1]?(n+='"',i++):r=!r:","!==e||r?n+=e:(t.push(n.trim()),n="")}return t.push(n.trim()),t.map((e=>e.replace(/^"(.*)"$/,"$1")))}function $i({onClose:e,onUpload:t,uploadStatus:n}){const[r,i]=s.useState(null),[a,o]=s.useState(!1);return Fe.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:Fe.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[Fe.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Fe.jsx("h2",{className:"text-xl font-semibold",children:"Bulk Upload Agencies"}),Fe.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:Fe.jsx(y,{className:"h-5 w-5"})})]}),Fe.jsxs("div",{className:"mb-6",children:[Fe.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[Fe.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"CSV Format Requirements:"}),Fe.jsxs("ul",{className:"text-sm text-blue-700 list-disc list-inside space-y-1",children:[Fe.jsx("li",{children:"Required columns: name, location, description, contact_email"}),Fe.jsx("li",{children:"Optional columns: trust_score, price, contact_phone, website, business_hours"}),Fe.jsx("li",{children:"First row must be column headers"}),Fe.jsx("li",{children:"Trust score must be between 0-100"}),Fe.jsx("li",{children:"Price must be a positive number"})]})]}),r&&Fe.jsx("div",{className:"bg-red-50 p-4 rounded-lg mb-4",children:Fe.jsxs("div",{className:"flex items-start",children:[Fe.jsx(H,{className:"h-5 w-5 text-red-400 mt-0.5 mr-2"}),Fe.jsx("div",{className:"text-sm text-red-700",children:r})]})})]}),n.total>0&&Fe.jsxs("div",{className:"mb-6",children:[Fe.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[Fe.jsxs("span",{children:["Processing: ",n.processed,"/",n.total]}),Fe.jsxs("span",{className:"text-green-600",children:["Success: ",n.success]}),Fe.jsxs("span",{className:"text-red-600",children:["Failed: ",n.failed]})]}),Fe.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:Fe.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:n.processed/n.total*100+"%"}})})]}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx("input",{type:"file",accept:".csv",onChange:async e=>{var n;const s=null==(n=e.target.files)?void 0:n[0];if(s)if(s.name.toLowerCase().endsWith(".csv"))if(s.size>5242880)i("File size must be less than 5MB");else{i(null),o(!0);try{const e=function(e){try{const t=e.replace(/^\uFEFF/,"").split(/\r?\n/).filter((e=>e.trim()));if(t.length<2)throw new Error("CSV file must contain a header row and at least one data row");const n=Fi(t[0]).map((e=>e.toLowerCase().trim())),s=["name","location","description","contact_email"];for(const e of s)if(!n.includes(e))throw new Error(`Missing required column: ${e}`);const i=[];for(let e=1;e<t.length;e++){const a=t[e];if(a.trim())try{const t=Fi(a);if(t.length!==n.length)throw new Error(`Row ${e+1} has ${t.length} columns but should have ${n.length}`);const r={};n.forEach(((n,i)=>{const a=t[i];if(s.includes(n)&&!a)throw new Error(`Missing required value for ${n} in row ${e+1}`);switch(n){case"trust_score":const t=parseFloat(a);if(a&&(isNaN(t)||t<0||t>100))throw new Error(`Trust score must be between 0 and 100 in row ${e+1}`);r[n]=t||0;break;case"price":const s=parseFloat(a);if(a&&(isNaN(s)||s<0))throw new Error(`Price must be a positive number in row ${e+1}`);r[n]=s||0;break;default:r[n]=a}})),i.push(r)}catch(r){throw new Error(`Error in row ${e+1}: ${r instanceof Error?r.message:"Invalid data"}`)}}return i}catch(r){throw r instanceof Error?r:new Error("Failed to parse CSV file")}}(await s.text());await t(e)}catch(a){console.error("Failed to process CSV file:",a),i(a instanceof Error?a.message:"Failed to process CSV file")}finally{o(!1),e.target.value=""}}else i("Please upload a CSV file")},disabled:a,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed"}),a&&Fe.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-50 flex items-center justify-center",children:Fe.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"})})]}),Fe.jsx("div",{className:"mt-4 text-sm text-gray-500",children:"Maximum file size: 5MB"})]})})}function Ui({agencies:e,admins:t,onAssignmentChange:n}){const[r,i]=s.useState(""),[a,o]=s.useState([]),[l,c]=s.useState(!1);return Fe.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[Fe.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Assign Agencies to Admins"}),Fe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Admin"}),Fe.jsxs("select",{value:r,onChange:e=>i(e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[Fe.jsx("option",{value:"",children:"Choose an admin..."}),t.map((e=>Fe.jsx("option",{value:e.id,children:e.email},e.id)))]})]}),Fe.jsxs("div",{children:[Fe.jsxs("div",{className:"flex justify-between items-center mb-2",children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Select Agencies"}),Fe.jsx("button",{type:"button",onClick:()=>{a.length===e.length?o([]):o(e.map((e=>e.id)))},className:"text-sm text-indigo-600 hover:text-indigo-800",children:a.length===e.length?"Deselect All":"Select All"})]}),Fe.jsx("div",{className:"border border-gray-300 rounded-lg max-h-60 overflow-y-auto",children:e.map((e=>Fe.jsxs("label",{className:"flex items-center p-3 hover:bg-gray-50 cursor-pointer",children:[Fe.jsx("input",{type:"checkbox",checked:a.includes(e.id),onChange:t=>{t.target.checked?o([...a,e.id]):o(a.filter((t=>t!==e.id)))},className:"rounded text-indigo-600 focus:ring-indigo-500 mr-3"}),Fe.jsxs("div",{children:[Fe.jsx("div",{className:"font-medium text-gray-900",children:e.name}),Fe.jsx("div",{className:"text-sm text-gray-500",children:e.owner_id?"Assigned":"Unassigned"})]})]},e.id)))})]})]}),Fe.jsx("div",{className:"flex justify-end",children:Fe.jsx("button",{onClick:async()=>{if(r&&0!==a.length){c(!0);try{const{error:e}=await gi.from("agencies").update({owner_id:r}).in("id",a);if(e)throw e;x.success("Agencies assigned successfully"),i(""),o([]),n()}catch(e){console.error("Error assigning agencies:",e),x.error("Failed to assign agencies")}finally{c(!1)}}else x.error("Please select an admin and at least one agency")},disabled:l||!r||0===a.length,className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:l?Fe.jsxs(Fe.Fragment,{children:[Fe.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Assigning..."]}):Fe.jsxs(Fe.Fragment,{children:[Fe.jsx(E,{className:"h-5 w-5"}),"Assign Agencies"]})})})]})}function zi({admins:e,onAdminDeleted:t}){const[n,r]=s.useState(null),[i,a]=s.useState(!1);return Fe.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[Fe.jsx("div",{className:"px-6 py-4 border-b",children:Fe.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Manage Admins"})}),Fe.jsx("div",{className:"overflow-x-auto",children:Fe.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Fe.jsx("thead",{className:"bg-gray-50",children:Fe.jsxs("tr",{children:[Fe.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admin"}),Fe.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),Fe.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agencies"}),Fe.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),Fe.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((e=>Fe.jsxs("tr",{children:[Fe.jsx("td",{className:"px-6 py-4",children:Fe.jsxs("div",{className:"flex items-center",children:[Fe.jsx(R,{className:"h-5 w-5 text-indigo-600 mr-3"}),Fe.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.email})]})}),Fe.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),Fe.jsx("td",{className:"px-6 py-4",children:Fe.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-indigo-100 text-indigo-800 rounded-full",children:[e.agencies_count," agencies"]})}),Fe.jsx("td",{className:"px-6 py-4",children:n===e.id?Fe.jsxs("div",{className:"flex items-center gap-2",children:[Fe.jsx("button",{onClick:()=>(async e=>{a(!0);try{const{error:n}=await gi.from("agencies").update({owner_id:null}).eq("owner_id",e);if(n)throw n;const{error:r}=await gi.rpc("delete_admin_account",{admin_user_id:e,reason:"Deleted by super admin"});if(r)throw r;x.success("Admin account deleted successfully"),t()}catch(n){console.error("Error deleting admin:",n),x.error("Failed to delete admin account")}finally{a(!1),r(null)}})(e.id),disabled:i,className:"text-red-600 hover:text-red-800 font-medium text-sm",children:"Confirm"}),Fe.jsx("button",{onClick:()=>r(null),disabled:i,className:"text-gray-600 hover:text-gray-800 text-sm",children:"Cancel"})]}):Fe.jsx("button",{onClick:()=>r(e.id),className:"text-red-600 hover:text-red-800",title:"Delete Admin",children:Fe.jsx(O,{className:"h-5 w-5"})})})]},e.id)))})]})}),n&&Fe.jsx("div",{className:"p-4 bg-red-50 border-t",children:Fe.jsxs("div",{className:"flex items-start gap-2",children:[Fe.jsx(H,{className:"h-5 w-5 text-red-600 mt-0.5"}),Fe.jsxs("div",{children:[Fe.jsx("h4",{className:"text-sm font-medium text-red-800",children:"Warning"}),Fe.jsx("p",{className:"mt-1 text-sm text-red-700",children:"This action will permanently delete the admin account and unassign all their agencies. This cannot be undone."})]})]})})]})}function Bi(){const[e,t]=s.useState([]),[n,r]=s.useState(!0),[i,a]=s.useState("");s.useEffect((()=>{o()}),[]);const o=async()=>{try{const{data:e,error:n}=await gi.from("profiles").select("*").neq("email","superadmin@superadmin.com").order("created_at",{ascending:!1});if(n)throw n;t(e||[])}catch(e){console.error("Error loading users:",e),x.error("Failed to load users")}finally{r(!1)}},l=e.filter((e=>e.email.toLowerCase().includes(i.toLowerCase())));return Fe.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[Fe.jsxs("div",{className:"p-6 border-b",children:[Fe.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Manage User Admin Status"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(j,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"text",placeholder:"Search users by email...",value:i,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),n?Fe.jsx("div",{className:"p-6 text-center text-gray-500",children:"Loading users..."}):Fe.jsx("div",{className:"overflow-x-auto",children:Fe.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Fe.jsx("thead",{className:"bg-gray-50",children:Fe.jsxs("tr",{children:[Fe.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),Fe.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),Fe.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admin Status"}),Fe.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),Fe.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map((n=>Fe.jsxs("tr",{children:[Fe.jsx("td",{className:"px-6 py-4",children:Fe.jsxs("div",{className:"flex items-center",children:[Fe.jsx(V,{className:"h-5 w-5 text-gray-400 mr-3"}),Fe.jsx("div",{className:"text-sm font-medium text-gray-900",children:n.email})]})}),Fe.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(n.created_at).toLocaleDateString()}),Fe.jsx("td",{className:"px-6 py-4",children:Fe.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(n.is_admin?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:[Fe.jsx(R,{className:"h-4 w-4 mr-1"}),n.is_admin?"Admin":"User"]})}),Fe.jsx("td",{className:"px-6 py-4",children:Fe.jsx("button",{onClick:()=>(async(n,r)=>{try{const{data:s,error:i}=await gi.rpc("manage_admin_status",{target_user_id:n,make_admin:!r});if(i)throw i;s?(t(e.map((e=>e.id===n?{...e,is_admin:!r}:e))),x.success(`User ${r?"removed from":"promoted to"} admin role`)):x.error("Not authorized to manage admin status")}catch(s){console.error("Error updating admin status:",s),x.error("Failed to update admin status")}})(n.id,n.is_admin),className:"px-3 py-1 rounded-md text-sm font-medium "+(n.is_admin?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"),children:n.is_admin?"Remove Admin":"Make Admin"})})]},n.id)))})]})})]})}async function qi(){try{const{data:e,error:t}=await gi.from("blog_posts").select("*, blog_tabs(name)").order("date",{ascending:!1});return t?(console.error("Error fetching blog posts:",t),[]):e||[]}catch(e){return console.error("Error in getBlogPosts:",e),[]}}async function Hi(){try{const{data:e,error:t}=await gi.from("blog_tabs").select("*").order("display_order",{ascending:!0});return t?(console.error("Error fetching blog tabs:",t),[]):e||[]}catch(e){return console.error("Error in getBlogTabs:",e),[]}}function Vi(){var e;const[t,n]=s.useState([]),[r,i]=s.useState([]),[a,o]=s.useState(!0),[l,c]=s.useState(!1),[d,u]=s.useState(!1),[h,m]=s.useState(!1),[f,p]=s.useState(null),[g,b]=s.useState(null),[v,w]=s.useState(null);s.useEffect((()=>{N(),j()}),[]);const j=async()=>{try{const e=await Hi();i(e)}catch(e){console.error("Error loading tabs:",e),x.error("Failed to load tabs")}},N=async()=>{try{o(!0);const{data:e,error:t}=await gi.from("blog_posts").select("*, blog_tabs(name)").order("created_at",{ascending:!1});if(t)throw t;n(e||[])}catch(e){console.error("Error loading blog posts:",e),x.error("Failed to load blog posts")}finally{o(!1)}},k=e=>e.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""),_=async(e,t)=>{if(window.confirm(`Are you sure you want to delete the tab "${t}"? Posts in this tab will be moved to "Uncategorized".`))try{await async function(e){try{const{error:t}=await gi.from("blog_tabs").delete().eq("id",e);return!t||(console.error("Error deleting blog tab:",t),!1)}catch(t){return console.error("Error in deleteBlogTab:",t),!1}}(e),x.success("Tab deleted successfully"),j(),N(),v===e&&w(null)}catch(n){console.error("Error deleting tab:",n),x.error("Failed to delete tab")}},S=v?t.filter((e=>e.tab_id===v)):t,C=()=>{const e=document.querySelector('button[data-tab-id="blogTabs"]');e?e.click():x.error("Couldn't find the Blog Tabs navigation. Please use the sidebar to navigate.")};return Fe.jsxs("div",{className:"p-6",children:[Fe.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Fe.jsx("h1",{className:"text-2xl font-bold",children:"Blog Management"}),Fe.jsxs("div",{className:"flex gap-2",children:[Fe.jsxs("button",{onClick:C,className:"bg-blue-100 text-blue-700 px-4 py-2 rounded-md flex items-center gap-2",title:"Advanced Tab Management",children:[Fe.jsx(W,{size:16}),"Advanced Tab Management"]}),Fe.jsxs("button",{onClick:()=>{p({title:"",excerpt:"",content:"",author:"",image_url:"",category:"",date:(new Date).toISOString().split("T")[0]}),c(!0)},className:"bg-primary text-white px-4 py-2 rounded-md flex items-center gap-2",children:[Fe.jsx(E,{size:16}),"Add New Post"]})]})]}),Fe.jsxs("div",{className:"mb-6",children:[Fe.jsxs("div",{className:"flex justify-between items-center mb-2",children:[Fe.jsx("h2",{className:"text-lg font-semibold",children:"Filter by Tab"}),Fe.jsxs("button",{onClick:()=>{b({name:"",slug:"",description:"",display_order:r.length+1}),m(!0)},className:"text-primary flex items-center gap-1 text-sm",children:[Fe.jsx(G,{size:16}),"Create New Tab"]})]}),Fe.jsxs("div",{className:"flex gap-2 flex-wrap",children:[Fe.jsx("button",{className:"px-3 py-1 rounded-full "+(null===v?"bg-primary text-white":"bg-gray-200"),onClick:()=>w(null),children:"All Posts"}),r.map((e=>Fe.jsxs("div",{className:"flex items-center gap-1",children:[Fe.jsx("button",{className:"px-3 py-1 rounded-full "+(v===e.id?"bg-primary text-white":"bg-gray-200"),onClick:()=>w(e.id),children:e.name}),Fe.jsx("button",{onClick:()=>_(e.id,e.name),className:"text-red-500 hover:text-red-700",title:`Delete "${e.name}" tab`,children:Fe.jsx(J,{size:14})})]},e.id)))]})]}),a?Fe.jsx("div",{className:"text-center py-10",children:"Loading..."}):Fe.jsx("div",{className:"overflow-x-auto",children:Fe.jsxs("table",{className:"min-w-full bg-white rounded-lg overflow-hidden",children:[Fe.jsx("thead",{className:"bg-gray-100",children:Fe.jsxs("tr",{children:[Fe.jsx("th",{className:"py-3 px-4 text-left",children:"Title"}),Fe.jsx("th",{className:"py-3 px-4 text-left",children:"Tab"}),Fe.jsx("th",{className:"py-3 px-4 text-left",children:"Author"}),Fe.jsx("th",{className:"py-3 px-4 text-left",children:"Created At"}),Fe.jsx("th",{className:"py-3 px-4 text-left",children:"Actions"})]})}),Fe.jsx("tbody",{children:S.map((e=>{var t;return Fe.jsxs("tr",{className:"border-b border-gray-200",children:[Fe.jsx("td",{className:"py-3 px-4",children:e.title}),Fe.jsx("td",{className:"py-3 px-4",children:(null==(t=e.blog_tabs)?void 0:t.name)||"Uncategorized"}),Fe.jsx("td",{className:"py-3 px-4",children:e.author}),Fe.jsx("td",{className:"py-3 px-4",children:new Date(e.created_at).toLocaleDateString()}),Fe.jsxs("td",{className:"py-3 px-4 flex gap-2",children:[Fe.jsx("button",{onClick:()=>(e=>{p(e),c(!0)})(e),className:"p-1 bg-blue-100 text-blue-600 rounded",children:Fe.jsx(K,{size:16})}),Fe.jsx("button",{onClick:()=>(e=>{p(e),u(!0)})(e),className:"p-1 bg-green-100 text-green-600 rounded",children:Fe.jsx(Y,{size:16})}),Fe.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this blog post?"))try{const{error:t}=await gi.from("blog_posts").delete().eq("id",e);if(t)throw t;x.success("Blog post deleted successfully"),N()}catch(t){console.error("Error deleting blog post:",t),x.error("Failed to delete blog post")}})(e.id),className:"p-1 bg-red-100 text-red-600 rounded",children:Fe.jsx(J,{size:16})})]})]},e.id)}))})]})}),l&&Fe.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:Fe.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[Fe.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Fe.jsx("h2",{className:"text-xl font-bold",children:(null==f?void 0:f.id)?"Edit Blog Post":"Add New Blog Post"}),Fe.jsx("button",{onClick:()=>c(!1),children:Fe.jsx(y,{size:24})})]}),Fe.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),f)try{const e=!!f.id,t={title:f.title||"",content:f.content||"",excerpt:f.excerpt||"",author:f.author||"",image_url:f.image_url||"",category:f.category||"",tab_id:f.tab_id||null};if(e){const{error:e}=await gi.from("blog_posts").update(t).eq("id",f.id);if(e)throw e;x.success("Blog post updated successfully")}else{const{error:e}=await gi.from("blog_posts").insert([t]);if(e)throw e;x.success("Blog post added successfully")}c(!1),N()}catch(t){console.error("Error saving blog post:",t),x.error("Failed to save blog post")}},className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Fe.jsxs("div",{className:"col-span-1 md:col-span-2",children:[Fe.jsx("label",{className:"block text-sm font-medium mb-1",children:"Title"}),Fe.jsx("input",{type:"text",value:(null==f?void 0:f.title)||"",onChange:e=>p({...f,title:e.target.value}),className:"w-full p-2 border rounded",required:!0})]}),Fe.jsxs("div",{className:"md:col-span-2",children:[Fe.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tab"}),Fe.jsxs("select",{value:(null==f?void 0:f.tab_id)||"",onChange:e=>p({...f,tab_id:e.target.value||null}),className:"w-full p-2 border rounded",children:[Fe.jsx("option",{value:"",children:"-- No Tab (Display in All) --"}),r.map((e=>Fe.jsx("option",{value:e.id,children:e.name},e.id)))]}),Fe.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Assign this post to a specific tab.",Fe.jsx("button",{type:"button",className:"text-blue-500 underline ml-1",onClick:e=>{e.preventDefault(),c(!1),C()},children:"Manage tabs"})]})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date"}),Fe.jsx("input",{type:"date",value:(null==f?void 0:f.date)||"",onChange:e=>p({...f,date:e.target.value}),className:"w-full p-2 border rounded",required:!0})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium mb-1",children:"Author"}),Fe.jsx("input",{type:"text",value:(null==f?void 0:f.author)||"",onChange:e=>p({...f,author:e.target.value}),className:"w-full p-2 border rounded",required:!0})]}),Fe.jsxs("div",{className:"md:col-span-2",children:[Fe.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),Fe.jsx("input",{type:"text",value:(null==f?void 0:f.category)||"",onChange:e=>p({...f,category:e.target.value}),className:"w-full p-2 border rounded"})]}),Fe.jsxs("div",{className:"md:col-span-2",children:[Fe.jsx("label",{className:"block text-sm font-medium mb-1",children:"Excerpt"}),Fe.jsx("textarea",{value:(null==f?void 0:f.excerpt)||"",onChange:e=>p({...f,excerpt:e.target.value}),className:"w-full p-2 border rounded h-20",required:!0})]}),Fe.jsxs("div",{className:"md:col-span-2",children:[Fe.jsx("label",{className:"block text-sm font-medium mb-1",children:"Content"}),Fe.jsx("textarea",{value:(null==f?void 0:f.content)||"",onChange:e=>p({...f,content:e.target.value}),className:"w-full p-2 border rounded h-40",required:!0})]}),Fe.jsxs("div",{className:"md:col-span-2",children:[Fe.jsx("label",{className:"block text-sm font-medium mb-1",children:"Featured Image"}),(null==f?void 0:f.image_url)&&Fe.jsx("div",{className:"mb-2 relative",children:Fe.jsx("img",{src:f.image_url,alt:"Featured",className:"w-full max-h-40 object-cover rounded mb-2"})}),Fe.jsxs("div",{className:"flex items-center gap-2",children:[Fe.jsxs("label",{className:"cursor-pointer bg-gray-100 px-4 py-2 rounded-md flex items-center gap-2",children:[Fe.jsx($,{size:16}),Fe.jsx("span",{children:"Upload Image"}),Fe.jsx("input",{type:"file",accept:"image/*",onChange:async e=>{if(!e.target.files||0===e.target.files.length)return;const t=e.target.files[0],n=t.name.split(".").pop(),r=`blog/${`${Math.random()}.${n}`}`;try{const{error:e}=await gi.storage.from("public").upload(r,t);if(e)throw e;const{data:n}=gi.storage.from("public").getPublicUrl(r);f&&p({...f,image_url:n.publicUrl}),x.success("Image uploaded successfully")}catch(s){console.error("Error uploading image:",s),x.error("Failed to upload image")}},className:"hidden"})]}),(null==f?void 0:f.image_url)&&Fe.jsx("button",{type:"button",onClick:()=>p({...f,image_url:""}),className:"text-red-500 bg-red-50 p-2 rounded-md",children:Fe.jsx(J,{size:16})})]})]}),Fe.jsxs("div",{className:"flex justify-end gap-2",children:[Fe.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 border rounded-md",children:"Cancel"}),Fe.jsxs("button",{type:"submit",className:"px-4 py-2 bg-primary text-white rounded-md",children:[(null==f?void 0:f.id)?"Update":"Create"," Post"]})]})]})]})}),d&&Fe.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:Fe.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[Fe.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Fe.jsx("h2",{className:"text-xl font-bold",children:"Move Post to Different Tab"}),Fe.jsx("button",{onClick:()=>u(!1),children:Fe.jsx(y,{size:24})})]}),Fe.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),f&&f.id)try{await async function(e,t){try{const{data:n,error:r}=await gi.from("blog_posts").update({tab_id:t}).eq("id",e).select().single();return r?(console.error("Error updating blog post tab:",r),null):n}catch(n){return console.error("Error in updateBlogPostTab:",n),null}}(f.id,f.tab_id),x.success("Blog post moved successfully"),u(!1),N()}catch(t){console.error("Error moving blog post:",t),x.error("Failed to move blog post")}},children:[Fe.jsxs("div",{className:"mb-4",children:[Fe.jsxs("p",{className:"text-sm mb-1",children:["Moving: ",Fe.jsx("strong",{children:null==f?void 0:f.title})]}),Fe.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Current Tab: ",Fe.jsx("strong",{children:(null==(e=null==f?void 0:f.blog_tabs)?void 0:e.name)||"Uncategorized"})]}),Fe.jsx("label",{className:"block text-sm font-medium mb-1",children:"Select New Tab"}),Fe.jsxs("select",{value:(null==f?void 0:f.tab_id)||"",onChange:e=>p({...f,tab_id:e.target.value||null}),className:"w-full p-2 border rounded",required:!0,children:[Fe.jsx("option",{value:"",children:"Uncategorized"}),r.map((e=>Fe.jsx("option",{value:e.id,children:e.name},e.id)))]})]}),Fe.jsxs("div",{className:"flex justify-end gap-2",children:[Fe.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 border rounded-md",children:"Cancel"}),Fe.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-white rounded-md",children:"Move Post"})]})]})]})}),h&&Fe.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:Fe.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[Fe.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Fe.jsx("h2",{className:"text-xl font-bold",children:"Create New Tab"}),Fe.jsx("button",{onClick:()=>m(!1),children:Fe.jsx(y,{size:24})})]}),Fe.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),g&&g.name)try{const e={name:g.name,slug:g.slug||k(g.name),description:g.description||"",display_order:g.display_order||r.length+1};await async function(e){try{const{data:t,error:n}=await gi.from("blog_tabs").insert([e]).select().single();return n?(console.error("Error creating blog tab:",n),null):t}catch(t){return console.error("Error in createBlogTab:",t),null}}(e),x.success("Tab created successfully"),m(!1),j()}catch(t){console.error("Error creating tab:",t),x.error("Failed to create tab")}},children:[Fe.jsxs("div",{className:"mb-4",children:[Fe.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tab Name"}),Fe.jsx("input",{type:"text",value:(null==g?void 0:g.name)||"",onChange:e=>b({...g,name:e.target.value,slug:k(e.target.value)}),className:"w-full p-2 border rounded",placeholder:"e.g., Study Abroad, Scholarships",required:!0})]}),Fe.jsxs("div",{className:"mb-4",children:[Fe.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tab Description (Optional)"}),Fe.jsx("textarea",{value:(null==g?void 0:g.description)||"",onChange:e=>b({...g,description:e.target.value}),className:"w-full p-2 border rounded h-20",placeholder:"Brief description of what content goes in this tab"})]}),Fe.jsxs("div",{className:"flex justify-end gap-2",children:[Fe.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 border rounded-md",children:"Cancel"}),Fe.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-white rounded-md",children:"Create Tab"})]})]})]})})]})}function Wi({onClose:e,onAdminAdded:t}){const[n,r]=s.useState(""),[i,a]=s.useState(""),[o,l]=s.useState(""),[c,d]=s.useState(""),[u,h]=s.useState(!1);return Fe.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:Fe.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[Fe.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[Fe.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Add New Admin"}),Fe.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:Fe.jsx(y,{className:"h-5 w-5"})})]}),Fe.jsxs("form",{onSubmit:async r=>{r.preventDefault(),h(!0);try{const{data:{user:r},error:s}=await gi.auth.signUp({email:n,password:i});if(s)throw s;if(!r)throw new Error("Failed to create user account");const{error:a}=await gi.from("profiles").update({is_admin:!0,is_super_admin:!1,updated_at:(new Date).toISOString()}).eq("id",r.id);if(a)throw a;const{data:l,error:d}=await gi.from("profiles").select("is_admin").eq("id",r.id).single();if(d)throw d;if(!(null==l?void 0:l.is_admin))throw new Error("Failed to set admin privileges");const{error:u}=await gi.from("admin_requests").insert([{user_id:r.id,email:n,agency_name:o,agency_url:c,status:"approved"}]);if(u)throw u;x.success("Admin account created successfully with full admin privileges"),t(),e()}catch(s){console.error("Error creating admin:",s),x.error(s instanceof Error?s.message:"Failed to create admin account")}finally{h(!1)}},className:"p-6 space-y-6",children:[Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(b,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"email",required:!0,value:n,onChange:e=>r(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"admin@example.com"})]})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(v,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"password",required:!0,value:i,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"",minLength:6})]})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Agency Name"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(N,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"text",required:!0,value:o,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Agency Name"})]})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Agency URL"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(S,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"text",required:!0,value:c,onChange:e=>d(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"agency-url"})]})]}),Fe.jsxs("div",{className:"flex justify-end gap-4",children:[Fe.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-50 border border-gray-300 rounded-lg",children:"Cancel"}),Fe.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-gray-400",children:u?"Creating...":"Create Admin"})]})]})]})})}function Gi(){const{user:e}=_i(),[t,n]=s.useState([]),[r,i]=s.useState([]),[a,o]=s.useState(""),[l,c]=s.useState([]),[d,u]=s.useState(!0),[h,m]=s.useState("all"),[f,p]=s.useState(!1),[g,y]=s.useState(!1),[b,v]=s.useState("agencies"),[w,N]=s.useState(1),[k,_]=s.useState({total:0,processed:0,success:0,failed:0});s.useEffect((()=>{e&&(C(),S())}),[h,e]),s.useEffect((()=>{if(!a.trim())return void i(t);const e=a.toLowerCase(),n=t.filter((t=>{var n,r;return t.name.toLowerCase().includes(e)||(null==(n=t.location)?void 0:n.toLowerCase().includes(e))||(null==(r=t.contact_email)?void 0:r.toLowerCase().includes(e))}));i(n)}),[a,t]);const S=async()=>{try{const{data:e,error:t}=await bi((()=>gi.from("profiles").select("\n            id,\n            email,\n            created_at,\n            is_admin\n          ").eq("is_admin",!0).eq("is_super_admin",!1)));if(t)throw t;const n=await Promise.all((e||[]).map((async e=>{const{count:t,error:n}=await gi.from("agencies").select("*",{count:"exact",head:!0}).eq("owner_id",e.id);if(n)throw n;return{...e,agencies_count:t||0}})));c(n)}catch(e){console.error("Failed to load admins:",e),x.error("Failed to load admins")}},C=async()=>{try{let e=gi.from("agencies").select("\n          *,\n          owner:profiles!agencies_owner_id_fkey (\n            id,\n            email\n          )\n        ").order("name",{ascending:!0});"all"!==h&&(e=e.eq("status",h));const{data:t,error:r}=await bi((()=>e));if(r)throw r;const s=(t||[]).sort(((e,t)=>{const n=e=>/^[A-Za-z]/.test(e),r=n(e.name),s=n(t.name);return r&&!s?-1:!r&&s?1:e.name.localeCompare(t.name)}));n(s)}catch(e){console.error("Failed to load agencies:",e),x.error("Failed to load agencies")}finally{u(!1)}},T=Math.ceil(r.length/12),A=12*(w-1),O=A+12,P=r.slice(A,O);return s.useEffect((()=>{N(1)}),[a,h]),d?Fe.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-blue-50 to-white",children:Fe.jsxs("div",{className:"text-center",children:[Fe.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),Fe.jsx("p",{className:"mt-4 text-gray-600",children:"Loading dashboard..."})]})}):Fe.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white",children:[Fe.jsx("div",{className:"bg-gradient-to-r from-blue-800 to-blue-600 shadow-lg",children:Fe.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Fe.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center py-4 sm:py-6 space-y-4 sm:space-y-0",children:[Fe.jsxs("div",{className:"flex items-center gap-3",children:[Fe.jsx(R,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white"}),Fe.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Super Admin Dashboard"})]}),Fe.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full sm:w-auto",children:[Fe.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[Fe.jsxs("select",{value:h,onChange:e=>m(e.target.value),className:"w-full sm:w-auto appearance-none pl-8 pr-10 py-2 border-0 rounded-lg focus:ring-2 focus:ring-white/50 bg-white/10 backdrop-blur-sm text-white placeholder-blue-200 text-sm font-medium hover:bg-white/20 transition-colors",children:[Fe.jsx("option",{value:"all",className:"text-gray-900",children:"All Agencies"}),Fe.jsx("option",{value:"pending",className:"text-gray-900",children:"Pending"}),Fe.jsx("option",{value:"approved",className:"text-gray-900",children:"Approved"}),Fe.jsx("option",{value:"rejected",className:"text-gray-900",children:"Rejected"})]}),Fe.jsx(X,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-blue-200"})]}),Fe.jsxs("button",{onClick:()=>y(!0),className:"flex-1 sm:flex-none inline-flex items-center justify-center px-4 py-2 border-2 border-white/30 rounded-lg text-sm font-medium text-white hover:bg-white/10 transition-colors",children:[Fe.jsx(E,{className:"h-4 w-4 mr-2"}),"Add Admin"]}),Fe.jsxs("button",{onClick:()=>p(!0),className:"flex-1 sm:flex-none inline-flex items-center justify-center px-4 py-2 bg-white rounded-lg shadow-sm text-sm font-medium text-blue-800 hover:bg-blue-50 transition-colors",children:[Fe.jsx(E,{className:"h-4 w-4 mr-2"}),"Bulk Upload"]})]})]}),Fe.jsx("div",{className:"mt-4 -mb-px overflow-x-auto scrollbar-hide",children:Fe.jsxs("nav",{className:"flex space-x-8 min-w-max","aria-label":"Tabs",children:[Fe.jsxs("button",{onClick:()=>v("agencies"),className:("agencies"===b?"border-white text-white":"border-transparent text-blue-100 hover:text-white hover:border-white/50")+" flex items-center whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors",children:[Fe.jsx(Q,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),"Agencies & Admins"]}),Fe.jsxs("button",{onClick:()=>v("blog"),className:("blog"===b?"border-white text-white":"border-transparent text-blue-100 hover:text-white hover:border-white/50")+" flex items-center whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors",children:[Fe.jsx(Z,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),"Blog Management"]})]})})]})}),Fe.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8",children:Fe.jsx("div",{className:"space-y-4 sm:space-y-6",children:"agencies"===b?Fe.jsxs(Fe.Fragment,{children:[Fe.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[Fe.jsx("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:Fe.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[Fe.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[Fe.jsx(Q,{className:"h-5 w-5 text-blue-600"}),"Agency Management"]}),Fe.jsxs("div",{className:"relative flex-1 sm:max-w-xs",children:[Fe.jsx("input",{type:"text",placeholder:"Search agencies...",value:a,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),Fe.jsx(j,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})]})}),Fe.jsx("div",{className:"overflow-x-auto -mx-4 sm:mx-0",children:Fe.jsx("div",{className:"inline-block min-w-full align-middle",children:Fe.jsx(Mi,{agencies:P,onStatusChange:async(e,t)=>{try{const{error:n}=await gi.from("agencies").update({status:t}).eq("id",e);if(n)throw n;C(),x.success(`Agency ${t}`)}catch(n){x.error("Failed to update agency status")}},onVerificationChange:async(e,t)=>{try{const{error:n}=await gi.from("agencies").update({is_verified:t}).eq("id",e);if(n)throw n;C(),x.success("Agency "+(t?"verified":"unverified"))}catch(n){x.error("Failed to update verification status")}},onTrustScoreChange:async(e,t)=>{try{const{error:n}=await gi.from("agencies").update({trust_score:t}).eq("id",e);if(n)throw n;C(),x.success("Trust score updated")}catch(n){x.error("Failed to update trust score")}},onDelete:async e=>{try{const{data:t}=await gi.from("reviews").select("id").eq("agency_id",e);if(t&&t.length>0){const e=t.map((e=>e.id));await gi.from("review_responses").delete().in("review_id",e)}await gi.from("reviews").delete().eq("agency_id",e),await gi.from("agency_services").delete().eq("agency_id",e),await gi.from("agency_photos").delete().eq("agency_id",e),await gi.from("agencies").delete().eq("id",e),n((t=>t.filter((t=>t.id!==e)))),await C(),x.success("Agency deleted successfully")}catch(t){x.error("Failed to delete agency. Please try again.")}}})})}),T>1&&Fe.jsxs("div",{className:"px-4 sm:px-6 py-4 flex items-center justify-between border-t border-gray-200 bg-white",children:[Fe.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[Fe.jsx("button",{onClick:()=>N((e=>Math.max(e-1,1))),disabled:1===w,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Fe.jsx("button",{onClick:()=>N((e=>Math.min(e+1,T))),disabled:w===T,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),Fe.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[Fe.jsx("div",{children:Fe.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",Fe.jsx("span",{className:"font-medium",children:A+1})," to"," ",Fe.jsx("span",{className:"font-medium",children:Math.min(O,r.length)})," ","of ",Fe.jsx("span",{className:"font-medium",children:r.length})," results"]})}),Fe.jsx("div",{children:Fe.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[Fe.jsxs("button",{onClick:()=>N((e=>Math.max(e-1,1))),disabled:1===w,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[Fe.jsx("span",{className:"sr-only",children:"Previous"}),Fe.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:Fe.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),[...Array(T)].map(((e,t)=>Fe.jsx("button",{onClick:()=>N(t+1),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium "+(w===t+1?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),children:t+1},t+1))),Fe.jsxs("button",{onClick:()=>N((e=>Math.min(e+1,T))),disabled:w===T,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[Fe.jsx("span",{className:"sr-only",children:"Next"}),Fe.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:Fe.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})]})]}),Fe.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[Fe.jsx("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:Fe.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[Fe.jsx(ee,{className:"h-5 w-5 text-blue-600"}),"Admin Management"]})}),Fe.jsx("div",{className:"overflow-x-auto",children:Fe.jsx(zi,{admins:l,onAdminDeleted:S})})]}),Fe.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[Fe.jsx("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:Fe.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[Fe.jsx(U,{className:"h-5 w-5 text-blue-600"}),"Agency Assignments"]})}),Fe.jsx("div",{className:"overflow-x-auto",children:Fe.jsx(Ui,{agencies:t,admins:l,onAssignmentChange:C})})]}),Fe.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[Fe.jsx("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:Fe.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[Fe.jsx(ee,{className:"h-5 w-5 text-blue-600"}),"User Management"]})}),Fe.jsx("div",{className:"overflow-x-auto",children:Fe.jsx(Bi,{})})]})]}):Fe.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[Fe.jsx("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:Fe.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[Fe.jsx(Z,{className:"h-5 w-5 text-blue-600"}),"Blog Management"]})}),Fe.jsx("div",{className:"overflow-x-auto",children:Fe.jsx(Vi,{})})]})})}),f&&Fe.jsxs("div",{className:"fixed inset-0 z-50",children:[Fe.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),Fe.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:Fe.jsx($i,{onClose:()=>p(!1),onUpload:async t=>{_({total:t.length,processed:0,success:0,failed:0});for(const r of t)try{const{error:t}=await gi.from("agencies").insert([{name:r.name,location:r.location,description:r.description,contact_email:r.contact_email,trust_score:r.trust_score||0,price:r.price||0,contact_phone:r.contact_phone||"",website:r.website||"",business_hours:r.business_hours||"",owner_id:null==e?void 0:e.id,status:"pending"}]);if(t)throw console.error("Failed to insert agency:",t),t;_((e=>({...e,processed:e.processed+1,success:e.success+1})))}catch(n){console.error("Failed to insert agency:",n),_((e=>({...e,processed:e.processed+1,failed:e.failed+1})))}await C(),x.success("CSV upload completed"),p(!1)},uploadStatus:k})})]}),g&&Fe.jsxs("div",{className:"fixed inset-0 z-50",children:[Fe.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),Fe.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:Fe.jsx(Wi,{onClose:()=>y(!1),onAdminAdded:S})})]})]})}function Ji({onClose:e}){const{user:t}=_i(),[n,r]=s.useState(null),[i,a]=s.useState(!0),[o,l]=s.useState(!1),[c,d]=s.useState({});s.useEffect((()=>{t&&u()}),[t]);const u=async()=>{try{const{data:e,error:n}=await gi.from("profiles").select("*").eq("id",null==t?void 0:t.id).single();if(n)throw n;r(e),d(e)}catch(e){x.error("Error loading profile")}finally{a(!1)}};return i?Fe.jsx("div",{className:"p-8 text-center",children:"Loading..."}):Fe.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-2xl",children:[Fe.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Fe.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Profile"}),Fe.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 transition-colors",children:Fe.jsx(y,{className:"h-5 w-5"})})]}),o?Fe.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),t)try{const{error:e}=await gi.from("profiles").update(c).eq("id",t.id);if(e)throw e;r((e=>({...e,...c}))),l(!1),x.success("Profile updated successfully")}catch(n){x.error("Error updating profile")}},className:"space-y-6",children:[Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(V,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"text",value:c.full_name||"",onChange:e=>d({...c,full_name:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Your full name"})]})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(b,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"email",value:(null==n?void 0:n.email)||"",disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg bg-gray-50"})]})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx(_,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"tel",value:c.phone||"",onChange:e=>d({...c,phone:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Your phone number"})]})]}),Fe.jsxs("div",{children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Avatar URL"}),Fe.jsxs("div",{className:"relative",children:[Fe.jsx($,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),Fe.jsx("input",{type:"url",value:c.avatar_url||"",onChange:e=>d({...c,avatar_url:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"https://example.com/avatar.jpg"})]})]}),Fe.jsxs("div",{className:"flex justify-end gap-4",children:[Fe.jsx("button",{type:"button",onClick:()=>{d(n||{}),l(!1)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),Fe.jsxs("button",{type:"submit",className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700",children:[Fe.jsx(T,{className:"h-5 w-5"}),"Save Changes"]})]})]}):Fe.jsxs("div",{className:"space-y-6",children:[Fe.jsxs("div",{className:"flex items-center gap-4",children:[(null==n?void 0:n.avatar_url)?Fe.jsx("img",{src:n.avatar_url,alt:n.full_name||"User avatar",className:"h-20 w-20 rounded-full object-cover"}):Fe.jsx("div",{className:"h-20 w-20 rounded-full bg-gray-200 flex items-center justify-center",children:Fe.jsx(V,{className:"h-10 w-10 text-gray-400"})}),Fe.jsxs("div",{children:[Fe.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:(null==n?void 0:n.full_name)||"Anonymous User"}),Fe.jsx("p",{className:"text-gray-500",children:null==n?void 0:n.email})]})]}),Fe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Fe.jsxs("div",{children:[Fe.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Email"}),Fe.jsxs("p",{className:"mt-1 flex items-center gap-2",children:[Fe.jsx(b,{className:"h-5 w-5 text-gray-400"}),null==n?void 0:n.email]})]}),(null==n?void 0:n.phone)&&Fe.jsxs("div",{children:[Fe.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Phone"}),Fe.jsxs("p",{className:"mt-1 flex items-center gap-2",children:[Fe.jsx(_,{className:"h-5 w-5 text-gray-400"}),n.phone]})]})]}),Fe.jsx("button",{onClick:()=>l(!0),className:"mt-6 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700",children:"Edit Profile"})]})]})}function Ki({isSuperAdmin:e,isAdmin:t,showDashboard:n,showProfile:r,setShowDashboard:i,setShowProfile:a,setShowAuth:o}){const{user:l}=_i(),c=d(),m=u(),[f,p]=s.useState(!1),[g,x]=s.useState(null),b={overseas:s.useRef(null),resources:s.useRef(null)};s.useEffect((()=>{const e=e=>{if(g){const t=b[g];(null==t?void 0:t.current)&&!t.current.contains(e.target)&&(console.log("Click outside dropdown:",g),x(null))}};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[g]);const v=e=>{console.log("Toggling dropdown:",e,"Current active:",g),x(g===e?null:e)},w=[{icon:Fe.jsx(re,{className:"h-5 w-5"}),text:"Home",path:"/",onClick:()=>{i(!1),a(!1),c("/")}},{icon:Fe.jsx(se,{className:"h-5 w-5"}),text:"Study Abroad",path:"/study-abroad",onClick:()=>{console.log("Over Seas button clicked"),v("study-abroad")},isDropdown:!0,dropdownName:"study-abroad",dropdownItems:[{text:"Course Finder",description:"Search international programs by country, field,...",path:"/course-finder",onClick:()=>c("/course-finder")},{text:"Scholarship Finder",description:"Find scholarships based on eligibility and preferences",path:"/scholarship-finder",onClick:()=>c("/scholarship-finder")},{text:"Consultancy Directory",description:"Connect with verified education consultants",path:"/agencies",onClick:()=>c("/agencies")},{text:"Find a Buddy",description:"Connect with students heading to the same destination",path:"/find-buddy",onClick:()=>c("/find-buddy")}]},{icon:Fe.jsx(ie,{className:"h-5 w-5"}),text:"Resources",path:"/resources",onClick:()=>{console.log("Resources button clicked"),v("resources")},isDropdown:!0,dropdownName:"resources",dropdownItems:[{text:"Knowledge Hub",description:"Guides and tips for studying abroad",path:"/knowledge-hub",onClick:()=>c("/knowledge-hub")},{text:"Language Prep",description:"Resources for IELTS, Duolingo, and PTE...",path:"/language-prep",onClick:()=>c("/language-prep")},{text:"Application Tracker",description:"Track your application status",path:"/application-tracker",onClick:()=>c("/application-tracker")},{text:"Visa Information",description:"Study visa requirements and processes for different countries",path:"/visa-info",onClick:()=>c("/visa-info")}]},{icon:Fe.jsx(V,{className:"h-5 w-5"}),text:"About",path:"/about",onClick:()=>{i(!1),a(!1),c("/about")}},{icon:Fe.jsx(z,{className:"h-5 w-5"}),text:"Contact Us",path:"/contact",onClick:()=>{i(!1),a(!1),c("/contact")}}];return l&&(e?w.push({icon:Fe.jsx(R,{className:"h-5 w-5"}),text:"Super Admin",path:"/dashboard",onClick:()=>{i(!0),a(!1)}}):t?w.push({icon:Fe.jsx(ae,{className:"h-5 w-5"}),text:"Dashboard",path:"/dashboard",onClick:()=>{i(!0),a(!1)}}):w.push({icon:Fe.jsx(V,{className:"h-5 w-5"}),text:"Profile",path:"/profile",onClick:()=>{i(!1),a(!0)}})),Fe.jsx("nav",{className:"sticky top-0 z-50 backdrop-blur-md bg-white/55 border-b border-gray-200/20",children:Fe.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Fe.jsxs("div",{className:"flex justify-between h-14",children:[Fe.jsxs("div",{className:"flex items-center",children:[Fe.jsx("div",{className:"flex-shrink-0 flex items-center",children:Fe.jsx(h,{to:"/",children:Fe.jsxs("span",{className:"text-2xl font-bold text-primary cursor-pointer",children:["Admissions",Fe.jsx("span",{className:"text-secondary",children:".app"})]})})}),Fe.jsx("div",{className:"hidden md:ml-6 md:flex md:space-x-4",children:w.map(((e,t)=>{var n;return Fe.jsx("div",{className:"relative",children:e.isDropdown?Fe.jsxs("div",{ref:b[e.dropdownName],className:"relative",children:[Fe.jsxs("button",{onClick:()=>e.onClick(),className:"inline-flex items-center px-2.5 py-1.5 text-sm font-medium transition-colors rounded-lg "+(g===e.dropdownName?"text-primary bg-primary/5":"text-gray-500 hover:text-primary hover:bg-primary/5"),children:[e.icon,Fe.jsx("span",{className:"ml-1.5",children:e.text}),Fe.jsx(te,{className:"ml-0.5 h-4 w-4 transform transition-transform "+(g===e.dropdownName?"rotate-180":"")})]}),g===e.dropdownName&&Fe.jsx("div",{className:"absolute left-0 mt-1 w-[576px] rounded-lg shadow-lg bg-white ring-1 ring-black/5 z-[999] p-3",children:Fe.jsx("div",{className:"grid grid-cols-2 gap-3",children:null==(n=e.dropdownItems)?void 0:n.map(((e,t)=>Fe.jsxs(h,{to:e.path,onClick:()=>{console.log("Dropdown item clicked:",e.text),x(null),e.onClick()},className:"w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors block cursor-pointer",children:[Fe.jsx("div",{className:"text-sm font-medium text-gray-900 mb-0.5",children:e.text}),Fe.jsx("div",{className:"text-xs text-gray-500",children:e.description})]},t)))})})]}):Fe.jsxs(h,{to:e.path,onClick:()=>((0,e.onClick)(),p(!1),void x(null)),className:"inline-flex items-center px-2.5 py-1.5 text-sm font-medium transition-colors rounded-lg "+(m.pathname===e.path?"text-primary bg-primary/5":"text-gray-500 hover:text-primary hover:bg-primary/5"),children:[e.icon,Fe.jsx("span",{className:"ml-1.5",children:e.text})]})},t)}))})]}),Fe.jsxs("div",{className:"flex items-center",children:[Fe.jsx("div",{className:"hidden md:ml-4 md:flex-shrink-0 md:flex md:items-center space-x-4",children:l?Fe.jsx("button",{onClick:()=>gi.auth.signOut(),className:"inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary/50 transition-colors",children:"Sign Out"}):Fe.jsxs(Fe.Fragment,{children:[Fe.jsx("button",{onClick:()=>o(!0),className:"inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary/50 transition-colors",children:"Sign In"}),Fe.jsx("button",{onClick:()=>o(!0),className:"inline-flex items-center px-6 py-2 border border-primary text-sm font-medium rounded-lg text-primary hover:bg-primary/5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary/50 transition-colors",children:"Sign Up"})]})}),Fe.jsx("div",{className:"flex items-center md:hidden",children:Fe.jsxs("button",{type:"button",onClick:()=>p(!f),className:"inline-flex items-center justify-center p-2 rounded-lg text-gray-500 hover:text-primary hover:bg-primary/5 focus:outline-none transition-colors","aria-expanded":"false",children:[Fe.jsx("span",{className:"sr-only",children:"Open main menu"}),f?Fe.jsx(y,{className:"h-6 w-6"}):Fe.jsx(ne,{className:"h-6 w-6"})]})})]})]}),f&&Fe.jsx("div",{className:"md:hidden bg-white",children:Fe.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[w.map(((e,t)=>{var n;return Fe.jsxs("div",{children:[Fe.jsxs("button",{onClick:()=>e.isDropdown?e.onClick():c(e.path),className:"w-full flex items-center gap-3 px-4 py-2 text-sm font-medium text-left rounded-lg transition-colors "+(m.pathname===e.path?"text-primary bg-primary/5":"text-gray-500 hover:text-primary hover:bg-primary/5"),children:[e.icon,Fe.jsx("span",{children:e.text}),e.isDropdown&&Fe.jsx(te,{className:"ml-auto h-4 w-4 transform transition-transform "+(g===e.dropdownName?"rotate-180":"")})]}),e.isDropdown&&g===e.dropdownName&&Fe.jsx("div",{className:"pl-4 py-2 space-y-2",children:null==(n=e.dropdownItems)?void 0:n.map(((e,t)=>Fe.jsxs(h,{to:e.path,onClick:()=>{console.log("Mobile dropdown item clicked:",e.text),x(null),p(!1),e.onClick()},className:"w-full text-left p-3 rounded-lg hover:bg-gray-50 block",children:[Fe.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.text}),Fe.jsx("div",{className:"text-sm text-gray-500",children:e.description})]},t)))})]},t)})),l?Fe.jsx("button",{onClick:()=>{gi.auth.signOut(),p(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm font-medium text-left text-primary hover:bg-primary/5 rounded-lg transition-colors",children:"Sign Out"}):Fe.jsxs(Fe.Fragment,{children:[Fe.jsx("button",{onClick:()=>{o(!0),p(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm font-medium text-left text-primary hover:bg-primary/5 rounded-lg transition-colors",children:"Sign In"}),Fe.jsx("button",{onClick:()=>{o(!0),p(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm font-medium text-left text-primary hover:bg-primary/5 rounded-lg transition-colors",children:"Sign Up"})]})]})})]})})}function Yi(){const e=[{icon:Fe.jsx(j,{className:"w-8 h-8 text-primary"}),title:"Course Finder",description:"Search through thousands of courses worldwide with intuitive filters.",link:"/course-finder"},{icon:Fe.jsx(oe,{className:"w-8 h-8 text-orange-500"}),title:"Scholarship Finder",description:"Discover scholarships with eligibility indicators and application guidance.",link:"/scholarships"},{icon:Fe.jsx(le,{className:"w-8 h-8 text-emerald-500"}),title:"Application Tracker",description:"Track applications with visual timelines and task management.",link:"/application-tracker"},{icon:Fe.jsx(ee,{className:"w-8 h-8 text-primary"}),title:"Find a Buddy",description:"Connect with others studying at your dream university.",link:"#"},{icon:Fe.jsx(ce,{className:"w-8 h-8 text-orange-500"}),title:"Consultancy Directory",description:"Find verified education consultants with trust scores.",link:"/agencies"},{icon:Fe.jsx(ie,{className:"w-8 h-8 text-emerald-500"}),title:"Knowledge Hub",description:"Access microlearning resources to help with applications.",link:"/knowledge-hub"}];return Fe.jsxs("div",{className:"min-h-screen",children:[Fe.jsxs("div",{className:"bg-blue-50 py-20 px-4 sm:px-6 lg:px-8",children:[Fe.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[Fe.jsxs("h1",{className:"text-5xl font-bold mb-6",children:["Your Journey to ",Fe.jsx("span",{className:"text-primary",children:"Global Education"})," Starts Here"]}),Fe.jsx("p",{className:"text-gray-600 text-xl mb-8",children:"Discover courses, track applications, and connect with students worldwide on one powerful platform."}),Fe.jsxs("div",{className:"flex justify-center gap-4",children:[Fe.jsx(h,{to:"/agencies",className:"px-8 py-3 bg-primary text-white rounded-lg font-medium hover:bg-primary/90 transition-colors",children:"Get Started"}),Fe.jsx(h,{to:"/about",className:"px-8 py-3 bg-white text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Learn More"})]})]}),Fe.jsx("div",{className:"max-w-7xl mx-auto mt-20 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{number:"2,500+",label:"Universities"},{number:"15,000+",label:"Courses"},{number:"1,200+",label:"Scholarships"},{number:"50,000+",label:"Students Helped"}].map(((e,t)=>Fe.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm text-center",children:[Fe.jsx("div",{className:"text-primary text-4xl font-bold",children:e.number}),Fe.jsx("div",{className:"text-gray-600 mt-2",children:e.label})]},t)))})]}),Fe.jsx("div",{className:"py-20 px-4 sm:px-6 lg:px-8",children:Fe.jsxs("div",{className:"max-w-7xl mx-auto",children:[Fe.jsx("h2",{className:"text-4xl font-bold text-center mb-4",children:"Everything You Need for Your Education Journey"}),Fe.jsx("p",{className:"text-gray-600 text-center mb-16",children:"Admissions.app provides all the tools and resources to make your international education journey smooth and successful."}),Fe.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map(((e,t)=>Fe.jsxs(h,{to:e.link||"#",className:"bg-white p-6 rounded-lg border hover:shadow-md transition-shadow",children:[Fe.jsx("div",{className:"mb-4",children:e.icon}),Fe.jsx("h3",{className:"text-xl font-semibold mb-2",children:e.title}),Fe.jsx("p",{className:"text-gray-600",children:e.description})]},t)))})]})}),Fe.jsx("div",{className:"bg-primary py-20 px-4 sm:px-6 lg:px-8",children:Fe.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[Fe.jsx("h2",{className:"text-4xl font-bold text-white mb-4",children:"Ready to Begin Your Global Education Journey?"}),Fe.jsx("p",{className:"text-white/90 text-xl mb-8",children:"Join thousands of students who have successfully found their path with Admissions.app"}),Fe.jsx(h,{to:"/signup",className:"inline-block px-8 py-3 bg-white text-primary rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Create Free Account"})]})}),Fe.jsx("div",{className:"py-20 px-4 sm:px-6 lg:px-8",children:Fe.jsxs("div",{className:"max-w-7xl mx-auto",children:[Fe.jsx("h2",{className:"text-4xl font-bold text-center mb-4",children:"What Students Say"}),Fe.jsx("p",{className:"text-gray-600 text-center mb-16",children:"Hear from students who have successfully navigated their education journey with our platform."}),Fe.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[{initials:"SA",name:"Sarah A.",university:"Now at University of Toronto",quote:"Admissions.app helped me find the perfect program and track all my applications in one place. I wouldn't have gotten into my dream university without it!",bgColor:"bg-primary"},{initials:"MK",name:"Michael K.",university:"Now at LSE",quote:"The scholarship finder feature saved me thousands of dollars! I found funding opportunities I never would have discovered otherwise.",bgColor:"bg-emerald-500"},{initials:"JL",name:"Jessica L.",university:"Now at TU Munich",quote:"Finding a buddy who was already studying at my university made the transition so much easier. We're still friends to this day!",bgColor:"bg-orange-500"}].map(((e,t)=>Fe.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[Fe.jsxs("div",{className:"flex items-center mb-4",children:[Fe.jsx("div",{className:`w-12 h-12 ${e.bgColor} text-white rounded-full flex items-center justify-center font-semibold`,children:e.initials}),Fe.jsxs("div",{className:"ml-4",children:[Fe.jsx("div",{className:"font-semibold",children:e.name}),Fe.jsx("div",{className:"text-gray-600 text-sm",children:e.university})]})]}),Fe.jsxs("p",{className:"text-gray-600 italic",children:['"',e.quote,'"']})]},t)))})]})}),Fe.jsx("div",{className:"border-t py-8 px-4 sm:px-6 lg:px-8",children:Fe.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[Fe.jsx("p",{className:"text-gray-600 mb-4",children:" 2025 Admissions.app. All rights reserved."}),Fe.jsxs("div",{className:"flex justify-center gap-6 text-gray-600",children:[Fe.jsx(h,{to:"/terms",className:"hover:text-gray-900",children:"Terms"}),Fe.jsx(h,{to:"/privacy",className:"hover:text-gray-900",children:"Privacy"}),Fe.jsx(h,{to:"/contact",className:"hover:text-gray-900",children:"Contact"})]})]})})]})}function Xi({agencyId:e,onReviewSubmitted:t}){const{user:n}=_i(),[r,i]=s.useState(0),[a,o]=s.useState(0),[l,c]=s.useState(""),[d,u]=s.useState(!1);return Fe.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),n)if(r)if(l.trim()){u(!0);try{const{error:s}=await gi.from("reviews").insert([{agency_id:e,user_id:n.id,rating:r,content:l.trim(),status:"approved"}]);if(s)throw s;x.success("Review submitted successfully!"),i(0),c(""),t()}catch(a){console.error("Error submitting review:",a),x.error("Failed to submit review. Please try again.")}finally{u(!1)}}else x.error("Please write a review");else x.error("Please select a rating");else x.error("Please sign in to submit a review")},className:"bg-white p-6 rounded-lg shadow-md",children:[Fe.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Write a Review"}),Fe.jsxs("div",{className:"mb-4",children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating"}),Fe.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map((e=>Fe.jsx("button",{type:"button",onClick:()=>i(e),onMouseEnter:()=>o(e),onMouseLeave:()=>o(0),className:"text-yellow-400 transition-colors",children:Fe.jsx(P,{className:"h-8 w-8 "+((a||r)>=e?"fill-current":"")})},e)))})]}),Fe.jsxs("div",{className:"mb-4",children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Review"}),Fe.jsx("textarea",{value:l,onChange:e=>c(e.target.value),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Share your experience with this agency..."})]}),Fe.jsxs("button",{type:"submit",disabled:d,className:"flex items-center justify-center gap-2 w-full bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 disabled:bg-gray-400 transition-colors",children:[Fe.jsx(F,{className:"h-5 w-5"}),d?"Submitting...":"Submit Review"]})]})}const Qi=43200,Zi=Symbol.for("constructDateFrom");function ea(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&Zi in e?e[Zi](t):e instanceof Date?new e.constructor(t):new Date(t)}function ta(e,t){return ea(e,e)}let na={};function ra(e){const t=ta(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function sa(e,...t){const n=ea.bind(null,e||t.find((e=>"object"==typeof e)));return t.map(n)}function ia(e,t){const n=+ta(e)-+ta(t);return n<0?-1:n>0?1:n}function aa(e,t){const n=ta(e);return+function(e){const t=ta(e);return t.setHours(23,59,59,999),t}(n)==+function(e){const t=ta(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}(n)}function oa(e,t,n){const[r,s,i]=sa(null==n?void 0:n.in,e,e,t),a=ia(s,i),o=Math.abs(function(e,t,n){const[r,s]=sa(null==n?void 0:n.in,e,t);return 12*(r.getFullYear()-s.getFullYear())+(r.getMonth()-s.getMonth())}(s,i));if(o<1)return 0;1===s.getMonth()&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-a*o);let l=ia(s,i)===-a;aa(r)&&1===o&&1===ia(r,i)&&(l=!1);const c=a*(o-+l);return 0===c?0:c}function la(e,t,n){const r=function(e,t){return+ta(e)-+ta(t)}(e,t)/1e3;return(s=null==n?void 0:n.roundingMethod,e=>{const t=(s?Math[s]:Math.trunc)(e);return 0===t?0:t})(r);var s}const ca={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function da(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const ua={date:da({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:da({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:da({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ha={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function ma(e){return(t,n)=>{let r;if("formatting"===((null==n?void 0:n.context)?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,s=(null==n?void 0:n.width)?String(n.width):t;r=e.formattingValues[s]||e.formattingValues[t]}else{const t=e.defaultWidth,s=(null==n?void 0:n.width)?String(n.width):e.defaultWidth;r=e.values[s]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const fa={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:ma({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:ma({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:ma({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:ma({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:ma({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function pa(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const a=i[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,(e=>e.test(a))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,(e=>e.test(a)));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(a.length)}}}const ga={ordinalNumber:(xa={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const n=e.match(xa.matchPattern);if(!n)return null;const r=n[0],s=e.match(xa.parsePattern);if(!s)return null;let i=xa.valueCallback?xa.valueCallback(s[0]):s[0];return i=t.valueCallback?t.valueCallback(i):i,{value:i,rest:e.slice(r.length)}}),era:pa({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:pa({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:pa({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:pa({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:pa({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var xa;const ya={code:"en-US",formatDistance:(e,t,n)=>{let r;const s=ca[e];return r="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),(null==n?void 0:n.addSuffix)?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:ua,formatRelative:(e,t,n,r)=>ha[e],localize:fa,match:ga,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ba(e,t,n){const r=na,s=(null==n?void 0:n.locale)??r.locale??ya,i=ia(e,t);if(isNaN(i))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:null==n?void 0:n.addSuffix,comparison:i}),[o,l]=sa(null==n?void 0:n.in,...i>0?[t,e]:[e,t]),c=la(l,o),d=(ra(l)-ra(o))/1e3,u=Math.round((c-d)/60);let h;if(u<2)return(null==n?void 0:n.includeSeconds)?c<5?s.formatDistance("lessThanXSeconds",5,a):c<10?s.formatDistance("lessThanXSeconds",10,a):c<20?s.formatDistance("lessThanXSeconds",20,a):c<40?s.formatDistance("halfAMinute",0,a):c<60?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",1,a):0===u?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",u,a);if(u<45)return s.formatDistance("xMinutes",u,a);if(u<90)return s.formatDistance("aboutXHours",1,a);if(u<1440){const e=Math.round(u/60);return s.formatDistance("aboutXHours",e,a)}if(u<2520)return s.formatDistance("xDays",1,a);if(u<Qi){const e=Math.round(u/1440);return s.formatDistance("xDays",e,a)}if(u<86400)return h=Math.round(u/Qi),s.formatDistance("aboutXMonths",h,a);if(h=oa(l,o),h<12){const e=Math.round(u/Qi);return s.formatDistance("xMonths",e,a)}{const e=h%12,t=Math.trunc(h/12);return e<3?s.formatDistance("aboutXYears",t,a):e<9?s.formatDistance("overXYears",t,a):s.formatDistance("almostXYears",t+1,a)}}function va(e,t){return ba(e,function(e){return ea(e,Date.now())}(e),t)}function wa({reviews:e,onReviewDeleted:t}){const{user:n}=_i();return Fe.jsx("div",{className:"space-y-6",children:e.map((e=>{var r,s,i,a,o,l,c,d;return Fe.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 space-y-4",children:[Fe.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[Fe.jsxs("div",{className:"flex items-center gap-3",children:[Fe.jsx("div",{className:"bg-gray-100 rounded-full h-10 w-10 flex items-center justify-center flex-shrink-0",children:Fe.jsx("span",{className:"text-gray-600 font-medium",children:(null==(i=null==(s=null==(r=e.user)?void 0:r.full_name)?void 0:s[0])?void 0:i.toUpperCase())||(null==(o=null==(a=e.user)?void 0:a.email[0])?void 0:o.toUpperCase())||"?"})}),Fe.jsxs("div",{className:"min-w-0 overflow-hidden",children:[Fe.jsx("div",{className:"font-medium text-gray-900 truncate",children:(null==(l=e.user)?void 0:l.full_name)||(null==(c=e.user)?void 0:c.email)}),Fe.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:va(new Date(e.created_at),{addSuffix:!0})})]})]}),Fe.jsxs("div",{className:"flex items-center justify-between sm:justify-end w-full sm:w-auto gap-4",children:[Fe.jsx("div",{className:"flex text-yellow-500",children:Array.from({length:5}).map(((t,n)=>Fe.jsx(P,{className:"h-4 w-4 sm:h-5 sm:w-5 "+(n<e.rating?"fill-current":"")},n)))}),(null==n?void 0:n.email)===(null==(d=e.user)?void 0:d.email)&&Fe.jsx("button",{onClick:()=>(async e=>{try{const{error:n}=await gi.from("reviews").delete().eq("id",e);if(n)throw n;x.success("Review deleted successfully"),null==t||t()}catch(n){console.error("Error deleting review:",n),x.error("Failed to delete review")}})(e.id),className:"text-red-500 hover:text-red-600 transition-colors p-1.5 hover:bg-red-50 rounded-lg",title:"Delete review","aria-label":"Delete review",children:Fe.jsx(O,{className:"h-5 w-5"})})]})]}),Fe.jsx("p",{className:"text-gray-600 text-sm sm:text-base leading-relaxed",children:e.content}),e.response&&Fe.jsxs("div",{className:"mt-4 bg-indigo-50 rounded-xl p-3 sm:p-4 space-y-2",children:[Fe.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-indigo-600 text-sm",children:[Fe.jsx(z,{className:"h-4 w-4"}),Fe.jsx("span",{className:"font-medium",children:"Agency Response"}),Fe.jsxs("span",{className:"text-xs sm:text-sm text-indigo-400",children:[" ",va(new Date(e.response.created_at),{addSuffix:!0})]})]}),Fe.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:e.response.content})]})]},e.id)}))})}function ja({photos:e,initialPhotoIndex:t,onClose:n}){const[r,i]=s.useState(t),a=()=>{i((t=>0===t?e.length-1:t-1))},o=()=>{i((t=>t===e.length-1?0:t+1))};return Fe.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",onClick:n,onKeyDown:e=>{"Escape"===e.key&&n(),"ArrowLeft"===e.key&&a(),"ArrowRight"===e.key&&o()},tabIndex:0,children:Fe.jsxs("div",{className:"relative w-full h-full flex items-center justify-center p-4",children:[Fe.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-white hover:text-gray-300 z-10",children:Fe.jsx(y,{className:"h-8 w-8"})}),e.length>1&&Fe.jsxs(Fe.Fragment,{children:[Fe.jsx("button",{onClick:e=>{e.stopPropagation(),a()},className:"absolute left-4 text-white hover:text-gray-300",children:Fe.jsx(de,{className:"h-12 w-12"})}),Fe.jsx("button",{onClick:e=>{e.stopPropagation(),o()},className:"absolute right-4 text-white hover:text-gray-300",children:Fe.jsx(ue,{className:"h-12 w-12"})})]}),Fe.jsxs("div",{onClick:e=>e.stopPropagation(),className:"relative max-w-7xl w-full h-full flex flex-col items-center justify-center",children:[Fe.jsx("img",{src:e[r].url,alt:"Gallery photo",className:"max-h-[85vh] max-w-full object-contain",onError:e=>{e.target.src="https://images.unsplash.com/photo-1522071820081-009f0129c71c?auto=format&fit=crop&q=80"}}),(l=e[r].caption,!!l&&!l.match(/\.[^/.]+$/)&&Fe.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-75 text-white px-4 py-2 rounded-lg",children:e[r].caption})),Fe.jsxs("div",{className:"absolute bottom-4 right-4 bg-black bg-opacity-75 text-white px-3 py-1 rounded-full text-sm",children:[r+1," / ",e.length]})]})]})});var l}function Na(e="https://app.cal.com/embed/embed.js"){
/*!  Copying ends here. */
return function(e,t){let n=function(e,t){e.q.push(t)},r=e.document;e.Cal=e.Cal||function(){let s=e.Cal,i=arguments;if(s.loaded||(s.ns={},s.q=s.q||[],r.head.appendChild(r.createElement("script")).src=t,s.loaded=!0),"init"===i[0]){const e=function(){n(e,arguments)},t=i[1];return e.q=e.q||[],void("string"==typeof t?(s.ns[t]=s.ns[t]||e,n(s.ns[t],i),n(s,["initNamespace",t])):n(s,i))}n(s,i)}}(window,
//! Replace it with "https://cal.com/embed.js" or the URL where you have embed.js installed
e),window.Cal}const ka=function(e){const{calLink:t,calOrigin:n,namespace:r="",config:i,initConfig:a={},embedJsUrl:o,...l}=e;if(!t)throw new Error("calLink is required");const c=s.useRef(!1),d=function(e){const[t,n]=s.useState();return s.useEffect((()=>{n((()=>Na(e)))}),[]),t}(o),u=s.useRef(null);return s.useEffect((()=>{if(!d||c.current||!u.current)return;c.current=!0;const e=u.current;r?(d("init",r,{...a,origin:n}),d.ns[r]("inline",{elementOrSelector:e,calLink:t,config:i})):(d("init",{...a,origin:n}),d("inline",{elementOrSelector:e,calLink:t,config:i}))}),[d,t,i,r,n,a]),d?Fe.jsx("div",{ref:u,...l}):null};function _a(e){const t="string"==typeof e?{embedJsUrl:e}:e??{},{namespace:n="",embedJsUrl:r}=t;return new Promise((function e(t){const s=Na(r);s("init",n);const i=n?s.ns[n]:s;i?t(i):setTimeout((()=>{e(t)}),50)}))}function Sa({title:e,description:t,canonicalUrl:n,ogImage:r,ogUrl:s,ogType:i="website",twitterCard:a="summary_large_image",twitterSite:o="@admissionsapp",keywords:l=[],author:c="Admissions.app - Study Abroad Platform",schema:d,noindex:u=!1,children:h}){const m="https://admissions.app",f=e=>e?e.startsWith("http")?e:`${m}${e.startsWith("/")?"":"/"}${e}`:m,p=f(n),g=f(s||n),x=f(r||"/images/og-default.jpg");return Fe.jsxs(Mt,{children:[Fe.jsx("title",{children:e}),Fe.jsx("meta",{name:"description",content:t}),l.length>0&&Fe.jsx("meta",{name:"keywords",content:l.join(", ")}),c&&Fe.jsx("meta",{name:"author",content:c}),n&&Fe.jsx("link",{rel:"canonical",href:p}),u&&Fe.jsx("meta",{name:"robots",content:"noindex, nofollow"}),Fe.jsx("meta",{property:"og:title",content:e}),Fe.jsx("meta",{property:"og:description",content:t}),Fe.jsx("meta",{property:"og:type",content:i}),Fe.jsx("meta",{property:"og:url",content:g}),Fe.jsx("meta",{property:"og:image",content:x}),Fe.jsx("meta",{property:"og:site_name",content:"Admissions.app - Study Abroad Platform"}),Fe.jsx("meta",{name:"twitter:card",content:a}),Fe.jsx("meta",{name:"twitter:site",content:o}),Fe.jsx("meta",{name:"twitter:title",content:e}),Fe.jsx("meta",{name:"twitter:description",content:t}),Fe.jsx("meta",{name:"twitter:image",content:x}),Fe.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),Fe.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),Fe.jsx("meta",{name:"apple-mobile-web-app-title",content:e}),Fe.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=5"}),d&&Fe.jsx("script",{type:"application/ld+json",children:JSON.stringify(d)}),h]})}function Ca(){var e,t;const{slug:n}=m(),{agency:r,loading:i,error:a}=function(e){const[t,n]=s.useState(null),[r,i]=s.useState(!0),[a,o]=s.useState(null);return s.useEffect((()=>{let t=!0;return async function(){if(e)try{const r=await bi((async()=>await gi.from("agencies").select("\n                *,\n                agency_services (\n                  name,\n                  description\n                )\n              ").eq("slug",e).single()));if(r.error){if("PGRST116"===r.error.code)throw new Error("Agency not found");throw r.error}const s=await bi((async()=>await gi.from("agency_photos").select("*").eq("agency_id",r.data.id).order("is_cover",{ascending:!1}).order("created_at",{ascending:!0})));if(s.error)throw s.error;if(t&&r.data){const e=(Array.isArray(s.data)?s.data:[]).map((e=>({id:e.id,url:e.url,caption:e.caption,is_cover:e.is_cover})));n({id:r.data.id,name:r.data.name,slug:r.data.slug||"",location:r.data.location,description:r.data.description,rating:r.data.rating||0,trust_score:r.data.trust_score||0,price:r.data.price||0,specializations:r.data.specializations||[],is_verified:r.data.is_verified||!1,contact_phone:r.data.contact_phone||"",contact_email:r.data.contact_email||"",website:r.data.website||"",business_hours:r.data.business_hours||"",brochure_url:r.data.brochure_url||void 0,photos:e,services:r.data.agency_services||[]}),o(null)}}catch(r){if(console.error("Error fetching agency:",r),t&&(o(r instanceof Error?r:new Error("Failed to fetch agency")),r instanceof Error&&"Agency not found"!==r.message)){const e=ji(r);x.error(e)}}finally{t&&i(!1)}else i(!1)}(),()=>{t=!1}}),[e]),{agency:t,loading:r,error:a}}(n),{user:o}=_i(),[l,c]=s.useState(!1),[d,u]=s.useState(0),[h,f]=s.useState([]),[p,g]=s.useState(!0),[v,w]=s.useState(!1),[j,N]=s.useState(!1);s.useEffect((()=>{r&&T()}),[r]),s.useEffect((()=>{!async function(){(await _a())("ui",{styles:{branding:{brandColor:"#1e40af"}},hideEventTypeDetails:!1,layout:"month_view"})}()}),[]);const T=async()=>{if(r)try{const{data:e,error:t}=await gi.from("reviews").select("\n          id,\n          rating,\n          content,\n          created_at,\n          user:profiles(full_name, email),\n          response:review_responses(content, created_at)\n        ").eq("agency_id",r.id).eq("status","approved").order("created_at",{ascending:!1});if(t)throw t;const n=(e||[]).map((e=>{var t,n;return{id:e.id,rating:e.rating,content:e.content,created_at:e.created_at,user:(null==(t=e.user)?void 0:t[0])||null,response:(null==(n=e.response)?void 0:n[0])||null}}));f(n)}catch(e){console.error("Error loading reviews:",e),x.error("Failed to load reviews")}finally{g(!1)}},E=e=>{var t,n;const r=null==(t=e.photos)?void 0:t.find((e=>e.is_cover));return r?r.url:(null==(n=e.photos)?void 0:n[0])?e.photos[0].url:e.image_url||"https://via.placeholder.com/800x400?text=No+Image"};if(i)return Fe.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Fe.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(a||!r)return Fe.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Fe.jsxs("div",{className:"text-center",children:[Fe.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Agency Not Found"}),Fe.jsx("p",{className:"text-gray-600",children:"The agency you're looking for doesn't exist or has been removed."})]})});const A=E(r);return Fe.jsxs("div",{className:"min-h-screen bg-gray-50 py-6 sm:py-12",children:[Fe.jsx(Sa,{title:`${r.name} | College Admissions Consultant`,description:r.description.substring(0,160),canonicalUrl:`/agency/${r.slug}`,ogImage:A,ogType:"profile",keywords:["college consultant","admissions consultant","education services",r.location,...r.specializations||[]],schema:(e=>{const t=E(e);return{"@context":"https://schema.org","@type":"LocalBusiness","@id":`https://admissions.app/agency/${e.slug}`,name:e.name,image:t,description:e.description,url:`https://admissions.app/agency/${e.slug}`,telephone:e.contact_phone,email:e.contact_email,address:{"@type":"PostalAddress",addressLocality:e.location},geo:{"@type":"GeoCoordinates",latitude:e.latitude||void 0,longitude:e.longitude||void 0},priceRange:e.price?`${e.price}`:void 0,openingHours:e.business_hours||void 0,isVerified:e.is_verified||!1,aggregateRating:e.rating?{"@type":"AggregateRating",ratingValue:e.rating,reviewCount:h.length,bestRating:"5",worstRating:"1"}:void 0,review:h.map((e=>{var t;return{"@type":"Review",reviewRating:{"@type":"Rating",ratingValue:e.rating,bestRating:"5",worstRating:"1"},author:{"@type":"Person",name:(null==(t=e.user)?void 0:t.full_name)||"Anonymous"},reviewBody:e.content,datePublished:e.created_at}})),makesOffer:e.services?e.services.map((e=>({"@type":"Offer",itemOffered:{"@type":"Service",name:e.name,description:e.description||void 0}}))):void 0}})(r)}),Fe.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Fe.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[Fe.jsx("div",{className:"relative h-[40vh] md:h-[50vh] flex items-end",style:{backgroundImage:`url(${(null==(t=null==(e=r.photos)?void 0:e[0])?void 0:t.url)||"https://via.placeholder.com/800x400?text=No+Image"})`,backgroundSize:"cover",backgroundPosition:"center"},children:Fe.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"})}),Fe.jsxs("div",{className:"p-4 sm:p-8",children:[Fe.jsx("div",{className:"mb-8",children:Fe.jsxs("div",{className:"flex justify-between items-center",children:[Fe.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900",children:r.name}),Fe.jsxs("div",{className:"flex items-center gap-3",children:[Fe.jsxs("div",{className:"flex items-center gap-1 bg-yellow-50 text-gray-800 px-3 py-1.5 rounded-full shadow-sm",children:[Fe.jsx(P,{className:"h-4 w-4 text-yellow-500 fill-yellow-500"}),Fe.jsx("span",{className:"text-sm font-medium",children:r.rating.toFixed(1)})]}),r.is_verified&&Fe.jsxs("div",{className:"flex items-center gap-1 bg-green-100 text-green-800 px-3 py-1.5 rounded-full shadow-sm",children:[Fe.jsx(R,{className:"h-4 w-4"}),Fe.jsx("span",{className:"text-sm font-medium",children:"Verified"})]})]})]})}),Fe.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md mb-8 border border-gray-100 hover:shadow-lg transition-shadow duration-300",children:[Fe.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4 border-b border-gray-100 pb-2",children:"About Us"}),Fe.jsx("p",{className:"text-gray-700 leading-relaxed max-w-4xl mx-auto text-base",children:r.description})]}),Fe.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md mb-8 border border-gray-100 hover:shadow-lg transition-shadow duration-300",children:[Fe.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4 border-b border-gray-100 pb-2",children:"Our Services"}),Fe.jsx("div",{children:r.services&&r.services.length>0?Fe.jsx("ul",{className:"list-disc pl-6 grid grid-cols-1 sm:grid-cols-2 gap-6",children:r.services.map(((e,t)=>Fe.jsxs("li",{className:"text-gray-800",children:[Fe.jsx("span",{className:"font-semibold text-gray-900",children:e.name}),e.description&&Fe.jsx("p",{className:"text-gray-700 mt-2 text-base",children:e.description})]},t)))}):Fe.jsxs("ul",{className:"list-disc pl-6 grid grid-cols-1 sm:grid-cols-2 gap-6",children:[Fe.jsxs("li",{className:"text-gray-800",children:[Fe.jsx("span",{className:"font-semibold text-gray-900",children:"College Admission Counseling"}),Fe.jsx("p",{className:"text-gray-700 mt-2 text-base",children:"Expert guidance for college application process"})]}),Fe.jsxs("li",{className:"text-gray-800",children:[Fe.jsx("span",{className:"font-semibold text-gray-900",children:"Essay Review & Editing"}),Fe.jsx("p",{className:"text-gray-700 mt-2 text-base",children:"Professional review and editing of application essays"})]}),Fe.jsxs("li",{className:"text-gray-800",children:[Fe.jsx("span",{className:"font-semibold text-gray-900",children:"Entrance Exam Preparation"}),Fe.jsx("p",{className:"text-gray-700 mt-2 text-base",children:"Specialized coaching for entrance exams"})]}),Fe.jsxs("li",{className:"text-gray-800",children:[Fe.jsx("span",{className:"font-semibold text-gray-900",children:"Interview Preparation"}),Fe.jsx("p",{className:"text-gray-700 mt-2 text-base",children:"Mock interviews and preparation for college interviews"})]})]})})]}),Fe.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md mb-8 border border-gray-100 hover:shadow-lg transition-shadow duration-300",children:[Fe.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4 border-b border-gray-100 pb-2",children:"Contact Information"}),Fe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[Fe.jsxs("div",{className:"flex items-start gap-3",children:[Fe.jsx("div",{className:"bg-blue-50 p-2.5 rounded-lg",children:Fe.jsx(_,{className:"h-5 w-5 text-blue-600"})}),Fe.jsxs("div",{children:[Fe.jsx("p",{className:"font-semibold text-gray-800",children:"Phone"}),Fe.jsx("p",{className:"text-gray-700",children:r.contact_phone||"Not available"})]})]}),Fe.jsxs("div",{className:"flex items-start gap-3",children:[Fe.jsx("div",{className:"bg-blue-50 p-2.5 rounded-lg",children:Fe.jsx(b,{className:"h-5 w-5 text-blue-600"})}),Fe.jsxs("div",{children:[Fe.jsx("p",{className:"font-semibold text-gray-800",children:"Email"}),Fe.jsx("p",{className:"text-gray-700",children:r.contact_email||"Not available"})]})]}),Fe.jsxs("div",{className:"flex items-start gap-3",children:[Fe.jsx("div",{className:"bg-blue-50 p-2.5 rounded-lg",children:Fe.jsx(S,{className:"h-5 w-5 text-blue-600"})}),Fe.jsxs("div",{children:[Fe.jsx("p",{className:"font-semibold text-gray-800",children:"Website"}),Fe.jsx("p",{className:"text-gray-700",children:r.website?Fe.jsx("a",{href:r.website.startsWith("http")?r.website:`https://${r.website}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline font-medium",children:r.website}):"Not available"})]})]}),Fe.jsxs("div",{className:"flex items-start gap-3",children:[Fe.jsx("div",{className:"bg-blue-50 p-2.5 rounded-lg",children:Fe.jsx(C,{className:"h-5 w-5 text-blue-600"})}),Fe.jsxs("div",{children:[Fe.jsx("p",{className:"font-semibold text-gray-800",children:"Business Hours"}),Fe.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:r.business_hours||"Not available"})]})]}),Fe.jsxs("div",{className:"flex items-start gap-3",children:[Fe.jsx("div",{className:"bg-blue-50 p-2.5 rounded-lg",children:Fe.jsx(k,{className:"h-5 w-5 text-blue-600"})}),Fe.jsxs("div",{children:[Fe.jsx("p",{className:"font-semibold text-gray-800",children:"Location"}),Fe.jsx("p",{className:"text-gray-700",children:r.location||"Not available"})]})]}),r.brochure_url&&Fe.jsx("div",{className:"md:col-span-2 mt-4",children:Fe.jsxs("a",{href:r.brochure_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-800 to-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors shadow-sm hover:shadow-md font-medium",children:[Fe.jsx(he,{className:"h-4 w-4"}),"Download Brochure"]})})]})]}),Fe.jsx("div",{className:"block lg:hidden mb-8",children:Fe.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md border border-gray-100 hover:shadow-lg transition-shadow duration-300 space-y-8",children:[Fe.jsxs("div",{children:[Fe.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-900 border-b border-gray-100 pb-2",children:"Trust Score"}),Fe.jsxs("div",{className:"flex items-center gap-4",children:[Fe.jsx("div",{className:"bg-green-50 p-3 rounded-lg",children:Fe.jsx(R,{className:"h-7 w-7 text-green-600"})}),Fe.jsxs("span",{className:"text-3xl font-bold text-gray-900",children:[r.trust_score,"%"]})]})]}),Fe.jsxs("div",{children:[Fe.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-900 border-b border-gray-100 pb-2",children:"Starting Price"}),Fe.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:["",r.price.toLocaleString()]})]}),Fe.jsxs("div",{className:"space-y-4 pt-2",children:[Fe.jsx("button",{onClick:()=>N(!0),className:"w-full bg-gradient-to-r from-blue-800 to-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-all transform hover:scale-[1.02] shadow-sm hover:shadow-md font-medium",children:"Schedule Consultation"}),Fe.jsx("a",{href:r.brochure_url||"#",target:"_blank",rel:"noopener noreferrer",className:"block w-full text-center bg-white border-2 border-blue-600 text-blue-600 px-6 py-3 rounded-lg hover:bg-blue-50 transition-all transform hover:scale-[1.02] shadow-sm hover:shadow-md font-medium",onClick:e=>{r.brochure_url||(e.preventDefault(),x.error("Brochure is currently unavailable for this agency."))},children:"Download Brochure"})]})]})}),Fe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[Fe.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[r.photos&&r.photos.length>0&&Fe.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md border border-gray-100 hover:shadow-lg transition-shadow duration-300",children:[Fe.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6 border-b border-gray-100 pb-2",children:"Photo Gallery"}),Fe.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:r.photos.map(((e,t)=>Fe.jsxs("button",{className:"relative overflow-hidden rounded-lg cursor-pointer aspect-square group",onClick:()=>{u(t),c(!0)},children:[Fe.jsx("img",{src:e.url,alt:e.caption||`${r.name} photo`,className:"object-cover w-full h-full group-hover:scale-105 transition-transform duration-300"}),Fe.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-colors duration-300 flex items-center justify-center",children:Fe.jsx("span",{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300 font-medium",children:"View"})})]},e.id)))})]}),Fe.jsxs("div",{className:"bg-white p-6 sm:p-8 rounded-xl shadow-md border border-gray-100 hover:shadow-lg transition-shadow duration-300",children:[Fe.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 border-b border-gray-100 pb-2",children:[Fe.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3 sm:mb-0",children:"Reviews"}),Fe.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[Fe.jsx("div",{className:"flex text-yellow-500",children:Array.from({length:5}).map(((e,t)=>Fe.jsx(P,{className:"h-5 w-5 sm:h-6 sm:w-6 "+(t<Math.round(r.rating)?"fill-current":"")},t)))}),Fe.jsx("span",{className:"text-lg font-semibold",children:r.rating.toFixed(1)}),Fe.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-gray-500",children:[Fe.jsx("span",{children:""}),Fe.jsxs("span",{children:[h.length," reviews"]})]})]})]}),Fe.jsx("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center",children:Fe.jsxs("button",{onClick:()=>w(!0),className:"w-full sm:w-auto flex justify-center items-center gap-2 bg-gradient-to-r from-blue-800 to-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all duration-300 text-sm font-medium",children:[Fe.jsx(z,{className:"h-4 w-4"}),"Add Review"]})}),v&&Fe.jsx("div",{className:"mb-8",children:Fe.jsx(Xi,{agencyId:r.id,onReviewSubmitted:()=>{w(!1),T()}})}),p?Fe.jsx("div",{className:"flex justify-center py-8",children:Fe.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):h.length>0?Fe.jsx(wa,{reviews:h,onReviewDeleted:T}):Fe.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-xl",children:Fe.jsx("p",{className:"text-gray-500",children:"No reviews yet. Be the first to review!"})})]})]}),Fe.jsx("div",{className:"hidden lg:block lg:sticky lg:top-8 lg:self-start",children:Fe.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md border border-gray-100 hover:shadow-lg transition-shadow duration-300 space-y-8",children:[Fe.jsxs("div",{children:[Fe.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-900 border-b border-gray-100 pb-2",children:"Trust Score"}),Fe.jsxs("div",{className:"flex items-center gap-4",children:[Fe.jsx("div",{className:"bg-green-50 p-3 rounded-lg",children:Fe.jsx(R,{className:"h-7 w-7 text-green-600"})}),Fe.jsxs("span",{className:"text-3xl font-bold text-gray-900",children:[r.trust_score,"%"]})]})]}),Fe.jsxs("div",{children:[Fe.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-900 border-b border-gray-100 pb-2",children:"Starting Price"}),Fe.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:["",r.price.toLocaleString()]})]}),Fe.jsxs("div",{className:"space-y-4 pt-2",children:[Fe.jsx("button",{onClick:()=>N(!0),className:"w-full bg-gradient-to-r from-blue-800 to-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-all transform hover:scale-[1.02] shadow-sm hover:shadow-md font-medium",children:"Schedule Consultation"}),Fe.jsx("a",{href:r.brochure_url||"#",target:"_blank",rel:"noopener noreferrer",className:"block w-full text-center bg-white border-2 border-blue-600 text-blue-600 px-6 py-3 rounded-lg hover:bg-blue-50 transition-all transform hover:scale-[1.02] shadow-sm hover:shadow-md font-medium",onClick:e=>{r.brochure_url||(e.preventDefault(),x.error("Brochure is currently unavailable for this agency."))},children:"Download Brochure"})]})]})})]})]})]})}),j&&Fe.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 overflow-hidden",children:Fe.jsx("div",{className:"h-full w-full flex flex-col",children:Fe.jsxs("div",{className:"bg-white w-full flex-1 flex flex-col",children:[Fe.jsxs("div",{className:"flex-shrink-0 border-b border-gray-100 flex items-center justify-between p-4",children:[Fe.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Schedule a Consultation"}),Fe.jsx("button",{onClick:()=>N(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Close booking modal",children:Fe.jsx(y,{className:"h-6 w-6 text-gray-500"})})]}),Fe.jsx("div",{className:"flex-1 overflow-y-auto -webkit-overflow-scrolling-touch",children:Fe.jsx(ka,{calLink:"forge/consultation",style:{width:"100%",height:"100vh",overflow:"auto"},config:{layout:"month_view",hideEventTypeDetails:"false"}})})]})})}),l&&r.photos&&Fe.jsx(ja,{photos:r.photos,initialPhotoIndex:d,onClose:()=>c(!1)})]})}function Ta({icon:e,title:t,description:n}){return Fe.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[Fe.jsx("div",{className:"flex justify-center mb-4",children:e}),Fe.jsx("h3",{className:"text-xl font-semibold mb-2",children:t}),Fe.jsx("p",{className:"text-gray-600",children:n})]})}function Ea({name:e,role:t,description:n,imageUrl:r}){return Fe.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[Fe.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-200 rounded-full"}),Fe.jsx("h3",{className:"text-xl font-semibold",children:e}),Fe.jsx("p",{className:"text-primary mb-2",children:t}),Fe.jsx("p",{className:"text-gray-600",children:n})]})}function Aa({value:e,label:t}){return Fe.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[Fe.jsx("div",{className:"text-primary text-4xl font-bold mb-2",children:e}),Fe.jsx("div",{className:"text-gray-600",children:t})]})}function Oa(){return Fe.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[Fe.jsx(Sa,{title:"About Us | Admissions.app",description:"Learn about Admissions.app and our mission to connect students with the best education consultants worldwide.",canonicalUrl:"/about"}),Fe.jsx("h1",{className:"text-4xl font-bold mb-6",children:"About Admissions.app"}),Fe.jsx("p",{className:"text-gray-600 mb-12",children:"Admissions.app is a comprehensive platform designed to simplify the overseas education journey for students worldwide. Our mission is to connect ambitious students with top-rated education consultants and provide the tools and resources needed for a successful international education experience."}),Fe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 mb-16",children:[Fe.jsxs("div",{children:[Fe.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Our Mission"}),Fe.jsx("p",{className:"text-gray-600 mb-6",children:"At Admissions.app, we believe that quality education should be accessible to everyone, regardless of geographical boundaries. Our platform is built to demystify the overseas education process and empower students to make informed decisions about their academic future."}),Fe.jsx("p",{className:"text-gray-600 mb-6",children:"We strive to create a transparent ecosystem where students can find reliable information, connect with verified consultants, and access resources that make their study abroad journey smoother and more successful."}),Fe.jsx("button",{className:"bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary/90 transition-colors",children:"Find a Consultant"})]}),Fe.jsx("div",{className:"bg-gray-100 rounded-lg min-h-[400px] flex items-center justify-center",children:Fe.jsxs("div",{className:"text-gray-400",children:[Fe.jsx("span",{className:"sr-only",children:"Mission Image Placeholder"}),Fe.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Fe.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})]})})]}),Fe.jsxs("section",{className:"mb-16 bg-blue-50 rounded-lg p-8",children:[Fe.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Our Story"}),Fe.jsx("p",{className:"text-gray-600 mb-4",children:"Admissions.app was founded in 2023 by a team of education enthusiasts who experienced firsthand the challenges of navigating the overseas education process. After facing numerous hurdles with unreliable information, questionable consultants, and a lack of structured guidance, they decided to create a solution that addresses these pain points."}),Fe.jsx("p",{className:"text-gray-600 mb-4",children:"Starting from Hyderabad, India, we've grown to connect students with over 250+ verified international education advisors specializing in USA university admissions, UK university applications, Canada study visas, and Australian education pathways."}),Fe.jsx("p",{className:"text-gray-600",children:"Today, Admissions.app serves thousands of students across India, helping them achieve their dreams of studying at prestigious institutions worldwide. Our platform continues to evolve with new features and resources based on student feedback and changing industry needs."})]}),Fe.jsxs("section",{className:"mb-16",children:[Fe.jsx("h2",{className:"text-3xl font-bold mb-8",children:"Our Values"}),Fe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Fe.jsx(Ta,{icon:Fe.jsx(j,{className:"w-8 h-8 text-primary"}),title:"Transparency",description:"We believe in complete transparency in the education consulting industry. Our Trust Score system ensures students can make informed decisions."}),Fe.jsx(Ta,{icon:Fe.jsx(P,{className:"w-8 h-8 text-yellow-400"}),title:"Quality",description:"We maintain high standards for consultants on our platform, verifying credentials and monitoring performance to ensure quality service."}),Fe.jsx(Ta,{icon:Fe.jsx(me,{className:"w-8 h-8 text-green-500"}),title:"Accessibility",description:"We're committed to making international education accessible to all students, regardless of their background or location."}),Fe.jsx(Ta,{icon:Fe.jsx(fe,{className:"w-8 h-8 text-yellow-400"}),title:"Innovation",description:"We continuously innovate to provide cutting-edge tools and resources that simplify the study abroad journey."}),Fe.jsx(Ta,{icon:Fe.jsx(pe,{className:"w-8 h-8 text-purple-500"}),title:"Community",description:"We foster a supportive community where students can connect, share experiences, and help each other navigate their education journey."}),Fe.jsx(Ta,{icon:Fe.jsx(ge,{className:"w-8 h-8 text-orange-400"}),title:"Integrity",description:"We operate with the highest level of integrity, ensuring that student interests always come first."})]})]}),Fe.jsxs("section",{className:"mb-16",children:[Fe.jsx("h2",{className:"text-3xl font-bold mb-8",children:"Our Team"}),Fe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[Fe.jsx(Ea,{name:"Rahul Sharma",role:"Founder & CEO",description:"Former international student with 10+ years in education consulting."}),Fe.jsx(Ea,{name:"Priya Patel",role:"Chief Operations Officer",description:"Education management expert with experience at top universities."}),Fe.jsx(Ea,{name:"Aditya Singh",role:"Head of Consultant Relations",description:"Built networks of education consultants across 15+ countries."}),Fe.jsx(Ea,{name:"Neha Gupta",role:"Chief Technology Officer",description:"Tech leader passionate about improving education through innovation."})]})]}),Fe.jsxs("section",{className:"bg-primary text-white rounded-lg p-8 mb-16 text-center",children:[Fe.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Join the Admissions.app Community"}),Fe.jsx("p",{className:"mb-6",children:"Whether you're a student dreaming of studying abroad or an education consultant looking to expand your reach, Admissions.app has something for you. Join our growing community today!"}),Fe.jsxs("div",{className:"flex justify-center gap-4",children:[Fe.jsx("button",{className:"bg-white text-primary px-6 py-2 rounded-lg hover:bg-gray-100 transition-colors",children:"Sign Up as a Student"}),Fe.jsx("button",{className:"border border-white text-white px-6 py-2 rounded-lg hover:bg-white/10 transition-colors",children:"Join as a Consultant"})]})]}),Fe.jsxs("section",{children:[Fe.jsx("h2",{className:"text-3xl font-bold mb-8",children:"Our Impact"}),Fe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[Fe.jsx(Aa,{value:"10,000+",label:"Students Helped"}),Fe.jsx(Aa,{value:"250+",label:"Verified Consultants"}),Fe.jsx(Aa,{value:"50+",label:"Countries Covered"}),Fe.jsx(Aa,{value:"95%",label:"Student Satisfaction"})]})]})]})}function Pa(){var e,t;const[n,r]=s.useState([]),[i,a]=s.useState([]),[o,l]=s.useState(null),[c,d]=s.useState(!0);s.useEffect((()=>{Promise.all([h(),u()])}),[]);const u=async()=>{try{const e=await Hi();a(e),e.length>0&&!o&&l(e[0].id)}catch(e){console.error("Error loading tabs:",e)}},h=async()=>{try{d(!0);const{data:e,error:t}=await gi.from("blog_posts").select("*, blog_tabs(name)").order("date",{ascending:!1});if(t)throw t;r(e||[])}catch(e){console.error("Failed to load blog posts:",e),x.error("Failed to load blog posts")}finally{d(!1)}},m=o?n.filter((e=>e.tab_id===o)):n,f=m.length>0?m:[{id:"1",title:"How to Choose the Right College for Your Future",excerpt:"Deciding which college to attend is one of the most significant decisions you'll make. Here's how to navigate the selection process effectively.",content:"Full article content would go here...",author:"Dr. Sarah Johnson",date:"2025-02-28",image_url:"https://images.unsplash.com/photo-1523050854058-8df90110c9f1?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",category:"College Selection",created_at:"2025-02-28",tab_id:null,blog_tabs:null},{id:"2",title:"Financial Aid Opportunities You Might Be Missing",excerpt:"Beyond the standard scholarships and loans, there are many lesser-known financial aid options that could significantly reduce your college costs.",content:"Full article content would go here...",author:"Michael Rodriguez",date:"2025-02-15",image_url:"https://images.unsplash.com/photo-1554224155-6726b3ff858f?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",category:"Financial Aid",created_at:"2025-02-15",tab_id:null,blog_tabs:null},{id:"3",title:"The Growing Importance of Extracurricular Activities in College Applications",excerpt:"Learn why colleges are increasingly looking beyond academic achievements to evaluate prospective students.",content:"Full article content would go here...",author:"Jennifer Lee",date:"2025-02-05",image_url:"https://images.unsplash.com/photo-1511632765486-a01980e01a18?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",category:"Admissions",created_at:"2025-02-05",tab_id:null,blog_tabs:null},{id:"4",title:"Making the Most of Your College Campus Visit",excerpt:"A campus visit can make or break your college decision. Here's how to ensure you get the most valuable insights during your tour.",content:"Full article content would go here...",author:"David Wilson",date:"2025-01-22",image_url:"https://images.unsplash.com/photo-1498243691581-b145c3f54a5a?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",category:"Campus Life",created_at:"2025-01-22",tab_id:null,blog_tabs:null},{id:"5",title:"The Digital Revolution in College Learning: What to Expect",excerpt:"How technology is reshaping the college education experience and preparing students for the future workforce.",content:"Full article content would go here...",author:"Dr. Robert Chang",date:"2025-01-10",image_url:"https://images.unsplash.com/photo-1501504905252-473c47e087f8?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",category:"Education Trends",created_at:"2025-01-10",tab_id:null,blog_tabs:null}],p={"@context":"https://schema.org","@type":"Blog",headline:"Admissions Blog",description:"Expert insights, tips, and advice to help you navigate the college admissions process",url:"https://admissions.app/blog",blogPost:f.map((e=>({"@type":"BlogPosting",headline:e.title,description:e.excerpt,datePublished:e.date,author:{"@type":"Person",name:e.author},image:e.image_url||"https://images.unsplash.com/photo-1523050854058-8df90110c9f1?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"})))};return Fe.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[Fe.jsx(Sa,{title:"Blog | College Admissions Insights & Tips | Admissions.app",description:"Expert insights, tips, and advice to help you navigate the college admissions process. Read our latest articles on college applications, essays, and more.",canonicalUrl:"/blog",ogType:"website",ogImage:null==(e=f[0])?void 0:e.image_url,keywords:["college admissions blog","college application tips","admissions advice","college essay tips"],schema:p}),Fe.jsxs("div",{className:"relative overflow-hidden",children:[Fe.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary to-primary/90"}),Fe.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24",children:Fe.jsxs("div",{className:"text-center",children:[Fe.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Admissions Blog"}),Fe.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"Expert insights, tips, and advice to help you navigate the college admissions process"})]})})]}),Fe.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[Fe.jsx("div",{className:"mb-12",children:Fe.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[Fe.jsx("button",{className:"px-5 py-2.5 rounded-full font-medium transition-colors "+(null===o?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>l(null),children:"All Posts"}),i.map((e=>Fe.jsx("button",{className:"px-5 py-2.5 rounded-full font-medium transition-colors "+(o===e.id?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>l(e.id),children:e.name},e.id)))]})}),c?Fe.jsx("div",{className:"flex justify-center py-20",children:Fe.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):Fe.jsxs(Fe.Fragment,{children:[f.length>0&&Fe.jsx("div",{className:"mb-16",children:Fe.jsx("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden transition-all hover:shadow-2xl hover:-translate-y-1",children:Fe.jsxs("div",{className:"md:flex",children:[Fe.jsx("div",{className:"md:flex-shrink-0 md:w-1/2",children:Fe.jsx("img",{className:"h-64 w-full object-cover md:h-full",src:f[0].image_url||"https://images.unsplash.com/photo-1523050854058-8df90110c9f1?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",alt:f[0].title})}),Fe.jsxs("div",{className:"p-8 md:w-1/2",children:[Fe.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-primary/10 text-primary",children:(null==(t=f[0].blog_tabs)?void 0:t.name)||f[0].category}),Fe.jsx("a",{href:`/blog/post/${f[0].id}`,className:"block mt-4 text-2xl leading-tight font-bold text-gray-900 hover:text-primary transition-colors",children:f[0].title}),Fe.jsx("p",{className:"mt-4 text-gray-600 leading-relaxed",children:f[0].excerpt}),Fe.jsxs("div",{className:"mt-6 flex items-center space-x-4",children:[Fe.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[Fe.jsx(V,{className:"h-4 w-4 mr-1"}),f[0].author]}),Fe.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[Fe.jsx(xe,{className:"h-4 w-4 mr-1"}),new Date(f[0].date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),Fe.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[Fe.jsx(C,{className:"h-4 w-4 mr-1"}),"8 min read"]})]}),Fe.jsx("div",{className:"mt-6",children:Fe.jsx("a",{href:`/blog/post/${f[0].id}`,className:"inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary/50 transition-colors",children:"Read Article"})})]})]})})}),f.length>1?Fe.jsx("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-3",children:f.slice(1).map((e=>{var t;return Fe.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden transition-all hover:shadow-xl hover:-translate-y-1",children:[Fe.jsxs("div",{className:"relative h-48",children:[Fe.jsx("img",{className:"h-full w-full object-cover",src:e.image_url||"https://images.unsplash.com/photo-1501504905252-473c47e087f8?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",alt:e.title}),Fe.jsx("div",{className:"absolute top-4 left-4",children:Fe.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-primary/10 text-primary",children:(null==(t=e.blog_tabs)?void 0:t.name)||e.category})})]}),Fe.jsxs("div",{className:"p-6",children:[Fe.jsx("a",{href:`/blog/post/${e.id}`,className:"block text-xl font-semibold text-gray-900 hover:text-primary transition-colors",children:e.title}),Fe.jsx("p",{className:"mt-3 text-gray-600 leading-relaxed line-clamp-3",children:e.excerpt}),Fe.jsxs("div",{className:"mt-6 flex items-center space-x-4",children:[Fe.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[Fe.jsx(V,{className:"h-4 w-4 mr-1"}),e.author]}),Fe.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[Fe.jsx(xe,{className:"h-4 w-4 mr-1"}),new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]})]})]},e.id)}))}):0===f.length&&Fe.jsxs("div",{className:"text-center py-16",children:[Fe.jsx("h3",{className:"text-xl font-medium text-gray-500",children:"No blog posts found in this category"}),Fe.jsx("button",{className:"mt-4 px-5 py-2 bg-primary text-white rounded-md",onClick:()=>l(null),children:"View All Posts"})]})]})]})]})}function Ia(){const[e,t]=s.useState(!1),[n,r]=s.useState(!1),[i,a]=s.useState({fullName:"",email:"",inquiryType:"",subject:"",message:""});s.useEffect((()=>{e&&async function(){try{(await _a({namespace:"30min"}))("ui",{hideEventTypeDetails:!1,layout:"month_view",styles:{branding:{brandColor:"#1e40af"}}}),r(!0)}catch(e){console.error("Error loading Cal.com:",e)}}()}),[e]);return Fe.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:[Fe.jsx(Sa,{title:"Contact Us | Admissions.app",description:"Get in touch with our team for any questions about overseas education",canonicalUrl:"/contact"}),Fe.jsxs("div",{className:"mb-8 sm:mb-12",children:[Fe.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-3 sm:mb-4",children:"Contact Us"}),Fe.jsx("p",{className:"text-gray-600 max-w-3xl text-sm sm:text-base",children:"Have questions about studying abroad or need assistance with our platform? We're here to help! Reach out to our team using the contact form below or through our contact information."})]}),Fe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 sm:gap-8 lg:gap-12",children:[Fe.jsxs("div",{className:"md:col-span-3 bg-white rounded-xl shadow-sm border border-gray-100",children:[Fe.jsxs("div",{className:"flex flex-col space-y-1.5 p-4 sm:p-6",children:[Fe.jsx("div",{className:"text-xl sm:text-2xl font-semibold leading-none tracking-tight",children:"Send Us a Message"}),Fe.jsx("div",{className:"text-sm text-muted-foreground",children:"Fill out the form below and we'll get back to you as soon as possible."})]}),Fe.jsx("div",{className:"p-4 sm:p-6 pt-0",children:Fe.jsxs("form",{onSubmit:e=>{e.preventDefault(),console.log(i)},className:"space-y-4 sm:space-y-6",children:[Fe.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[Fe.jsxs("div",{className:"space-y-2",children:[Fe.jsx("label",{htmlFor:"fullName",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Full Name"}),Fe.jsx("input",{id:"fullName",type:"text",placeholder:"Enter your full name",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",value:i.fullName,onChange:e=>a({...i,fullName:e.target.value}),required:!0})]}),Fe.jsxs("div",{className:"space-y-2",children:[Fe.jsx("label",{htmlFor:"email",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Email"}),Fe.jsx("input",{id:"email",type:"email",placeholder:"Enter your email",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",value:i.email,onChange:e=>a({...i,email:e.target.value}),required:!0})]})]}),Fe.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[Fe.jsxs("div",{className:"space-y-2",children:[Fe.jsx("label",{htmlFor:"inquiryType",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Inquiry Type"}),Fe.jsxs("select",{id:"inquiryType",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:i.inquiryType,onChange:e=>a({...i,inquiryType:e.target.value}),required:!0,children:[Fe.jsx("option",{value:"",children:"Select inquiry type"}),Fe.jsx("option",{value:"general",children:"General Inquiry"}),Fe.jsx("option",{value:"consultant",children:"Consultant Related"}),Fe.jsx("option",{value:"course",children:"Course Information"}),Fe.jsx("option",{value:"scholarship",children:"Scholarship Information"}),Fe.jsx("option",{value:"technical",children:"Technical Support"}),Fe.jsx("option",{value:"feedback",children:"Feedback"})]})]}),Fe.jsxs("div",{className:"space-y-2",children:[Fe.jsx("label",{htmlFor:"subject",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Subject"}),Fe.jsx("input",{id:"subject",type:"text",placeholder:"Enter subject",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",value:i.subject,onChange:e=>a({...i,subject:e.target.value}),required:!0})]})]}),Fe.jsxs("div",{className:"space-y-2",children:[Fe.jsx("label",{htmlFor:"message",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Message"}),Fe.jsx("textarea",{id:"message",placeholder:"Enter your message",rows:6,className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",value:i.message,onChange:e=>a({...i,message:e.target.value}),required:!0})]}),Fe.jsx("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary text-white hover:bg-primary/90 h-10 px-4 py-2 w-full",children:"Send Message"})]})}),Fe.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-white rounded-2xl shadow-lg p-8 mb-16 relative overflow-hidden",children:[Fe.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-100 rounded-full opacity-20 -translate-y-16 translate-x-16"}),Fe.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-blue-200 rounded-full opacity-20 -translate-x-12 translate-y-12"}),Fe.jsxs("div",{className:"relative text-center",children:[Fe.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-blue-600 to-blue-400 mx-auto mb-6 rounded-full"}),Fe.jsx("p",{className:"text-xl text-gray-700 leading-relaxed mb-8",children:"Whether you're a student seeking a visa consultant or an advisor looking to join our platform, we're here to help."}),Fe.jsxs("button",{onClick:()=>t(!0),className:"bg-primary text-white px-8 py-3 rounded-lg hover:bg-primary/90 transition-all duration-300 shadow-md hover:shadow-lg flex items-center gap-2 mx-auto",children:[Fe.jsx(z,{className:"h-5 w-5"}),Fe.jsx("span",{children:"Book a Call"})]})]})]})]}),Fe.jsxs("div",{className:"md:col-span-2 space-y-6 sm:space-y-8",children:[Fe.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[Fe.jsxs("div",{className:"flex flex-col space-y-1.5 p-4 sm:p-6",children:[Fe.jsx("div",{className:"text-xl sm:text-2xl font-semibold leading-none tracking-tight",children:"Contact Information"}),Fe.jsx("div",{className:"text-sm text-muted-foreground",children:"Reach out to us directly using the information below."})]}),Fe.jsxs("div",{className:"p-4 sm:p-6 pt-0 space-y-4 sm:space-y-6",children:[Fe.jsxs("div",{className:"flex items-start gap-3",children:[Fe.jsx(k,{className:"h-5 w-5 text-blue-600 mt-1"}),Fe.jsxs("div",{children:[Fe.jsx("h3",{className:"font-medium",children:"Office Address"}),Fe.jsx("a",{href:"https://g.co/kgs/iCzLMJT",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 text-sm hover:text-blue-600 transition-colors group",children:Fe.jsxs("p",{className:"group-hover:text-blue-600",children:["Admissions.app, Code For India",Fe.jsx("br",{}),"3rd Floor, Serene Heights,",Fe.jsx("br",{}),"Humayunnagar, Masab Tank,",Fe.jsx("br",{}),"Hyderabad 500028"]})})]})]}),Fe.jsxs("div",{className:"flex items-start gap-3",children:[Fe.jsx(_,{className:"h-5 w-5 text-blue-600 mt-1"}),Fe.jsxs("div",{children:[Fe.jsx("h3",{className:"font-medium",children:"Phone"}),Fe.jsx("a",{href:"tel:+916304666504",className:"text-gray-600 text-sm hover:text-blue-600 transition-colors group inline-flex items-center gap-1",children:Fe.jsx("span",{className:"group-hover:text-blue-600",children:"+91 6304 666 504"})})]})]}),Fe.jsxs("div",{className:"flex items-start gap-3",children:[Fe.jsx(b,{className:"h-5 w-5 text-blue-600 mt-1"}),Fe.jsxs("div",{children:[Fe.jsx("h3",{className:"font-medium",children:"Email"}),Fe.jsx("a",{href:"mailto:connect@admissions.app?subject=Inquiry about Admissions.app",className:"text-gray-600 text-sm hover:text-blue-600 transition-colors group inline-flex items-center gap-1",children:Fe.jsx("span",{className:"group-hover:text-blue-600",children:"connect@admissions.app"})})]})]}),Fe.jsxs("div",{className:"flex items-start gap-3",children:[Fe.jsx(C,{className:"h-5 w-5 text-blue-600 mt-1"}),Fe.jsxs("div",{children:[Fe.jsx("h3",{className:"font-medium",children:"Business Hours"}),Fe.jsx("p",{className:"text-gray-600 text-sm",children:"Monday - Friday: 9:00 AM - 6:00 PM"}),Fe.jsx("p",{className:"text-gray-600 text-sm",children:"Saturday: 10:00 AM - 2:00 PM"}),Fe.jsx("p",{className:"text-gray-600 text-sm",children:"Sunday: Closed"})]})]}),Fe.jsxs("div",{className:"flex items-start gap-3",children:[Fe.jsx(S,{className:"h-5 w-5 text-blue-600 mt-1"}),Fe.jsxs("div",{children:[Fe.jsx("h3",{className:"font-medium",children:"Social Media"}),Fe.jsxs("div",{className:"flex gap-4 mt-2",children:[Fe.jsx("a",{href:"#",className:"text-gray-600 hover:text-blue-600",children:Fe.jsx(ye,{className:"w-5 h-5"})}),Fe.jsx("a",{href:"#",className:"text-gray-600 hover:text-blue-600",children:Fe.jsx(be,{className:"w-5 h-5"})}),Fe.jsx("a",{href:"#",className:"text-gray-600 hover:text-blue-600",children:Fe.jsx(ve,{className:"w-5 h-5"})}),Fe.jsx("a",{href:"#",className:"text-gray-600 hover:text-blue-600",children:Fe.jsx(we,{className:"w-5 h-5"})})]})]})]})]})]}),Fe.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[Fe.jsx("div",{className:"flex flex-col space-y-1.5 p-4 sm:p-6",children:Fe.jsx("div",{className:"text-xl sm:text-2xl font-semibold leading-none tracking-tight",children:"Frequently Asked Questions"})}),Fe.jsxs("div",{className:"p-4 sm:p-6 pt-0 space-y-4 sm:space-y-6",children:[Fe.jsxs("div",{children:[Fe.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"How do I verify a consultant?"}),Fe.jsx("p",{className:"text-gray-600",children:'All consultants on our platform are verified by our team. Look for the "Verified" badge on their profile.'})]}),Fe.jsxs("div",{children:[Fe.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"How can I track my application?"}),Fe.jsx("p",{className:"text-gray-600",children:"You can track your applications through our Application Tracker feature after logging in."})]}),Fe.jsxs("div",{children:[Fe.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Is the service free for students?"}),Fe.jsx("p",{className:"text-gray-600",children:"Yes, basic services are free for students. Premium features may require a subscription."})]})]})]})]})]}),Fe.jsxs("div",{className:"mt-8 sm:mt-12",children:[Fe.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 sm:mb-6 text-gray-900",children:"Find Us"}),Fe.jsx("div",{className:"bg-white rounded-xl overflow-hidden h-[300px] sm:h-[400px] shadow-sm border border-gray-100",children:Fe.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3807.3575773447823!2d78.44903799999999!3d17.396272!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3bcb97b14f08a901%3A0x9e3b3704c21efe4b!2sSerene%20Heights%2C%20Humayun%20Nagar%2C%20Masab%20Tank%2C%20Hyderabad%2C%20Telangana%20500028!5e0!3m2!1sen!2sin!4v1709655547039!5m2!1sen!2sin",width:"100%",height:"100%",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Admissions.app Office at Serene Heights",className:"w-full h-full"})}),Fe.jsxs("div",{className:"mt-2 text-xs sm:text-sm text-gray-500 flex items-center gap-2",children:[Fe.jsx(k,{className:"w-3 h-3 sm:w-4 sm:h-4"}),Fe.jsx("span",{children:"Serene Heights, Humayun Nagar, Masab Tank, Hyderabad, Telangana 500028"})]})]}),e&&Fe.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:Fe.jsxs("div",{className:"bg-white w-full max-w-4xl h-[80vh] sm:h-[90vh] rounded-xl overflow-hidden flex flex-col shadow-xl",children:[Fe.jsxs("div",{className:"flex-shrink-0 border-b border-gray-100 flex items-center justify-between p-4 sm:p-6",children:[Fe.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Schedule a Meeting"}),Fe.jsx("button",{onClick:()=>{t(!1),r(!1)},className:"p-2 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Close booking modal",children:Fe.jsx(y,{className:"h-5 w-5 sm:h-6 sm:w-6 text-gray-500"})})]}),Fe.jsx("div",{className:"flex-1 overflow-hidden",children:n&&Fe.jsx(ka,{namespace:"30min",calLink:"forge/30min",style:{width:"100%",height:"100%",overflow:"auto"},config:{layout:"week_view"}})})]})})]})}function Ra(){return Fe.jsx("footer",{className:"bg-gray-800 text-white py-8 mt-auto",children:Fe.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Fe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[Fe.jsxs("div",{children:[Fe.jsx("h3",{className:"text-lg font-semibold mb-4",children:"About Us"}),Fe.jsx("p",{className:"text-gray-400",children:"Connecting students with the best college consultants to help achieve their academic goals."})]}),Fe.jsxs("div",{children:[Fe.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),Fe.jsxs("div",{className:"space-y-2",children:[Fe.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[Fe.jsx(b,{className:"h-5 w-5"}),Fe.jsx("span",{children:"connect@admissions.app"})]}),Fe.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[Fe.jsx(_,{className:"h-5 w-5"}),Fe.jsx("span",{children:"+91 6304 666 504"})]})]})]}),Fe.jsxs("div",{children:[Fe.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Follow Us"}),Fe.jsxs("div",{className:"flex gap-4",children:[Fe.jsx("a",{href:"https://www.admissions.app",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors",children:Fe.jsx(S,{className:"h-6 w-6"})}),Fe.jsx("a",{href:"mailto:connect@admissions.app",className:"text-gray-400 hover:text-white transition-colors",children:Fe.jsx(b,{className:"h-6 w-6"})})]})]})]}),Fe.jsx("div",{className:"border-t border-gray-700 mt-8 pt-8 text-center text-gray-400",children:Fe.jsx("p",{children:" 2025 Admissions.app. All rights reserved."})})]})})}const Da=s.createContext(void 0);function La({children:e}){const[t,n]=s.useState(!1);return Fe.jsx(Da.Provider,{value:{isOpen:t,setIsOpen:n},children:e})}function Ma(){const e=s.useContext(Da);if(void 0===e)throw new Error("useChatbot must be used within a ChatbotProvider");return e}var Fa,$a,Ua,za,Ba,qa;($a=Fa||(Fa={})).STRING="string",$a.NUMBER="number",$a.INTEGER="integer",$a.BOOLEAN="boolean",$a.ARRAY="array",$a.OBJECT="object",(za=Ua||(Ua={})).LANGUAGE_UNSPECIFIED="language_unspecified",za.PYTHON="python",(qa=Ba||(Ba={})).OUTCOME_UNSPECIFIED="outcome_unspecified",qa.OUTCOME_OK="outcome_ok",qa.OUTCOME_FAILED="outcome_failed",qa.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded";
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ha=["user","model","function","system"];var Va,Wa,Ga,Ja,Ka,Ya,Xa,Qa,Za,eo,to,no,ro,so,io,ao;(Wa=Va||(Va={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",Wa.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",Wa.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",Wa.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",Wa.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",Wa.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",(Ja=Ga||(Ga={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",Ja.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",Ja.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",Ja.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",Ja.BLOCK_NONE="BLOCK_NONE",(Ya=Ka||(Ka={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",Ya.NEGLIGIBLE="NEGLIGIBLE",Ya.LOW="LOW",Ya.MEDIUM="MEDIUM",Ya.HIGH="HIGH",(Qa=Xa||(Xa={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",Qa.SAFETY="SAFETY",Qa.OTHER="OTHER",(eo=Za||(Za={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",eo.STOP="STOP",eo.MAX_TOKENS="MAX_TOKENS",eo.SAFETY="SAFETY",eo.RECITATION="RECITATION",eo.LANGUAGE="LANGUAGE",eo.BLOCKLIST="BLOCKLIST",eo.PROHIBITED_CONTENT="PROHIBITED_CONTENT",eo.SPII="SPII",eo.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",eo.OTHER="OTHER",(no=to||(to={})).TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",no.RETRIEVAL_QUERY="RETRIEVAL_QUERY",no.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",no.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",no.CLASSIFICATION="CLASSIFICATION",no.CLUSTERING="CLUSTERING",(so=ro||(ro={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",so.AUTO="AUTO",so.ANY="ANY",so.NONE="NONE",(ao=io||(io={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",ao.MODE_DYNAMIC="MODE_DYNAMIC";
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class oo extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class lo extends oo{constructor(e,t){super(e),this.response=t}}class co extends oo{constructor(e,t,n,r){super(e),this.status=t,this.statusText=n,this.errorDetails=r}}class uo extends oo{}class ho extends oo{}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mo,fo;(fo=mo||(mo={})).GENERATE_CONTENT="generateContent",fo.STREAM_GENERATE_CONTENT="streamGenerateContent",fo.COUNT_TOKENS="countTokens",fo.EMBED_CONTENT="embedContent",fo.BATCH_EMBED_CONTENTS="batchEmbedContents";class po{constructor(e,t,n,r,s){this.model=e,this.task=t,this.apiKey=n,this.stream=r,this.requestOptions=s}toString(){var e,t;const n=(null===(e=this.requestOptions)||void 0===e?void 0:e.apiVersion)||"v1beta";let r=`${(null===(t=this.requestOptions)||void 0===t?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com"}/${n}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}}async function go(e){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",function(e){const t=[];return(null==e?void 0:e.apiClient)&&t.push(e.apiClient),t.push("genai-js/0.24.0"),t.join(" ")}(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let r=null===(t=e.requestOptions)||void 0===t?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(s){throw new uo(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${s.message}`)}for(const[e,t]of r.entries()){if("x-goog-api-key"===e)throw new uo(`Cannot set reserved header name ${e}`);if("x-goog-api-client"===e)throw new uo(`Header name ${e} can only be set using the apiClient field`);n.append(e,t)}}return n}async function xo(e,t,n,r,s,i={},a=fetch){const{url:o,fetchOptions:l}=await async function(e,t,n,r,s,i){const a=new po(e,t,n,r,i);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},yo(i)),{method:"POST",headers:await go(a),body:s})}}(e,t,n,r,s,i);return async function(e,t,n=fetch){let r;try{r=await n(e,t)}catch(s){!function(e,t){let n=e;"AbortError"===n.name?(n=new ho(`Request aborted when fetching ${t.toString()}: ${e.message}`),n.stack=e.stack):e instanceof co||e instanceof uo||(n=new oo(`Error fetching from ${t.toString()}: ${e.message}`),n.stack=e.stack);throw n}(s,e)}r.ok||await async function(e,t){let n,r="";try{const t=await e.json();r=t.error.message,t.error.details&&(r+=` ${JSON.stringify(t.error.details)}`,n=t.error.details)}catch(s){}throw new co(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}(r,e);return r}(o,l,a)}function yo(e){const t={};if(void 0!==(null==e?void 0:e.signal)||(null==e?void 0:e.timeout)>=0){const n=new AbortController;(null==e?void 0:e.timeout)>=0&&setTimeout((()=>n.abort()),e.timeout),(null==e?void 0:e.signal)&&e.signal.addEventListener("abort",(()=>{n.abort()})),t.signal=n.signal}return t}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),jo(e.candidates[0]))throw new lo(`${No(e)}`,e);return function(e){var t,n,r,s;const i=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(const a of null===(s=null===(r=e.candidates)||void 0===r?void 0:r[0].content)||void 0===s?void 0:s.parts)a.text&&i.push(a.text),a.executableCode&&i.push("\n```"+a.executableCode.language+"\n"+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&i.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}(e)}if(e.promptFeedback)throw new lo(`Text not available. ${No(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),jo(e.candidates[0]))throw new lo(`${No(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),vo(e)[0]}if(e.promptFeedback)throw new lo(`Function call not available. ${No(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),jo(e.candidates[0]))throw new lo(`${No(e)}`,e);return vo(e)}if(e.promptFeedback)throw new lo(`Function call not available. ${No(e)}`,e)},e}function vo(e){var t,n,r,s;const i=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(const a of null===(s=null===(r=e.candidates)||void 0===r?void 0:r[0].content)||void 0===s?void 0:s.parts)a.functionCall&&i.push(a.functionCall);return i.length>0?i:void 0}const wo=[Za.RECITATION,Za.SAFETY,Za.LANGUAGE];function jo(e){return!!e.finishReason&&wo.includes(e.finishReason)}function No(e){var t,n,r;let s="";if(e.candidates&&0!==e.candidates.length||!e.promptFeedback){if(null===(r=e.candidates)||void 0===r?void 0:r[0]){const t=e.candidates[0];jo(t)&&(s+=`Candidate was blocked due to ${t.finishReason}`,t.finishMessage&&(s+=`: ${t.finishMessage}`))}}else s+="Response was blocked",(null===(t=e.promptFeedback)||void 0===t?void 0:t.blockReason)&&(s+=` due to ${e.promptFeedback.blockReason}`),(null===(n=e.promptFeedback)||void 0===n?void 0:n.blockReasonMessage)&&(s+=`: ${e.promptFeedback.blockReasonMessage}`);return s}function ko(e){return this instanceof ko?(this.v=e,this):new ko(e)}function _o(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,s=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){s[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||o(e,t)}))})}function o(e,t){try{(n=s[e](t)).value instanceof ko?Promise.resolve(n.value.v).then(l,c):d(i[0][2],n)}catch(r){d(i[0][3],r)}var n}function l(e){o("next",e)}function c(e){o("throw",e)}function d(e,t){e(t),i.shift(),i.length&&o(i[0][0],i[0][1])}}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const So=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Co(e){const t=function(e){const t=e.getReader();return new ReadableStream({start(e){let n="";return r();function r(){return t.read().then((({value:t,done:s})=>{if(s)return n.trim()?void e.error(new oo("Failed to parse stream")):void e.close();n+=t;let i,a=n.match(So);for(;a;){try{i=JSON.parse(a[1])}catch(o){return void e.error(new oo(`Error parsing JSON response: "${a[1]}"`))}e.enqueue(i),n=n.substring(a[0].length),a=n.match(So)}return r()})).catch((e=>{let t=e;throw t.stack=e.stack,t="AbortError"===t.name?new ho("Request aborted when reading from the stream"):new oo("Error reading from the stream"),t}))}}})}(e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))),[n,r]=t.tee();return{stream:Eo(n),response:To(r)}}async function To(e){const t=[],n=e.getReader();for(;;){const{done:e,value:r}=await n.read();if(e)return bo(Ao(t));t.push(r)}}function Eo(e){return _o(this,arguments,(function*(){const t=e.getReader();for(;;){const{value:e,done:n}=yield ko(t.read());if(n)break;yield yield ko(bo(e))}}))}function Ao(e){const t=e[e.length-1],n={promptFeedback:null==t?void 0:t.promptFeedback};for(const r of e){if(r.candidates){let e=0;for(const t of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[e]||(n.candidates[e]={index:e}),n.candidates[e].citationMetadata=t.citationMetadata,n.candidates[e].groundingMetadata=t.groundingMetadata,n.candidates[e].finishReason=t.finishReason,n.candidates[e].finishMessage=t.finishMessage,n.candidates[e].safetyRatings=t.safetyRatings,t.content&&t.content.parts){n.candidates[e].content||(n.candidates[e].content={role:t.content.role||"user",parts:[]});const r={};for(const s of t.content.parts)s.text&&(r.text=s.text),s.functionCall&&(r.functionCall=s.functionCall),s.executableCode&&(r.executableCode=s.executableCode),s.codeExecutionResult&&(r.codeExecutionResult=s.codeExecutionResult),0===Object.keys(r).length&&(r.text=""),n.candidates[e].content.parts.push(r)}e++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(e,t,n,r){return Co(await xo(t,mo.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),r))}async function Po(e,t,n,r){const s=await xo(t,mo.GENERATE_CONTENT,e,!1,JSON.stringify(n),r);return{response:bo(await s.json())}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(e){if(null!=e)return"string"==typeof e?{role:"system",parts:[{text:e}]}:e.text?{role:"system",parts:[e]}:e.parts?e.role?e:{role:"system",parts:e.parts}:void 0}function Ro(e){let t=[];if("string"==typeof e)t=[{text:e}];else for(const n of e)"string"==typeof n?t.push({text:n}):t.push(n);return function(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,s=!1;for(const i of e)"functionResponse"in i?(n.parts.push(i),s=!0):(t.parts.push(i),r=!0);if(r&&s)throw new oo("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!s)throw new oo("No content is provided for sending chat message.");if(r)return t;return n}(t)}function Do(e){let t;if(e.contents)t=e;else{t={contents:[Ro(e)]}}return e.systemInstruction&&(t.systemInstruction=Io(e.systemInstruction)),t}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Lo=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Mo={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Fo(e){var t;if(void 0===e.candidates||0===e.candidates.length)return!1;const n=null===(t=e.candidates[0])||void 0===t?void 0:t.content;if(void 0===n)return!1;if(void 0===n.parts||0===n.parts.length)return!1;for(const r of n.parts){if(void 0===r||0===Object.keys(r).length)return!1;if(void 0!==r.text&&""===r.text)return!1}return!0}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o="SILENT_ERROR";class Uo{constructor(e,t,n,r={}){this.model=t,this.params=n,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null==n?void 0:n.history)&&(!function(e){let t=!1;for(const n of e){const{role:e,parts:r}=n;if(!t&&"user"!==e)throw new oo(`First content should be with role 'user', got ${e}`);if(!Ha.includes(e))throw new oo(`Each item should include role field. Got ${e} but valid roles are: ${JSON.stringify(Ha)}`);if(!Array.isArray(r))throw new oo("Content should have 'parts' property with an array of Parts");if(0===r.length)throw new oo("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const t of r)for(const e of Lo)e in t&&(s[e]+=1);const i=Mo[e];for(const t of Lo)if(!i.includes(t)&&s[t]>0)throw new oo(`Content with role '${e}' can't contain '${t}' part`);t=!0}}(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var n,r,s,i,a,o;await this._sendPromise;const l=Ro(e),c={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(r=this.params)||void 0===r?void 0:r.generationConfig,tools:null===(s=this.params)||void 0===s?void 0:s.tools,toolConfig:null===(i=this.params)||void 0===i?void 0:i.toolConfig,systemInstruction:null===(a=this.params)||void 0===a?void 0:a.systemInstruction,cachedContent:null===(o=this.params)||void 0===o?void 0:o.cachedContent,contents:[...this._history,l]},d=Object.assign(Object.assign({},this._requestOptions),t);let u;return this._sendPromise=this._sendPromise.then((()=>Po(this._apiKey,this.model,c,d))).then((e=>{var t;if(Fo(e.response)){this._history.push(l);const n=Object.assign({parts:[],role:"model"},null===(t=e.response.candidates)||void 0===t?void 0:t[0].content);this._history.push(n)}else{const t=No(e.response);t&&console.warn(`sendMessage() was unsuccessful. ${t}. Inspect response object for details.`)}u=e})),await this._sendPromise,u}async sendMessageStream(e,t={}){var n,r,s,i,a,o;await this._sendPromise;const l=Ro(e),c={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(r=this.params)||void 0===r?void 0:r.generationConfig,tools:null===(s=this.params)||void 0===s?void 0:s.tools,toolConfig:null===(i=this.params)||void 0===i?void 0:i.toolConfig,systemInstruction:null===(a=this.params)||void 0===a?void 0:a.systemInstruction,cachedContent:null===(o=this.params)||void 0===o?void 0:o.cachedContent,contents:[...this._history,l]},d=Object.assign(Object.assign({},this._requestOptions),t),u=Oo(this._apiKey,this.model,c,d);return this._sendPromise=this._sendPromise.then((()=>u)).catch((e=>{throw new Error($o)})).then((e=>e.response)).then((e=>{if(Fo(e)){this._history.push(l);const t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{const t=No(e);t&&console.warn(`sendMessageStream() was unsuccessful. ${t}. Inspect response object for details.`)}})).catch((e=>{e.message!==$o&&console.error(e)})),u}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class zo{constructor(e,t,n={}){this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=Io(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var n;const r=Do(e),s=Object.assign(Object.assign({},this._requestOptions),t);return Po(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},r),s)}async generateContentStream(e,t={}){var n;const r=Do(e),s=Object.assign(Object.assign({},this._requestOptions),t);return Oo(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},r),s)}startChat(e){var t;return new Uo(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(t=this.cachedContent)||void 0===t?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const n=function(e,t){var n;let r={model:null==t?void 0:t.model,generationConfig:null==t?void 0:t.generationConfig,safetySettings:null==t?void 0:t.safetySettings,tools:null==t?void 0:t.tools,toolConfig:null==t?void 0:t.toolConfig,systemInstruction:null==t?void 0:t.systemInstruction,cachedContent:null===(n=null==t?void 0:t.cachedContent)||void 0===n?void 0:n.name,contents:[]};const s=null!=e.generateContentRequest;if(e.contents){if(s)throw new uo("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=e.contents}else if(s)r=Object.assign(Object.assign({},r),e.generateContentRequest);else{const t=Ro(e);r.contents=[t]}return{generateContentRequest:r}}(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){return(await xo(t,mo.COUNT_TOKENS,e,!1,JSON.stringify(n),r)).json()}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.apiKey,this.model,n,r)}async embedContent(e,t={}){const n=function(e){if("string"==typeof e||Array.isArray(e))return{content:Ro(e)};return e}(e),r=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){return(await xo(t,mo.EMBED_CONTENT,e,!1,JSON.stringify(n),r)).json()}(this.apiKey,this.model,n,r)}async batchEmbedContents(e,t={}){const n=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){const s=n.requests.map((e=>Object.assign(Object.assign({},e),{model:t})));return(await xo(t,mo.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:s}),r)).json()}(this.apiKey,this.model,e,n)}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new oo("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new zo(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new uo("Cached content must contain a `name` field.");if(!e.model)throw new uo("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const i of r)if((null==t?void 0:t[i])&&e[i]&&(null==t?void 0:t[i])!==e[i]){if("model"===i){if((t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(e.model.startsWith("models/")?e.model.replace("models/",""):e.model))continue}throw new uo(`Different value for "${i}" specified in modelParams (${t[i]}) and cachedContent (${e[i]})`)}const s=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new zo(this.apiKey,s,n)}}const qo=class e{constructor(){r(this,"currentSessionId",null),r(this,"genAI"),r(this,"model"),this.genAI=new Bo("AIzaSyBewm2I3ALLKdw01kV_iJs2oUVt1dGJ7Po"),this.model=this.genAI.getGenerativeModel({model:"gemini-2.0-flash"})}static getInstance(){return e.instance||(e.instance=new e),e.instance}async initializeSession(){if(this.currentSessionId)return this.currentSessionId;const{data:e,error:t}=await gi.from("chat_sessions").insert({}).select().single();if(t)throw new Error("Failed to create chat session");this.currentSessionId=e.id;const n={id:Date.now(),type:"bot",text:" Hi there! I'm your Overseas Education Guide. I can help you with:\n\n **University Selection**: Find the best universities for your field\n **Admission Process**: Step-by-step guidance for applications\n **Visa Requirements**: Country-specific visa information\n **Scholarships**: Available funding opportunities\n **Cost of Living**: Budget planning for different countries\n **Career Prospects**: Job opportunities after graduation\n\nWhat would you like to know about studying abroad?",created_at:(new Date).toISOString(),session_id:this.currentSessionId},{error:r}=await gi.from("chat_messages").insert(n);return r&&console.error("Failed to store welcome message:",r),e.id}async sendMessage(e){this.currentSessionId||await this.initializeSession();const t={id:Date.now(),type:"user",text:e,created_at:(new Date).toISOString(),session_id:this.currentSessionId},{error:n}=await gi.from("chat_messages").insert(t);n&&console.error("Failed to store user message:",n);const r=await this.generateBotResponse(e),s={id:Date.now()+1,type:"bot",text:r,created_at:(new Date).toISOString(),session_id:this.currentSessionId},{error:i}=await gi.from("chat_messages").insert(s);return i&&console.error("Failed to store bot message:",i),s}async generateBotResponse(e){for(let n=1;n<=3;n++)try{const t=`You are an expert Overseas Education Guide. Provide a concise response (2-3 sentences) to the student's question about studying abroad.\n\n        The student asked: "${e}"\n\n        Guidelines for your response:\n        1. Keep it brief and to the point\n        2. Focus on the most important information\n        3. Use **bold** for key points or deadlines\n        4. If more details are needed, suggest what specific information to ask about\n\n        Example format:\n        "For [topic], the key points are: **point 1**, **point 2**. Would you like more details about any specific aspect?"`,n=await this.model.generateContent({contents:[{parts:[{text:t}]}]});return(await n.response).text()}catch(t){if(console.error(`Attempt ${n} failed:`,t),3===n)return console.error("All retry attempts failed:",t),"I apologize, but I'm having trouble generating a response. Please try again later.";await new Promise((e=>setTimeout(e,1e3*n)))}return"I apologize, but I'm having trouble generating a response. Please try again later."}async getMessages(e){const{data:t,error:n}=await gi.from("chat_messages").select("*").eq("session_id",e).order("created_at",{ascending:!0});if(n)throw new Error("Failed to fetch messages");return t}async subscribeToNewMessages(e,t){return gi.channel("chat_messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`session_id=eq.${e}`},(e=>{t(e.new)})).subscribe()}async deleteChatHistory(){if(this.currentSessionId)try{const{error:e}=await gi.from("chat_messages").delete().eq("session_id",this.currentSessionId);e&&console.error("Failed to delete messages:",e);const{error:t}=await gi.from("chat_sessions").delete().eq("id",this.currentSessionId);t&&console.error("Failed to delete session:",t),this.currentSessionId=null}catch(e){console.error("Error deleting chat history:",e)}}};r(qo,"instance");let Ho=qo;function Vo(){const{isOpen:e,setIsOpen:t}=Ma(),[n,r]=s.useState([]),[i,a]=s.useState(""),[o,l]=s.useState(!1),[c,d]=s.useState(["Visa requirements","Top universities","Scholarships"]),u=s.useRef(null),h=Ho.getInstance();s.useEffect((()=>{e&&m()}),[e]);const m=async()=>{try{await f()}catch(e){console.error("Connection check error:",e),x.error("Failed to initialize chat service")}},f=async()=>{try{const e=await h.initializeSession(),t=await h.getMessages(e);r(t),h.subscribeToNewMessages(e,(e=>{r((t=>[...t,e]))}))}catch(e){console.error("Chat initialization error:",e),"Unable to connect to chat service"===e.message?x.error("Unable to connect to the chat service. Please try again later."):x.error("Failed to initialize chat"),t(!1)}};s.useEffect((()=>{u.current&&u.current.scrollIntoView({behavior:"smooth"})}),[n]);const p=async()=>{if(i.trim())try{l(!0);const e={id:Date.now(),type:"user",text:i,created_at:(new Date).toISOString(),session_id:h.currentSessionId||""};r((t=>[...t,e])),a("");const t=await h.sendMessage(i);r((e=>[...e,t]))}catch(e){x.error("Failed to send message"),console.error("Message sending error:",e)}finally{l(!1)}};return Fe.jsxs("div",{className:"fixed bottom-24 right-6 w-80 md:w-96 bg-white rounded-xl shadow-2xl z-50 transition-all duration-300 transform "+(e?"translate-y-0 opacity-100 visible":"translate-y-10 opacity-0 invisible"),"aria-hidden":!e,children:[Fe.jsxs("div",{className:"bg-gradient-to-r from-primary to-primary/80 text-white p-3 rounded-t-xl flex items-center justify-between shadow-md",children:[Fe.jsxs("div",{className:"flex items-center",children:[Fe.jsx("div",{className:"bg-white/20 rounded-full p-1 mr-2",children:Fe.jsx(z,{className:"w-4 h-4 text-white"})}),Fe.jsxs("div",{children:[Fe.jsx("h3",{className:"font-bold text-sm text-white",children:"Admissions Assistant"}),Fe.jsx("p",{className:"text-[10px] text-white/80",children:"Powered by AI"})]})]}),Fe.jsx("button",{className:"bg-white/20 hover:bg-white/30 rounded-full p-1 text-white transition-colors duration-200 focus:outline-none","aria-label":"Close Chatbot",onClick:async()=>{try{await h.deleteChatHistory(),r([]),t(!1)}catch(e){console.error("Error closing chatbot:",e)}},children:Fe.jsx(y,{className:"w-4 h-4"})})]}),Fe.jsxs("div",{className:"h-64 overflow-y-auto p-3 bg-gradient-to-br from-gray-50 to-white",id:"chatMessages",style:{backgroundImage:"radial-gradient(circle at 25px 25px, #f0f4ff 2%, transparent 0%), radial-gradient(circle at 75px 75px, #f0f4ff 2%, transparent 0%)",backgroundSize:"100px 100px"},children:[n.map((e=>{return Fe.jsxs("div",{className:"flex items-start "+("user"===e.type?"justify-end mb-3":"mb-3"),children:["bot"===e.type&&Fe.jsx("div",{className:"bg-primary rounded-full p-1 mr-2 self-end mb-1",children:Fe.jsx(z,{className:"w-3 h-3 text-white"})}),Fe.jsx("div",{className:"rounded-xl shadow-sm p-2 max-w-[85%] "+("user"===e.type?"bg-gradient-to-r from-primary to-primary/90 text-white rounded-tr-none":"bg-white border border-gray-100 text-gray-800 rounded-tl-none"),children:Fe.jsx("p",{className:"whitespace-pre-wrap text-xs md:text-sm leading-relaxed",children:(t=e.text,t.split(/(\*\*.*?\*\*)/g).map(((e,t)=>{if(e.startsWith("**")&&e.endsWith("**")){const n=e.slice(2,-2);return Fe.jsx("span",{className:"font-bold",children:n},t)}return Fe.jsx("span",{children:e},t)})))})}),"user"===e.type&&Fe.jsx("div",{className:"bg-gray-200 rounded-full p-1 ml-2 self-end mb-1",children:Fe.jsx(V,{className:"w-3 h-3 text-gray-600"})})]},e.id);var t})),o&&Fe.jsxs("div",{className:"flex items-start mb-3",children:[Fe.jsx("div",{className:"bg-primary rounded-full p-1 mr-2 self-end mb-1",children:Fe.jsx(z,{className:"w-3 h-3 text-white"})}),Fe.jsx("div",{className:"bg-white border border-gray-100 rounded-xl rounded-tl-none shadow-sm p-2",children:Fe.jsxs("div",{className:"flex space-x-1.5",children:[Fe.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary/40 animate-bounce"}),Fe.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary/60 animate-bounce [animation-delay:0.2s]"}),Fe.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary/80 animate-bounce [animation-delay:0.4s]"})]})})]}),Fe.jsx("div",{ref:u})]}),Fe.jsxs("div",{className:"p-3 border-t border-gray-100 bg-white rounded-b-xl",children:[Fe.jsxs("div",{className:"flex shadow-sm rounded-full border border-gray-200 overflow-hidden",children:[Fe.jsx("input",{type:"text",placeholder:"Type your question...",className:"flex-grow px-4 py-2 border-none focus:outline-none focus:ring-0 text-gray-700 bg-transparent text-sm",value:i,onChange:e=>a(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),p())},disabled:o}),Fe.jsx("button",{className:"px-3 flex items-center justify-center transition-colors duration-200 "+(o?"bg-gray-200 cursor-not-allowed":"bg-primary text-white hover:bg-primary/90"),onClick:p,disabled:o,children:Fe.jsx(F,{className:"w-4 h-4"})})]}),c.length>0&&Fe.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:c.map(((e,t)=>Fe.jsx("button",{className:"bg-gradient-to-r from-gray-50 to-gray-100 hover:from-gray-100 hover:to-gray-200 text-[10px] px-2 py-1 rounded-full border border-gray-200 text-gray-700 transition-all duration-200 shadow-sm hover:shadow",onClick:()=>(e=>{a(e)})(e),children:e},t)))}),Fe.jsx("p",{className:"text-[10px] text-gray-500 mt-2 text-center",children:"Ask me anything about universities, visa requirements, scholarships, or application processes!"})]})]})}const Wo=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Go=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Jo={};function Ko(e,t){return(Jo.jsx?Go:Wo).test(e)}const Yo=/[ \t\n\f\r]/g;function Xo(e){return""===e.replace(Yo,"")}class Qo{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}}function Zo(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new Qo(n,r,t)}function el(e){return e.toLowerCase()}Qo.prototype.normal={},Qo.prototype.property={},Qo.prototype.space=void 0;class tl{constructor(e,t){this.attribute=t,this.property=e}}tl.prototype.attribute="",tl.prototype.booleanish=!1,tl.prototype.boolean=!1,tl.prototype.commaOrSpaceSeparated=!1,tl.prototype.commaSeparated=!1,tl.prototype.defined=!1,tl.prototype.mustUseProperty=!1,tl.prototype.number=!1,tl.prototype.overloadedBoolean=!1,tl.prototype.property="",tl.prototype.spaceSeparated=!1,tl.prototype.space=void 0;let nl=0;const rl=dl(),sl=dl(),il=dl(),al=dl(),ol=dl(),ll=dl(),cl=dl();function dl(){return 2**++nl}const ul=Object.freeze(Object.defineProperty({__proto__:null,boolean:rl,booleanish:sl,commaOrSpaceSeparated:cl,commaSeparated:ll,number:al,overloadedBoolean:il,spaceSeparated:ol},Symbol.toStringTag,{value:"Module"})),hl=Object.keys(ul);class ml extends tl{constructor(e,t,n,r){let s=-1;if(super(e,t),fl(this,"space",r),"number"==typeof n)for(;++s<hl.length;){const e=hl[s];fl(this,hl[s],(n&ul[e])===ul[e])}}}function fl(e,t,n){n&&(e[t]=n)}function pl(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const i=new ml(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[el(r)]=r,n[el(i.attribute)]=r}return new Qo(t,n,e.space)}ml.prototype.defined=!0;const gl=pl({properties:{ariaActiveDescendant:null,ariaAtomic:sl,ariaAutoComplete:null,ariaBusy:sl,ariaChecked:sl,ariaColCount:al,ariaColIndex:al,ariaColSpan:al,ariaControls:ol,ariaCurrent:null,ariaDescribedBy:ol,ariaDetails:null,ariaDisabled:sl,ariaDropEffect:ol,ariaErrorMessage:null,ariaExpanded:sl,ariaFlowTo:ol,ariaGrabbed:sl,ariaHasPopup:null,ariaHidden:sl,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ol,ariaLevel:al,ariaLive:null,ariaModal:sl,ariaMultiLine:sl,ariaMultiSelectable:sl,ariaOrientation:null,ariaOwns:ol,ariaPlaceholder:null,ariaPosInSet:al,ariaPressed:sl,ariaReadOnly:sl,ariaRelevant:null,ariaRequired:sl,ariaRoleDescription:ol,ariaRowCount:al,ariaRowIndex:al,ariaRowSpan:al,ariaSelected:sl,ariaSetSize:al,ariaSort:null,ariaValueMax:al,ariaValueMin:al,ariaValueNow:al,ariaValueText:null,role:null},transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase()});function xl(e,t){return t in e?e[t]:t}function yl(e,t){return xl(e,t.toLowerCase())}const bl=pl({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ll,acceptCharset:ol,accessKey:ol,action:null,allow:null,allowFullScreen:rl,allowPaymentRequest:rl,allowUserMedia:rl,alt:null,as:null,async:rl,autoCapitalize:null,autoComplete:ol,autoFocus:rl,autoPlay:rl,blocking:ol,capture:null,charSet:null,checked:rl,cite:null,className:ol,cols:al,colSpan:null,content:null,contentEditable:sl,controls:rl,controlsList:ol,coords:al|ll,crossOrigin:null,data:null,dateTime:null,decoding:null,default:rl,defer:rl,dir:null,dirName:null,disabled:rl,download:il,draggable:sl,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:rl,formTarget:null,headers:ol,height:al,hidden:rl,high:al,href:null,hrefLang:null,htmlFor:ol,httpEquiv:ol,id:null,imageSizes:null,imageSrcSet:null,inert:rl,inputMode:null,integrity:null,is:null,isMap:rl,itemId:null,itemProp:ol,itemRef:ol,itemScope:rl,itemType:ol,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:rl,low:al,manifest:null,max:null,maxLength:al,media:null,method:null,min:null,minLength:al,multiple:rl,muted:rl,name:null,nonce:null,noModule:rl,noValidate:rl,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:rl,optimum:al,pattern:null,ping:ol,placeholder:null,playsInline:rl,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:rl,referrerPolicy:null,rel:ol,required:rl,reversed:rl,rows:al,rowSpan:al,sandbox:ol,scope:null,scoped:rl,seamless:rl,selected:rl,shadowRootClonable:rl,shadowRootDelegatesFocus:rl,shadowRootMode:null,shape:null,size:al,sizes:null,slot:null,span:al,spellCheck:sl,src:null,srcDoc:null,srcLang:null,srcSet:null,start:al,step:null,style:null,tabIndex:al,target:null,title:null,translate:null,type:null,typeMustMatch:rl,useMap:null,value:sl,width:al,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ol,axis:null,background:null,bgColor:null,border:al,borderColor:null,bottomMargin:al,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:rl,declare:rl,event:null,face:null,frame:null,frameBorder:null,hSpace:al,leftMargin:al,link:null,longDesc:null,lowSrc:null,marginHeight:al,marginWidth:al,noResize:rl,noHref:rl,noShade:rl,noWrap:rl,object:null,profile:null,prompt:null,rev:null,rightMargin:al,rules:null,scheme:null,scrolling:sl,standby:null,summary:null,text:null,topMargin:al,valueType:null,version:null,vAlign:null,vLink:null,vSpace:al,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:rl,disableRemotePlayback:rl,prefix:null,property:null,results:al,security:null,unselectable:null},space:"html",transform:yl}),vl=pl({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:cl,accentHeight:al,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:al,amplitude:al,arabicForm:null,ascent:al,attributeName:null,attributeType:null,azimuth:al,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:al,by:null,calcMode:null,capHeight:al,className:ol,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:al,diffuseConstant:al,direction:null,display:null,dur:null,divisor:al,dominantBaseline:null,download:rl,dx:null,dy:null,edgeMode:null,editable:null,elevation:al,enableBackground:null,end:null,event:null,exponent:al,externalResourcesRequired:null,fill:null,fillOpacity:al,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ll,g2:ll,glyphName:ll,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:al,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:al,horizOriginX:al,horizOriginY:al,id:null,ideographic:al,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:al,k:al,k1:al,k2:al,k3:al,k4:al,kernelMatrix:cl,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:al,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:al,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:al,overlineThickness:al,paintOrder:null,panose1:null,path:null,pathLength:al,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ol,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:al,pointsAtY:al,pointsAtZ:al,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:cl,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:cl,rev:cl,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:cl,requiredFeatures:cl,requiredFonts:cl,requiredFormats:cl,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:al,specularExponent:al,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:al,strikethroughThickness:al,string:null,stroke:null,strokeDashArray:cl,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:al,strokeOpacity:al,strokeWidth:null,style:null,surfaceScale:al,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:cl,tabIndex:al,tableValues:null,target:null,targetX:al,targetY:al,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:cl,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:al,underlineThickness:al,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:al,values:null,vAlphabetic:al,vMathematical:al,vectorEffect:null,vHanging:al,vIdeographic:al,version:null,vertAdvY:al,vertOriginX:al,vertOriginY:al,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:al,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:xl}),wl=pl({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase()}),jl=pl({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:yl}),Nl=pl({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase()}),kl={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},_l=/[A-Z]/g,Sl=/-[a-z]/g,Cl=/^data[-\w.:]+$/i;function Tl(e){return"-"+e.toLowerCase()}function El(e){return e.charAt(1).toUpperCase()}const Al=Zo([gl,bl,wl,jl,Nl],"html"),Ol=Zo([gl,vl,wl,jl,Nl],"svg");var Pl={},Il=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Rl=/\n/g,Dl=/^\s*/,Ll=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Ml=/^:\s*/,Fl=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,$l=/^[;\s]*/,Ul=/^\s+|\s+$/g,zl="";function Bl(e){return e?e.replace(Ul,zl):zl}var ql=c&&c.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pl,"__esModule",{value:!0}),Pl.default=function(e,t){var n=null;if(!e||"string"!=typeof e)return n;var r=(0,Hl.default)(e),s="function"==typeof t;return r.forEach((function(e){if("declaration"===e.type){var r=e.property,i=e.value;s?t(r,i,e):i&&((n=n||{})[r]=i)}})),n};var Hl=ql((function(e,t){if("string"!=typeof e)throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(e){var t=e.match(Rl);t&&(n+=t.length);var s=e.lastIndexOf("\n");r=~s?e.length-s:r+e.length}function i(){var e={line:n,column:r};return function(t){return t.position=new a(e),c(),t}}function a(e){this.start=e,this.end={line:n,column:r},this.source=t.source}function o(s){var i=new Error(t.source+":"+n+":"+r+": "+s);if(i.reason=s,i.filename=t.source,i.line=n,i.column=r,i.source=e,!t.silent)throw i}function l(t){var n=t.exec(e);if(n){var r=n[0];return s(r),e=e.slice(r.length),n}}function c(){l(Dl)}function d(e){var t;for(e=e||[];t=u();)!1!==t&&e.push(t);return e}function u(){var t=i();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;zl!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,zl===e.charAt(n-1))return o("End of comment missing");var a=e.slice(2,n-2);return r+=2,s(a),e=e.slice(n),r+=2,t({type:"comment",comment:a})}}function h(){var e=i(),t=l(Ll);if(t){if(u(),!l(Ml))return o("property missing ':'");var n=l(Fl),r=e({type:"declaration",property:Bl(t[0].replace(Il,zl)),value:n?Bl(n[0].replace(Il,zl)):zl});return l($l),r}}return a.prototype.content=e,c(),function(){var e,t=[];for(d(t);e=h();)!1!==e&&(t.push(e),d(t));return t}()}));var Vl={};Object.defineProperty(Vl,"__esModule",{value:!0}),Vl.camelCase=void 0;var Wl=/^--[a-zA-Z0-9_-]+$/,Gl=/-([a-z])/g,Jl=/^[^-]+$/,Kl=/^-(webkit|moz|ms|o|khtml)-/,Yl=/^-(ms)-/,Xl=function(e,t){return t.toUpperCase()},Ql=function(e,t){return"".concat(t,"-")};Vl.camelCase=function(e,t){return void 0===t&&(t={}),function(e){return!e||Jl.test(e)||Wl.test(e)}(e)?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(Yl,Ql):e.replace(Kl,Ql)).replace(Gl,Xl))};var Zl=(c&&c.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(Pl),ec=Vl;function tc(e,t){var n={};return e&&"string"==typeof e?((0,Zl.default)(e,(function(e,r){e&&r&&(n[(0,ec.camelCase)(e,t)]=r)})),n):n}tc.default=tc;const nc=a(tc),rc=ic("end"),sc=ic("start");function ic(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"==typeof n.line&&n.line>0&&"number"==typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"==typeof n.offset&&n.offset>-1?n.offset:void 0}}}function ac(e){return e&&"object"==typeof e?"position"in e||"type"in e?lc(e.position):"start"in e||"end"in e?lc(e):"line"in e||"column"in e?oc(e):"":""}function oc(e){return cc(e&&e.line)+":"+cc(e&&e.column)}function lc(e){return oc(e&&e.start)+"-"+oc(e&&e.end)}function cc(e){return e&&"number"==typeof e?e:1}class dc extends Error{constructor(e,t,n){super(),"string"==typeof t&&(n=t,t=void 0);let r="",s={},i=!1;if(t&&(s="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"==typeof e?r=e:!s.cause&&e&&(i=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&"string"==typeof n){const e=n.indexOf(":");-1===e?s.ruleId=n:(s.source=n.slice(0,e),s.ruleId=n.slice(e+1))}if(!s.place&&s.ancestors&&s.ancestors){const e=s.ancestors[s.ancestors.length-1];e&&(s.place=e.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=a?a.line:void 0,this.name=ac(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=i&&s.cause&&"string"==typeof s.cause.stack?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}dc.prototype.file="",dc.prototype.name="",dc.prototype.reason="",dc.prototype.message="",dc.prototype.stack="",dc.prototype.column=void 0,dc.prototype.line=void 0,dc.prototype.ancestors=void 0,dc.prototype.cause=void 0,dc.prototype.fatal=void 0,dc.prototype.place=void 0,dc.prototype.ruleId=void 0,dc.prototype.source=void 0;const uc={}.hasOwnProperty,hc=new Map,mc=/[A-Z]/g,fc=new Set(["table","tbody","thead","tfoot","tr"]),pc=new Set(["td","th"]),gc="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function xc(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if("function"!=typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=function(e,t){return n;function n(n,r,s,i){const a=Array.isArray(s.children),o=sc(n);return t(r,s,i,a,{columnNumber:o?o.column-1:void 0,fileName:e,lineNumber:o?o.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!=typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!=typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");r=function(e,t,n){return r;function r(e,r,s,i){const a=Array.isArray(s.children)?n:t;return i?a(r,s,i):a(r,s)}}(0,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?Ol:Al,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},i=yc(s,e,void 0);return i&&"string"!=typeof i?i:s.create(e,s.Fragment,{children:i||void 0},void 0)}function yc(e,t,n){return"element"===t.type?function(e,t,n){const r=e.schema;let s=r;"svg"===t.tagName.toLowerCase()&&"html"===r.space&&(s=Ol,e.schema=s);e.ancestors.push(t);const i=Nc(e,t.tagName,!1),a=function(e,t){const n={};let r,s;for(s in t.properties)if("children"!==s&&uc.call(t.properties,s)){const i=jc(e,s,t.properties[s]);if(i){const[s,a]=i;e.tableCellAlignToStyle&&"align"===s&&"string"==typeof a&&pc.has(t.tagName)?r=a:n[s]=a}}if(r){(n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=r}return n}(e,t);let o=wc(e,t);fc.has(t.tagName)&&(o=o.filter((function(e){return"string"!=typeof e||!("object"==typeof(t=e)?"text"===t.type&&Xo(t.value):Xo(t));var t})));return bc(e,a,i,t),vc(a,o),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}kc(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const r=e.schema;let s=r;"svg"===t.name&&"html"===r.space&&(s=Ol,e.schema=s);e.ancestors.push(t);const i=null===t.name?e.Fragment:Nc(e,t.name,!0),a=function(e,t){const n={};for(const r of t.attributes)if("mdxJsxExpressionAttribute"===r.type)if(r.data&&r.data.estree&&e.evaluater){const t=r.data.estree.body[0];t.type;const s=t.expression;s.type;const i=s.properties[0];i.type,Object.assign(n,e.evaluater.evaluateExpression(i.argument))}else kc(e,t.position);else{const s=r.name;let i;if(r.value&&"object"==typeof r.value)if(r.value.data&&r.value.data.estree&&e.evaluater){const t=r.value.data.estree.body[0];t.type,i=e.evaluater.evaluateExpression(t.expression)}else kc(e,t.position);else i=null===r.value||r.value;n[s]=i}return n}(e,t),o=wc(e,t);return bc(e,a,i,t),vc(a,o),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);kc(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const r={};return vc(r,wc(e,t)),e.create(t,e.Fragment,r,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function bc(e,t,n,r){"string"!=typeof n&&n!==e.Fragment&&e.passNode&&(t.node=r)}function vc(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function wc(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:hc;for(;++r<t.children.length;){const i=t.children[r];let a;if(e.passKeys){const e="element"===i.type?i.tagName:"mdxJsxFlowElement"===i.type||"mdxJsxTextElement"===i.type?i.name:void 0;if(e){const t=s.get(e)||0;a=e+"-"+t,s.set(e,t+1)}}const o=yc(e,i,a);void 0!==o&&n.push(o)}return n}function jc(e,t,n){const r=function(e,t){const n=el(t);let r=t,s=tl;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&Cl.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(Sl,El);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!Sl.test(e)){let n=e.replace(_l,Tl);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}s=ml}return new s(r,t)}(e.schema,t);if(!(null==n||"number"==typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?function(e){const t={};return(""===e[e.length-1]?[...e,""]:e).join((t.padRight?" ":"")+","+(!1===t.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===r.property){let t="object"==typeof n?n:function(e,t){try{return nc(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const t=n,r=new dc("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:t,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=gc+"#cannot-parse-style-attribute",r}}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)uc.call(e,n)&&(t[_c(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&r.space?kl[r.property]||r.property:r.attribute,n]}}function Nc(e,t,n){let r;if(n)if(t.includes(".")){const e=t.split(".");let n,s=-1;for(;++s<e.length;){const t=Ko(e[s])?{type:"Identifier",name:e[s]}:{type:"Literal",value:e[s]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(s&&"Literal"===t.type),optional:!1}:t}r=n}else r=Ko(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else r={type:"Literal",value:t};if("Literal"===r.type){const t=r.value;return uc.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(r);kc(e)}function kc(e,t){const n=new dc("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=gc+"#cannot-handle-mdx-estrees-without-createevaluater",n}function _c(e){let t=e.replace(mc,Sc);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function Sc(e){return"-"+e.toLowerCase()}const Cc={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Tc={};function Ec(e,t){return Ac(e,"boolean"!=typeof Tc.includeImageAlt||Tc.includeImageAlt,"boolean"!=typeof Tc.includeHtml||Tc.includeHtml)}function Ac(e,t,n){if(function(e){return Boolean(e&&"object"==typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Oc(e.children,t,n)}return Array.isArray(e)?Oc(e,t,n):""}function Oc(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=Ac(e[s],t,n);return r.join("")}const Pc=document.createElement("i");function Ic(e){const t="&"+e+";";Pc.innerHTML=t;const n=Pc.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}function Rc(e,t,n,r){const s=e.length;let i,a=0;if(t=t<0?-t>s?0:s+t:t>s?s:t,n=n>0?n:0,r.length<1e4)i=Array.from(r),i.unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);a<r.length;)i=r.slice(a,a+1e4),i.unshift(t,0),e.splice(...i),a+=1e4,t+=1e4}function Dc(e,t){return e.length>0?(Rc(e,e.length,0,t),e):t}const Lc={}.hasOwnProperty;function Mc(e){const t={};let n=-1;for(;++n<e.length;)Fc(t,e[n]);return t}function Fc(e,t){let n;for(n in t){const r=(Lc.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let i;if(s)for(i in s){Lc.call(r,i)||(r[i]=[]);const e=s[i];$c(r[i],Array.isArray(e)?e:e?[e]:[])}}}function $c(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);Rc(e,0,0,r)}function Uc(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||!(65535&~n)||65534==(65535&n)||n>1114111?"":String.fromCodePoint(n)}function zc(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Bc=ed(/[A-Za-z]/),qc=ed(/[\dA-Za-z]/),Hc=ed(/[#-'*+\--9=?A-Z^-~]/);function Vc(e){return null!==e&&(e<32||127===e)}const Wc=ed(/\d/),Gc=ed(/[\dA-Fa-f]/),Jc=ed(/[!-/:-@[-`{-~]/);function Kc(e){return null!==e&&e<-2}function Yc(e){return null!==e&&(e<0||32===e)}function Xc(e){return-2===e||-1===e||32===e}const Qc=ed(new RegExp("\\p{P}|\\p{S}","u")),Zc=ed(/\s/);function ed(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function td(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const i=e.charCodeAt(n);let a="";if(37===i&&qc(e.charCodeAt(n+1))&&qc(e.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(a=String.fromCharCode(i));else if(i>55295&&i<57344){const t=e.charCodeAt(n+1);i<56320&&t>56319&&t<57344?(a=String.fromCharCode(i,t),s=1):a=""}else a=String.fromCharCode(i);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+s+1,a=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function nd(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return function(r){if(Xc(r))return e.enter(n),a(r);return t(r)};function a(r){return Xc(r)&&i++<s?(e.consume(r),a):(e.exit(n),t(r))}}const rd={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,(function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),nd(e,t,"linePrefix")}),(function(t){return e.enter("paragraph"),r(t)}));let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,s(t)}function s(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):Kc(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),s)}}};const sd={tokenize:function(e){const t=this,n=[];let r,s,i,a=0;return o;function o(r){if(a<n.length){const s=n[a];return t.containerState=s[1],e.attempt(s[0].continuation,l,c)(r)}return c(r)}function l(e){if(a++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&y();const n=t.events.length;let s,i=n;for(;i--;)if("exit"===t.events[i][0]&&"chunkFlow"===t.events[i][1].type){s=t.events[i][1].end;break}x(a);let o=n;for(;o<t.events.length;)t.events[o][1].end={...s},o++;return Rc(t.events,i+1,0,t.events.slice(n)),t.events.length=o,c(e)}return o(e)}function c(s){if(a===n.length){if(!r)return h(s);if(r.currentConstruct&&r.currentConstruct.concrete)return f(s);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(id,d,u)(s)}function d(e){return r&&y(),x(a),h(e)}function u(e){return t.parser.lazy[t.now().line]=a!==n.length,i=t.now().offset,f(e)}function h(n){return t.containerState={},e.attempt(id,m,f)(n)}function m(e){return a++,n.push([t.currentConstruct,t.containerState]),h(e)}function f(n){return null===n?(r&&y(),x(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),p(n))}function p(n){return null===n?(g(e.exit("chunkFlow"),!0),x(0),void e.consume(n)):Kc(n)?(e.consume(n),g(e.exit("chunkFlow")),a=0,t.interrupt=void 0,o):(e.consume(n),p)}function g(e,n){const o=t.sliceStream(e);if(n&&o.push(null),e.previous=s,s&&(s.next=e),s=e,r.defineSkip(e.start),r.write(o),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<i&&(!r.events[e][1].end||r.events[e][1].end.offset>i))return;const n=t.events.length;let s,o,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(s){o=t.events[l][1].end;break}s=!0}for(x(a),e=n;e<t.events.length;)t.events[e][1].end={...o},e++;Rc(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function x(r){let s=n.length;for(;s-- >r;){const r=n[s];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function y(){r.write([null]),s=void 0,r=void 0,t.containerState._closeFlow=void 0}}},id={tokenize:function(e,t,n){return nd(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};function ad(e){return null===e||Yc(e)||Zc(e)?1:Qc(e)?2:void 0}function od(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const ld={name:"attention",resolveAll:function(e,t){let n,r,s,i,a,o,l,c,d=-1;for(;++d<e.length;)if("enter"===e[d][0]&&"attentionSequence"===e[d][1].type&&e[d][1]._close)for(n=d;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[d][1]).charCodeAt(0)){if((e[n][1]._close||e[d][1]._open)&&(e[d][1].end.offset-e[d][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[d][1].end.offset-e[d][1].start.offset)%3))continue;o=e[n][1].end.offset-e[n][1].start.offset>1&&e[d][1].end.offset-e[d][1].start.offset>1?2:1;const u={...e[n][1].end},h={...e[d][1].start};cd(u,-o),cd(h,o),i={type:o>1?"strongSequence":"emphasisSequence",start:u,end:{...e[n][1].end}},a={type:o>1?"strongSequence":"emphasisSequence",start:{...e[d][1].start},end:h},s={type:o>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[d][1].start}},r={type:o>1?"strong":"emphasis",start:{...i.start},end:{...a.end}},e[n][1].end={...i.start},e[d][1].start={...a.end},l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=Dc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=Dc(l,[["enter",r,t],["enter",i,t],["exit",i,t],["enter",s,t]]),l=Dc(l,od(t.parser.constructs.insideSpan.null,e.slice(n+1,d),t)),l=Dc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",r,t]]),e[d][1].end.offset-e[d][1].start.offset?(c=2,l=Dc(l,[["enter",e[d][1],t],["exit",e[d][1],t]])):c=0,Rc(e,n-1,d-n+3,l),d=n+l.length-c-2;break}d=-1;for(;++d<e.length;)"attentionSequence"===e[d][1].type&&(e[d][1].type="data");return e},tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=ad(r);let i;return function(t){return i=t,e.enter("attentionSequence"),a(t)};function a(o){if(o===i)return e.consume(o),a;const l=e.exit("attentionSequence"),c=ad(o),d=!c||2===c&&s||n.includes(o),u=!s||2===s&&c||n.includes(r);return l._open=Boolean(42===i?d:d&&(s||!u)),l._close=Boolean(42===i?u:u&&(c||!d)),t(o)}}};function cd(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const dd={name:"autolink",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s};function s(t){return Bc(t)?(e.consume(t),i):64===t?n(t):l(t)}function i(e){return 43===e||45===e||46===e||qc(e)?(r=1,a(e)):l(e)}function a(t){return 58===t?(e.consume(t),r=0,o):(43===t||45===t||46===t||qc(t))&&r++<32?(e.consume(t),a):(r=0,l(t))}function o(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||Vc(r)?n(r):(e.consume(r),o)}function l(t){return 64===t?(e.consume(t),c):Hc(t)?(e.consume(t),l):n(t)}function c(e){return qc(e)?d(e):n(e)}function d(n){return 46===n?(e.consume(n),r=0,c):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):u(n)}function u(t){if((45===t||qc(t))&&r++<63){const n=45===t?u:d;return e.consume(t),n}return n(t)}}};const ud={partial:!0,tokenize:function(e,t,n){return function(t){return Xc(t)?nd(e,r,"linePrefix")(t):r(t)};function r(e){return null===e||Kc(e)?t(e):n(e)}}};const hd={continuation:{tokenize:function(e,t,n){const r=this;return function(t){if(Xc(t))return nd(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return s(t)};function s(r){return e.attempt(hd,t,n)(r)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),s}return n(t)};function s(n){return Xc(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}};const md={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return Jc(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const fd={name:"characterReference",tokenize:function(e,t,n){const r=this;let s,i,a=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),o};function o(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,i=qc,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,i=Gc,c):(e.enter("characterReferenceValue"),s=7,i=Wc,c(t))}function c(o){if(59===o&&a){const s=e.exit("characterReferenceValue");return i!==qc||Ic(r.sliceSerialize(s))?(e.enter("characterReferenceMarker"),e.consume(o),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(o)}return i(o)&&a++<s?(e.consume(o),c):n(o)}}};const pd={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s};function s(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}},gd={concrete:!0,name:"codeFenced",tokenize:function(e,t,n){const r=this,s={partial:!0,tokenize:function(e,t,n){let s=0;return a;function a(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),Xc(t)?nd(e,c,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===i?(e.enter("codeFencedFenceSequence"),d(t)):n(t)}function d(t){return t===i?(s++,e.consume(t),d):s>=o?(e.exit("codeFencedFenceSequence"),Xc(t)?nd(e,u,"whitespace")(t):u(t)):n(t)}function u(r){return null===r||Kc(r)?(e.exit("codeFencedFence"),t(r)):n(r)}}};let i,a=0,o=0;return function(t){return function(t){const n=r.events[r.events.length-1];return a=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,i=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===i?(o++,e.consume(t),l):o<3?n(t):(e.exit("codeFencedFenceSequence"),Xc(t)?nd(e,c,"whitespace")(t):c(t))}function c(n){return null===n||Kc(n)?(e.exit("codeFencedFence"),r.interrupt?t(n):e.check(pd,m,y)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(n))}function d(t){return null===t||Kc(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(t)):Xc(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),nd(e,u,"whitespace")(t)):96===t&&t===i?n(t):(e.consume(t),d)}function u(t){return null===t||Kc(t)?c(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return null===t||Kc(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(t)):96===t&&t===i?n(t):(e.consume(t),h)}function m(t){return e.attempt(s,y,f)(t)}function f(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),p}function p(t){return a>0&&Xc(t)?nd(e,g,"linePrefix",a+1)(t):g(t)}function g(t){return null===t||Kc(t)?e.check(pd,m,y)(t):(e.enter("codeFlowValue"),x(t))}function x(t){return null===t||Kc(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),x)}function y(n){return e.exit("codeFenced"),t(n)}}};const xd={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),nd(e,s,"linePrefix",5)(t)};function s(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?i(e):n(e)}function i(t){return null===t?o(t):Kc(t)?e.attempt(yd,i,o)(t):(e.enter("codeFlowValue"),a(t))}function a(t){return null===t||Kc(t)?(e.exit("codeFlowValue"),i(t)):(e.consume(t),a)}function o(n){return e.exit("codeIndented"),t(n)}}},yd={partial:!0,tokenize:function(e,t,n){const r=this;return s;function s(t){return r.parser.lazy[r.now().line]?n(t):Kc(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):nd(e,i,"linePrefix",5)(t)}function i(e){const i=r.events[r.events.length-1];return i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?t(e):Kc(e)?s(e):n(e)}}};const bd={name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,n,r=e.length-4,s=3;if(!("lineEnding"!==e[s][1].type&&"space"!==e[s][1].type||"lineEnding"!==e[r][1].type&&"space"!==e[r][1].type))for(t=s;++t<r;)if("codeTextData"===e[t][1].type){e[s][1].type="codeTextPadding",e[r][1].type="codeTextPadding",s+=2,r-=2;break}t=s-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},tokenize:function(e,t,n){let r,s,i=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),a(t)};function a(t){return 96===t?(e.consume(t),i++,a):(e.exit("codeTextSequence"),o(t))}function o(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),o):96===t?(s=e.enter("codeTextSequence"),r=0,c(t)):Kc(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||Kc(t)?(e.exit("codeTextData"),o(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),r++,c):r===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(s.type="codeTextData",l(n))}}};class vd{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=null==t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const r=t||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return n&&wd(this.left,n),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),wd(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),wd(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&0===this.right.length||e<0&&0===this.left.length))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);wd(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);wd(this.left,t.reverse())}}}function wd(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function jd(e){const t={};let n,r,s,i,a,o,l,c=-1;const d=new vd(e);for(;++c<d.length;){for(;c in t;)c=t[c];if(n=d.get(c),c&&"chunkFlow"===n[1].type&&"listItemPrefix"===d.get(c-1)[1].type&&(o=n[1]._tokenizer.events,s=0,s<o.length&&"lineEndingBlank"===o[s][1].type&&(s+=2),s<o.length&&"content"===o[s][1].type))for(;++s<o.length&&"content"!==o[s][1].type;)"chunkText"===o[s][1].type&&(o[s][1]._isInFirstContentOfListItem=!0,s++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,Nd(d,c)),c=t[c],l=!0);else if(n[1]._container){for(s=c,r=void 0;s--;)if(i=d.get(s),"lineEnding"===i[1].type||"lineEndingBlank"===i[1].type)"enter"===i[0]&&(r&&(d.get(r)[1].type="lineEndingBlank"),i[1].type="lineEnding",r=s);else if("linePrefix"!==i[1].type&&"listItemIndent"!==i[1].type)break;r&&(n[1].end={...d.get(r)[1].start},a=d.slice(r,c),a.unshift(n),d.splice(r,c-r+1,a))}}return Rc(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!l}function Nd(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const i=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const o=a.events,l=[],c={};let d,u,h=-1,m=n,f=0,p=0;const g=[p];for(;m;){for(;e.get(++s)[1]!==m;);i.push(s),m._tokenizer||(d=r.sliceStream(m),m.next||d.push(null),u&&a.defineSkip(m.start),m._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(d),m._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),u=m,m=m.next}for(m=n;++h<o.length;)"exit"===o[h][0]&&"enter"===o[h-1][0]&&o[h][1].type===o[h-1][1].type&&o[h][1].start.line!==o[h][1].end.line&&(p=h+1,g.push(p),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(a.events=[],m?(m._tokenizer=void 0,m.previous=void 0):g.pop(),h=g.length;h--;){const t=o.slice(g[h],g[h+1]),n=i.pop();l.push([n,n+t.length-1]),e.splice(n,2,t)}for(l.reverse(),h=-1;++h<l.length;)c[f+l[h][0]]=f+l[h][1],f+=l[h][1]-l[h][0]-1;return c}const kd={resolve:function(e){return jd(e),e},tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?s(t):Kc(t)?e.check(_d,i,s)(t):(e.consume(t),r)}function s(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function i(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}},_d={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),nd(e,s,"linePrefix")};function s(s){if(null===s||Kc(s))return n(s);const i=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?t(s):e.interrupt(r.parser.constructs.flow,n,t)(s)}}};function Sd(e,t,n,r,s,i,a,o,l){const c=l||Number.POSITIVE_INFINITY;let d=0;return function(t){if(60===t)return e.enter(r),e.enter(s),e.enter(i),e.consume(t),e.exit(i),u;if(null===t||32===t||41===t||Vc(t))return n(t);return e.enter(r),e.enter(a),e.enter(o),e.enter("chunkString",{contentType:"string"}),f(t)};function u(n){return 62===n?(e.enter(i),e.consume(n),e.exit(i),e.exit(s),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(o),u(t)):null===t||60===t||Kc(t)?n(t):(e.consume(t),92===t?m:h)}function m(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function f(s){return d||null!==s&&41!==s&&!Yc(s)?d<c&&40===s?(e.consume(s),d++,f):41===s?(e.consume(s),d--,f):null===s||32===s||40===s||Vc(s)?n(s):(e.consume(s),92===s?p:f):(e.exit("chunkString"),e.exit(o),e.exit(a),e.exit(r),t(s))}function p(t){return 40===t||41===t||92===t?(e.consume(t),f):f(t)}}function Cd(e,t,n,r,s,i){const a=this;let o,l=0;return function(t){return e.enter(r),e.enter(s),e.consume(t),e.exit(s),e.enter(i),c};function c(u){return l>999||null===u||91===u||93===u&&!o||94===u&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(u):93===u?(e.exit(i),e.enter(s),e.consume(u),e.exit(s),e.exit(r),t):Kc(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),d(u))}function d(t){return null===t||91===t||93===t||Kc(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),o||(o=!Xc(t)),92===t?u:d)}function u(t){return 91===t||92===t||93===t?(e.consume(t),l++,d):d(t)}}function Td(e,t,n,r,s,i){let a;return function(t){if(34===t||39===t||40===t)return e.enter(r),e.enter(s),e.consume(t),e.exit(s),a=40===t?41:t,o;return n(t)};function o(n){return n===a?(e.enter(s),e.consume(n),e.exit(s),e.exit(r),t):(e.enter(i),l(n))}function l(t){return t===a?(e.exit(i),o(a)):null===t?n(t):Kc(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),nd(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===a||null===t||Kc(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?d:c)}function d(t){return t===a||92===t?(e.consume(t),c):c(t)}}function Ed(e,t){let n;return function r(s){if(Kc(s))return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r;if(Xc(s))return nd(e,r,n?"linePrefix":"lineSuffix")(s);return t(s)}}const Ad={name:"definition",tokenize:function(e,t,n){const r=this;let s;return function(t){return e.enter("definition"),function(t){return Cd.call(r,e,i,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function i(t){return s=zc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),a):n(t)}function a(t){return Yc(t)?Ed(e,o)(t):o(t)}function o(t){return Sd(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(Od,c,c)(t)}function c(t){return Xc(t)?nd(e,d,"whitespace")(t):d(t)}function d(i){return null===i||Kc(i)?(e.exit("definition"),r.parser.defined.push(s),t(i)):n(i)}}},Od={partial:!0,tokenize:function(e,t,n){return function(t){return Yc(t)?Ed(e,r)(t):n(t)};function r(t){return Td(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function s(t){return Xc(t)?nd(e,i,"whitespace")(t):i(t)}function i(e){return null===e||Kc(e)?t(e):n(e)}}};const Pd={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),r};function r(r){return Kc(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}};const Id={name:"headingAtx",resolve:function(e,t){let n,r,s=e.length-2,i=3;"whitespace"===e[i][1].type&&(i+=2);s-2>i&&"whitespace"===e[s][1].type&&(s-=2);"atxHeadingSequence"===e[s][1].type&&(i===s-1||s-4>i&&"whitespace"===e[s-2][1].type)&&(s-=i+1===s?2:4);s>i&&(n={type:"atxHeadingText",start:e[i][1].start,end:e[s][1].end},r={type:"chunkText",start:e[i][1].start,end:e[s][1].end,contentType:"text"},Rc(e,i,s-i+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e},tokenize:function(e,t,n){let r=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),s(t)}(t)};function s(t){return 35===t&&r++<6?(e.consume(t),s):null===t||Yc(t)?(e.exit("atxHeadingSequence"),i(t)):n(t)}function i(n){return 35===n?(e.enter("atxHeadingSequence"),a(n)):null===n||Kc(n)?(e.exit("atxHeading"),t(n)):Xc(n)?nd(e,i,"whitespace")(n):(e.enter("atxHeadingText"),o(n))}function a(t){return 35===t?(e.consume(t),a):(e.exit("atxHeadingSequence"),i(t))}function o(t){return null===t||35===t||Yc(t)?(e.exit("atxHeadingText"),i(t)):(e.consume(t),o)}}};const Rd=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Dd=["pre","script","style","textarea"],Ld={concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},tokenize:function(e,t,n){const r=this;let s,i,a,o,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c}(t)};function c(o){return 33===o?(e.consume(o),d):47===o?(e.consume(o),i=!0,m):63===o?(e.consume(o),s=3,r.interrupt?t:R):Bc(o)?(e.consume(o),a=String.fromCharCode(o),f):n(o)}function d(i){return 45===i?(e.consume(i),s=2,u):91===i?(e.consume(i),s=5,o=0,h):Bc(i)?(e.consume(i),s=4,r.interrupt?t:R):n(i)}function u(s){return 45===s?(e.consume(s),r.interrupt?t:R):n(s)}function h(s){const i="CDATA[";return s===i.charCodeAt(o++)?(e.consume(s),6===o?r.interrupt?t:S:h):n(s)}function m(t){return Bc(t)?(e.consume(t),a=String.fromCharCode(t),f):n(t)}function f(o){if(null===o||47===o||62===o||Yc(o)){const l=47===o,c=a.toLowerCase();return l||i||!Dd.includes(c)?Rd.includes(a.toLowerCase())?(s=6,l?(e.consume(o),p):r.interrupt?t(o):S(o)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(o):i?g(o):x(o)):(s=1,r.interrupt?t(o):S(o))}return 45===o||qc(o)?(e.consume(o),a+=String.fromCharCode(o),f):n(o)}function p(s){return 62===s?(e.consume(s),r.interrupt?t:S):n(s)}function g(t){return Xc(t)?(e.consume(t),g):k(t)}function x(t){return 47===t?(e.consume(t),k):58===t||95===t||Bc(t)?(e.consume(t),y):Xc(t)?(e.consume(t),x):k(t)}function y(t){return 45===t||46===t||58===t||95===t||qc(t)?(e.consume(t),y):b(t)}function b(t){return 61===t?(e.consume(t),v):Xc(t)?(e.consume(t),b):x(t)}function v(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,w):Xc(t)?(e.consume(t),v):j(t)}function w(t){return t===l?(e.consume(t),l=null,N):null===t||Kc(t)?n(t):(e.consume(t),w)}function j(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||Yc(t)?b(t):(e.consume(t),j)}function N(e){return 47===e||62===e||Xc(e)?x(e):n(e)}function k(t){return 62===t?(e.consume(t),_):n(t)}function _(t){return null===t||Kc(t)?S(t):Xc(t)?(e.consume(t),_):n(t)}function S(t){return 45===t&&2===s?(e.consume(t),A):60===t&&1===s?(e.consume(t),O):62===t&&4===s?(e.consume(t),D):63===t&&3===s?(e.consume(t),R):93===t&&5===s?(e.consume(t),I):!Kc(t)||6!==s&&7!==s?null===t||Kc(t)?(e.exit("htmlFlowData"),C(t)):(e.consume(t),S):(e.exit("htmlFlowData"),e.check(Md,L,C)(t))}function C(t){return e.check(Fd,T,L)(t)}function T(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),E}function E(t){return null===t||Kc(t)?C(t):(e.enter("htmlFlowData"),S(t))}function A(t){return 45===t?(e.consume(t),R):S(t)}function O(t){return 47===t?(e.consume(t),a="",P):S(t)}function P(t){if(62===t){const n=a.toLowerCase();return Dd.includes(n)?(e.consume(t),D):S(t)}return Bc(t)&&a.length<8?(e.consume(t),a+=String.fromCharCode(t),P):S(t)}function I(t){return 93===t?(e.consume(t),R):S(t)}function R(t){return 62===t?(e.consume(t),D):45===t&&2===s?(e.consume(t),R):S(t)}function D(t){return null===t||Kc(t)?(e.exit("htmlFlowData"),L(t)):(e.consume(t),D)}function L(n){return e.exit("htmlFlow"),t(n)}}},Md={partial:!0,tokenize:function(e,t,n){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(ud,t,n)}}},Fd={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(Kc(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s;return n(t)};function s(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}};const $d={name:"htmlText",tokenize:function(e,t,n){const r=this;let s,i,a;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),o};function o(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),v):63===t?(e.consume(t),y):Bc(t)?(e.consume(t),N):n(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),i=0,m):Bc(t)?(e.consume(t),x):n(t)}function c(t){return 45===t?(e.consume(t),h):n(t)}function d(t){return null===t?n(t):45===t?(e.consume(t),u):Kc(t)?(a=d,P(t)):(e.consume(t),d)}function u(t){return 45===t?(e.consume(t),h):d(t)}function h(e){return 62===e?O(e):45===e?u(e):d(e)}function m(t){const r="CDATA[";return t===r.charCodeAt(i++)?(e.consume(t),6===i?f:m):n(t)}function f(t){return null===t?n(t):93===t?(e.consume(t),p):Kc(t)?(a=f,P(t)):(e.consume(t),f)}function p(t){return 93===t?(e.consume(t),g):f(t)}function g(t){return 62===t?O(t):93===t?(e.consume(t),g):f(t)}function x(t){return null===t||62===t?O(t):Kc(t)?(a=x,P(t)):(e.consume(t),x)}function y(t){return null===t?n(t):63===t?(e.consume(t),b):Kc(t)?(a=y,P(t)):(e.consume(t),y)}function b(e){return 62===e?O(e):y(e)}function v(t){return Bc(t)?(e.consume(t),w):n(t)}function w(t){return 45===t||qc(t)?(e.consume(t),w):j(t)}function j(t){return Kc(t)?(a=j,P(t)):Xc(t)?(e.consume(t),j):O(t)}function N(t){return 45===t||qc(t)?(e.consume(t),N):47===t||62===t||Yc(t)?k(t):n(t)}function k(t){return 47===t?(e.consume(t),O):58===t||95===t||Bc(t)?(e.consume(t),_):Kc(t)?(a=k,P(t)):Xc(t)?(e.consume(t),k):O(t)}function _(t){return 45===t||46===t||58===t||95===t||qc(t)?(e.consume(t),_):S(t)}function S(t){return 61===t?(e.consume(t),C):Kc(t)?(a=S,P(t)):Xc(t)?(e.consume(t),S):k(t)}function C(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),s=t,T):Kc(t)?(a=C,P(t)):Xc(t)?(e.consume(t),C):(e.consume(t),E)}function T(t){return t===s?(e.consume(t),s=void 0,A):null===t?n(t):Kc(t)?(a=T,P(t)):(e.consume(t),T)}function E(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||Yc(t)?k(t):(e.consume(t),E)}function A(e){return 47===e||62===e||Yc(e)?k(e):n(e)}function O(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function P(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),I}function I(t){return Xc(t)?nd(e,R,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):R(t)}function R(t){return e.enter("htmlTextData"),a(t)}}};const Ud={name:"labelEnd",resolveAll:function(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),"labelImage"===r.type||"labelLink"===r.type||"labelEnd"===r.type){const e="labelImage"===r.type?4:2;r.type="data",t+=e}}e.length!==n.length&&Rc(e,0,e.length,n);return e},resolveTo:function(e,t){let n,r,s,i,a=e.length,o=0;for(;a--;)if(n=e[a][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[a][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(s){if("enter"===e[a][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=a,"labelLink"!==n.type)){o=2;break}}else"labelEnd"===n.type&&(s=a);const l={type:"labelLink"===e[r][1].type?"link":"image",start:{...e[r][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[r][1].start},end:{...e[s][1].end}},d={type:"labelText",start:{...e[r+o+2][1].end},end:{...e[s-2][1].start}};return i=[["enter",l,t],["enter",c,t]],i=Dc(i,e.slice(r+1,r+o+3)),i=Dc(i,[["enter",d,t]]),i=Dc(i,od(t.parser.constructs.insideSpan.null,e.slice(r+o+4,s-3),t)),i=Dc(i,[["exit",d,t],e[s-2],e[s-1],["exit",c,t]]),i=Dc(i,e.slice(s+1)),i=Dc(i,[["exit",l,t]]),Rc(e,r,e.length,i),e},tokenize:function(e,t,n){const r=this;let s,i,a=r.events.length;for(;a--;)if(("labelImage"===r.events[a][1].type||"labelLink"===r.events[a][1].type)&&!r.events[a][1]._balanced){s=r.events[a][1];break}return function(t){if(!s)return n(t);if(s._inactive)return d(t);return i=r.parser.defined.includes(zc(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),o};function o(t){return 40===t?e.attempt(zd,c,i?c:d)(t):91===t?e.attempt(Bd,c,i?l:d)(t):i?c(t):d(t)}function l(t){return e.attempt(qd,c,d)(t)}function c(e){return t(e)}function d(e){return s._balanced=!0,n(e)}}},zd={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),r};function r(t){return Yc(t)?Ed(e,s)(t):s(t)}function s(t){return 41===t?c(t):Sd(e,i,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function i(t){return Yc(t)?Ed(e,o)(t):c(t)}function a(e){return n(e)}function o(t){return 34===t||39===t||40===t?Td(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):c(t)}function l(t){return Yc(t)?Ed(e,c)(t):c(t)}function c(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},Bd={tokenize:function(e,t,n){const r=this;return function(t){return Cd.call(r,e,s,i,"reference","referenceMarker","referenceString")(t)};function s(e){return r.parser.defined.includes(zc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function i(e){return n(e)}}},qd={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const Hd={name:"labelStartImage",resolveAll:Ud.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),s};function s(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),i):n(t)}function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};const Vd={name:"labelStartLink",resolveAll:Ud.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),s};function s(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};const Wd={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),nd(e,t,"linePrefix")}}};const Gd={name:"thematicBreak",tokenize:function(e,t,n){let r,s=0;return function(t){return e.enter("thematicBreak"),function(e){return r=e,i(e)}(t)};function i(i){return i===r?(e.enter("thematicBreakSequence"),a(i)):s>=3&&(null===i||Kc(i))?(e.exit("thematicBreak"),t(i)):n(i)}function a(t){return t===r?(e.consume(t),s++,a):(e.exit("thematicBreakSequence"),Xc(t)?nd(e,i,"whitespace")(t):i(t))}}};const Jd={continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(ud,(function(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,nd(e,t,"listItemIndent",r.containerState.size+1)(n)}),(function(n){if(r.containerState.furtherBlankLines||!Xc(n))return r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(n);return r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Yd,t,s)(n)}));function s(s){return r.containerState._closeFlow=!0,r.interrupt=void 0,nd(e,e.attempt(Jd,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,n){const r=this,s=r.events[r.events.length-1];let i=s&&"linePrefix"===s[1].type?s[2].sliceSerialize(s[1],!0).length:0,a=0;return function(t){const s=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===s?!r.containerState.marker||t===r.containerState.marker:Wc(t)){if(r.containerState.type||(r.containerState.type=s,e.enter(s,{_container:!0})),"listUnordered"===s)return e.enter("listItemPrefix"),42===t||45===t?e.check(Gd,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),o(t)}return n(t)};function o(t){return Wc(t)&&++a<10?(e.consume(t),o):(!r.interrupt||a<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(ud,r.interrupt?n:c,e.attempt(Kd,u,d))}function c(e){return r.containerState.initialBlankLine=!0,i++,u(e)}function d(t){return Xc(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),u):n(t)}function u(n){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}},Kd={partial:!0,tokenize:function(e,t,n){const r=this;return nd(e,(function(e){const s=r.events[r.events.length-1];return!Xc(e)&&s&&"listItemPrefixWhitespace"===s[1].type?t(e):n(e)}),"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},Yd={partial:!0,tokenize:function(e,t,n){const r=this;return nd(e,(function(e){const s=r.events[r.events.length-1];return s&&"listItemIndent"===s[1].type&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?t(e):n(e)}),"listItemIndent",r.containerState.size+1)}};const Xd={name:"setextUnderline",resolveTo:function(e,t){let n,r,s,i=e.length;for(;i--;)if("enter"===e[i][0]){if("content"===e[i][1].type){n=i;break}"paragraph"===e[i][1].type&&(r=i)}else"content"===e[i][1].type&&e.splice(i,1),s||"definition"!==e[i][1].type||(s=i);const a={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};e[r][1].type="setextHeadingText",s?(e.splice(r,0,["enter",a,t]),e.splice(s+1,0,["exit",e[n][1],t]),e[n][1].end={...e[s][1].end}):e[n][1]=a;return e.push(["exit",a,t]),e},tokenize:function(e,t,n){const r=this;let s;return function(t){let a,o=r.events.length;for(;o--;)if("lineEnding"!==r.events[o][1].type&&"linePrefix"!==r.events[o][1].type&&"content"!==r.events[o][1].type){a="paragraph"===r.events[o][1].type;break}if(!r.parser.lazy[r.now().line]&&(r.interrupt||a))return e.enter("setextHeadingLine"),s=t,function(t){return e.enter("setextHeadingLineSequence"),i(t)}(t);return n(t)};function i(t){return t===s?(e.consume(t),i):(e.exit("setextHeadingLineSequence"),Xc(t)?nd(e,a,"lineSuffix")(t):a(t))}function a(r){return null===r||Kc(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}}};const Qd={tokenize:function(e){const t=this,n=e.attempt(ud,(function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,r,nd(e,e.attempt(this.parser.constructs.flow,r,e.attempt(kd,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};const Zd={resolveAll:ru()},eu=nu("string"),tu=nu("text");function nu(e){return{resolveAll:ru("text"===e?su:void 0),tokenize:function(t){const n=this,r=this.parser.constructs[e],s=t.attempt(r,i,a);return i;function i(e){return l(e)?s(e):a(e)}function a(e){if(null!==e)return t.enter("data"),t.consume(e),o;t.consume(e)}function o(e){return l(e)?(t.exit("data"),s(e)):(t.consume(e),o)}function l(e){if(null===e)return!0;const t=r[e];let s=-1;if(t)for(;++s<t.length;){const e=t[s];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}}function ru(e){return function(t,n){let r,s=-1;for(;++s<=t.length;)void 0===r?t[s]&&"data"===t[s][1].type&&(r=s,s++):t[s]&&"data"===t[s][1].type||(s!==r+2&&(t[r][1].end=t[s-1][1].end,t.splice(r+2,s-r-2),s=r+2),r=void 0);return e?e(t,n):t}}function su(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],s=t.sliceStream(r);let i,a=s.length,o=-1,l=0;for(;a--;){const e=s[a];if("string"==typeof e){for(o=e.length;32===e.charCodeAt(o-1);)l++,o--;if(o)break;o=-1}else if(-2===e)i=!0,l++;else if(-1!==e){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const s={type:n===e.length||i||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...s.start},r.start.offset===r.end.offset?Object.assign(r,s):(e.splice(n,0,["enter",s,t],["exit",s,t]),n+=2)}n++}return e}const iu={42:Jd,43:Jd,45:Jd,48:Jd,49:Jd,50:Jd,51:Jd,52:Jd,53:Jd,54:Jd,55:Jd,56:Jd,57:Jd,62:hd},au={91:Ad},ou={[-2]:xd,[-1]:xd,32:xd},lu={35:Id,42:Gd,45:[Xd,Gd],60:Ld,61:Xd,95:Gd,96:gd,126:gd},cu={38:fd,92:md},du={[-5]:Wd,[-4]:Wd,[-3]:Wd,33:Hd,38:fd,42:ld,60:[dd,$d],91:Vd,92:[Pd,md],93:Ud,95:ld,96:bd},uu={null:[ld,Zd]},hu=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:{null:[42,95]},contentInitial:au,disable:{null:[]},document:iu,flow:lu,flowInitial:ou,insideSpan:uu,string:cu,text:du},Symbol.toStringTag,{value:"Module"}));function mu(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},i=[];let a=[],o=[];const l={attempt:g((function(e,t){x(e,t.from)})),check:g(p),consume:function(e){Kc(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,y()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++));c.previous=e},enter:function(e,t){const n=t||{};return n.type=e,n.start=h(),c.events.push(["enter",n,c]),o.push(n),n},exit:function(e){const t=o.pop();return t.end=h(),c.events.push(["exit",t,c]),t},interrupt:g(p,{interrupt:!0})},c={code:null,containerState:{},defineSkip:function(e){s[e.line]=e.column,y()},events:[],now:h,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const i=e[n];let a;if("string"==typeof i)a=i;else switch(i){case-5:a="\r";break;case-4:a="\n";break;case-3:a="\r\n";break;case-2:a=t?" ":"\t";break;case-1:if(!t&&s)continue;a=" ";break;default:a=String.fromCharCode(i)}s=-2===i,r.push(a)}return r.join("")}(u(e),t)},sliceStream:u,write:function(e){if(a=Dc(a,e),m(),null!==a[a.length-1])return[];return x(t,0),c.events=od(i,c.events,c),c.events}};let d=t.tokenize.call(c,l);return t.resolveAll&&i.push(t),c;function u(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let a;if(n===s)a=[e[n].slice(r,i)];else{if(a=e.slice(n,s),r>-1){const e=a[0];"string"==typeof e?a[0]=e.slice(r):a.shift()}i>0&&a.push(e[s].slice(0,i))}return a}(a,e)}function h(){const{_bufferIndex:e,_index:t,line:n,column:s,offset:i}=r;return{_bufferIndex:e,_index:t,line:n,column:s,offset:i}}function m(){let e;for(;r._index<a.length;){const t=a[r._index];if("string"==typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)f(t.charCodeAt(r._bufferIndex));else f(t)}}function f(e){d=d(e)}function p(e,t){t.restore()}function g(e,t){return function(n,s,i){let a,d,u,m;return Array.isArray(n)?f(n):"tokenize"in n?f([n]):function(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null;return f([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}(n);function f(e){return a=e,d=0,0===e.length?i:p(e[d])}function p(e){return function(n){m=function(){const e=h(),t=c.previous,n=c.currentConstruct,s=c.events.length,i=Array.from(o);return{from:s,restore:a};function a(){r=e,c.previous=t,c.currentConstruct=n,c.events.length=s,o=i,y()}}(),u=e,e.partial||(c.currentConstruct=e);if(e.name&&c.parser.constructs.disable.null.includes(e.name))return x();return e.tokenize.call(t?Object.assign(Object.create(c),t):c,l,g,x)(n)}}function g(t){return e(u,m),s}function x(e){return m.restore(),++d<a.length?p(a[d]):i}}}function x(e,t){e.resolveAll&&!i.includes(e)&&i.push(e),e.resolve&&Rc(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function y(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}const fu=/[\0\t\n\r]/g;const pu=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function gu(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return Uc(n.slice(t?2:1),t?16:10)}return Ic(n)||e}const xu={}.hasOwnProperty;function yu(e,t,n){return"string"!=typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(te),autolinkProtocol:_,autolinkEmail:_,atxHeading:i(X),blockQuote:i(W),characterEscape:_,characterReference:_,codeFenced:i(G),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:i(G,a),codeText:i(J,a),codeTextData:_,data:_,codeFlowValue:_,definition:i(K),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:i(Y),hardBreakEscape:i(Q),hardBreakTrailing:i(Q),htmlFlow:i(Z,a),htmlFlowData:_,htmlText:i(Z,a),htmlTextData:_,image:i(ee),label:a,link:i(te),listItem:i(re),listItemValue:h,listOrdered:i(ne,u),listUnordered:i(ne),paragraph:i(se),reference:$,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:i(X),strong:i(ie),thematicBreak:i(oe)},exit:{atxHeading:l(),atxHeadingSequence:w,autolink:l(),autolinkEmail:V,autolinkProtocol:H,blockQuote:l(),characterEscapeValue:S,characterReferenceMarkerHexadecimal:z,characterReferenceMarkerNumeric:z,characterReferenceValue:B,characterReference:q,codeFenced:l(g),codeFencedFence:p,codeFencedFenceInfo:m,codeFencedFenceMeta:f,codeFlowValue:S,codeIndented:l(x),codeText:l(O),codeTextData:S,data:S,definition:l(),definitionDestinationString:v,definitionLabelString:y,definitionTitleString:b,emphasis:l(),hardBreakEscape:l(T),hardBreakTrailing:l(T),htmlFlow:l(E),htmlFlowData:S,htmlText:l(A),htmlTextData:S,image:l(I),label:D,labelText:R,lineEnding:C,link:l(P),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:U,resourceDestinationString:L,resourceTitleString:M,resource:F,setextHeading:l(k),setextHeadingLineSequence:N,setextHeadingText:j,strong:l(),thematicBreak:l()}};vu(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(e){let r={type:"root",children:[]};const i={stack:[r],tokenStack:[],config:t,enter:o,exit:c,buffer:a,resume:d,data:n},l=[];let u=-1;for(;++u<e.length;)if("listOrdered"===e[u][1].type||"listUnordered"===e[u][1].type)if("enter"===e[u][0])l.push(u);else{u=s(e,l.pop(),u)}for(u=-1;++u<e.length;){const n=t[e[u][0]];xu.call(n,e[u][1].type)&&n[e[u][1].type].call(Object.assign({sliceSerialize:e[u][2].sliceSerialize},i),e[u][1])}if(i.tokenStack.length>0){const e=i.tokenStack[i.tokenStack.length-1];(e[1]||ju).call(i,void 0,e[0])}for(r.position={start:bu(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:bu(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},u=-1;++u<t.transforms.length;)r=t.transforms[u](r)||r;return r}function s(e,t,n){let r,s,i,a,o=t-1,l=-1,c=!1;for(;++o<=n;){const t=e[o];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,a=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!r||a||l||i||(i=o),a=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:a=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let a=o;for(s=void 0;a--;){const t=e[a];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;s&&(e[s][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",s=a}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}i&&(!s||i<s)&&(r._spread=!0),r.end=Object.assign({},s?e[s][1].start:t[1].end),e.splice(s||o,0,["exit",r,t[2]]),o++,n++}if("listItemPrefix"===t[1].type){const s={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};r=s,e.splice(o,0,["enter",s,t[2]]),o++,n++,i=void 0,a=!0}}}return e[t][1]._spread=c,n}function i(e,t){return n;function n(n){o.call(this,e(n),n),t&&t.call(this,n)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n||void 0]),e.position={start:bu(t.start),end:void 0}}function l(e){return t;function t(t){e&&e.call(this,t),c.call(this,t)}}function c(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+ac({start:e.start,end:e.end})+"): its not open");if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{(r[1]||ju).call(this,e,r[0])}n.position.end=bu(e.end)}function d(){return Ec(this.stack.pop())}function u(){this.data.expectingFirstListItemValue=!0}function h(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function m(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function f(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function p(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function y(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=zc(this.sliceSerialize(e)).toLowerCase()}function b(){const e=this.resume();this.stack[this.stack.length-1].title=e}function v(){const e=this.resume();this.stack[this.stack.length-1].url=e}function w(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function j(){this.data.setextHeadingSlurpLineEnding=!0}function N(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function k(){this.data.setextHeadingSlurpLineEnding=void 0}function _(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n=ae(),n.position={start:bu(e.start),end:void 0},t.push(n)),this.stack.push(n)}function S(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=bu(e.end)}function C(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=bu(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(_.call(this,e),S.call(this,e))}function T(){this.data.atHardBreak=!0}function E(){const e=this.resume();this.stack[this.stack.length-1].value=e}function A(){const e=this.resume();this.stack[this.stack.length-1].value=e}function O(){const e=this.resume();this.stack[this.stack.length-1].value=e}function P(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function I(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function R(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(pu,gu)}(t),n.identifier=zc(t).toLowerCase()}function D(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function L(){const e=this.resume();this.stack[this.stack.length-1].url=e}function M(){const e=this.resume();this.stack[this.stack.length-1].title=e}function F(){this.data.inReference=void 0}function $(){this.data.referenceType="collapsed"}function U(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=zc(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function z(e){this.data.characterReferenceType=e.type}function B(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let r;if(n)r=Uc(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{r=Ic(t)}this.stack[this.stack.length-1].value+=r}function q(e){this.stack.pop().position.end=bu(e.end)}function H(e){S.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function V(e){S.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function W(){return{type:"blockquote",children:[]}}function G(){return{type:"code",lang:null,meta:null,value:""}}function J(){return{type:"inlineCode",value:""}}function K(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Y(){return{type:"emphasis",children:[]}}function X(){return{type:"heading",depth:0,children:[]}}function Q(){return{type:"break"}}function Z(){return{type:"html",value:""}}function ee(){return{type:"image",title:null,url:"",alt:null}}function te(){return{type:"link",title:null,url:"",children:[]}}function ne(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function re(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function se(){return{type:"paragraph",children:[]}}function ie(){return{type:"strong",children:[]}}function ae(){return{type:"text",value:""}}function oe(){return{type:"thematicBreak"}}}(n)(function(e){for(;!jd(e););return e}(function(e){const t={constructs:Mc([hu,...(e||{}).extensions||[]]),content:n(rd),defined:[],document:n(sd),flow:n(Qd),lazy:{},string:n(eu),text:n(tu)};return t;function n(e){return function(n){return mu(t,e,n)}}}(n).document().write(function(){let e,t=1,n="",r=!0;return function(s,i,a){const o=[];let l,c,d,u,h;for(s=n+("string"==typeof s?s.toString():new TextDecoder(i||void 0).decode(s)),d=0,n="",r&&(65279===s.charCodeAt(0)&&d++,r=void 0);d<s.length;){if(fu.lastIndex=d,l=fu.exec(s),u=l&&void 0!==l.index?l.index:s.length,h=s.charCodeAt(u),!l){n=s.slice(d);break}if(10===h&&d===u&&e)o.push(-3),e=void 0;else switch(e&&(o.push(-5),e=void 0),d<u&&(o.push(s.slice(d,u)),t+=u-d),h){case 0:o.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),o.push(-2);t++<c;)o.push(-1);break;case 10:o.push(-4),t=1;break;default:e=!0,t=1}d=u+1}return a&&(e&&o.push(-5),n&&o.push(n),o.push(null)),o}}()(e,t,!0))))}function bu(e){return{line:e.line,column:e.column,offset:e.offset}}function vu(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?vu(e,r):wu(e,r)}}function wu(e,t){let n;for(n in t)if(xu.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function ju(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+ac({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+ac({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+ac({start:t.start,end:t.end})+") is still open")}function Nu(e){const t=this;t.parser=function(n){return yu(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function ku(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),i=s[0];i&&"text"===i.type?i.value="["+i.value:s.unshift({type:"text",value:"["});const a=s[s.length-1];return a&&"text"===a.type?a.value+=r:s.push({type:"text",value:r}),s}function _u(e){const t=e.spread;return null==t?e.children.length>1:t}function Su(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const i=[];for(;r;)i.push(Cu(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return i.push(Cu(t.slice(s),s>0,!1)),i.join("")}function Cu(e,t,n){let r=0,s=e.length;if(t){let t=e.codePointAt(r);for(;9===t||32===t;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(s-1);for(;9===t||32===t;)s--,t=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}const Tu={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",r={};t.lang&&(r.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=td(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);let a,o=e.footnoteCounts.get(r);void 0===o?(o=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=i+1,o+=1,e.footnoteCounts.set(r,o);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return ku(e,t);const s={src:td(r.url||""),alt:t.alt};null!==r.title&&void 0!==r.title&&(s.title=r.title);const i={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,i),e.applyData(t,i)},image:function(e,t){const n={src:td(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return ku(e,t);const s={href:td(r.url||"")};null!==r.title&&void 0!==r.title&&(s.title=r.title);const i={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},link:function(e,t){const n={href:td(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},listItem:function(e,t,n){const r=e.all(t),s=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=_u(n[r])}return t}(n):_u(t),i={},a=[];if("boolean"==typeof t.checked){const e=r[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},r.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const e=r[o];(s||0!==o||"element"!==e.type||"p"!==e.tagName)&&a.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||s?a.push(e):a.push(...e.children)}const l=r[r.length-1];l&&(s||"element"!==l.type||"p"!==l.tagName)&&a.push({type:"text",value:"\n"});const c={type:"element",tagName:"li",properties:i,children:a};return e.patch(t,c),e.applyData(t,c)},list:function(e,t){const n={},r=e.all(t);let s=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++s<r.length;){const e=r[s];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),s.push(n)}if(n.length>0){const r={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},i=sc(t.children[1]),a=rc(t.children[t.children.length-1]);i&&a&&(r.position={start:i,end:a}),s.push(r)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const r=n?n.children:void 0,s=0===(r?r.indexOf(t):1)?"th":"td",i=n&&"table"===n.type?n.align:void 0,a=i?i.length:t.children.length;let o=-1;const l=[];for(;++o<a;){const n=t.children[o],r={},a=i?i[o]:void 0;a&&(r.align=a);let c={type:"element",tagName:s,properties:r,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(n,c)),l.push(c)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){const n={type:"text",value:Su(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:Eu,yaml:Eu,definition:Eu,footnoteDefinition:Eu};function Eu(){}const Au="object"==typeof self?self:globalThis,Ou=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),r=s=>{if(e.has(s))return e.get(s);const[i,a]=t[s];switch(i){case 0:case-1:return n(a,s);case 1:{const e=n([],s);for(const t of a)e.push(r(t));return e}case 2:{const e=n({},s);for(const[t,n]of a)e[r(t)]=r(n);return e}case 3:return n(new Date(a),s);case 4:{const{source:e,flags:t}=a;return n(new RegExp(e,t),s)}case 5:{const e=n(new Map,s);for(const[t,n]of a)e.set(r(t),r(n));return e}case 6:{const e=n(new Set,s);for(const t of a)e.add(r(t));return e}case 7:{const{name:e,message:t}=a;return n(new Au[e](t),s)}case 8:return n(BigInt(a),s);case"BigInt":return n(Object(BigInt(a)),s);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:e}=new Uint8Array(a);return n(new DataView(e),a)}}return n(new Au[i](a),s)};return r})(new Map,e)(0),Pu="",{toString:Iu}={},{keys:Ru}=Object,Du=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=Iu.call(e).slice(8,-1);switch(n){case"Array":return[1,Pu];case"Object":return[2,Pu];case"Date":return[3,Pu];case"RegExp":return[4,Pu];case"Map":return[5,Pu];case"Set":return[6,Pu];case"DataView":return[1,n]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},Lu=([e,t])=>0===e&&("function"===t||"symbol"===t),Mu=(e,{json:t,lossy:n}={})=>{const r=[];return((e,t,n,r)=>{const s=(e,t)=>{const s=r.push(e)-1;return n.set(t,s),s},i=r=>{if(n.has(r))return n.get(r);let[a,o]=Du(r);switch(a){case 0:{let t=r;switch(o){case"bigint":a=8,t=r.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+o);t=null;break;case"undefined":return s([-1],r)}return s([a,t],r)}case 1:{if(o){let e=r;return"DataView"===o?e=new Uint8Array(r.buffer):"ArrayBuffer"===o&&(e=new Uint8Array(r)),s([o,[...e]],r)}const e=[],t=s([a,e],r);for(const n of r)e.push(i(n));return t}case 2:{if(o)switch(o){case"BigInt":return s([o,r.toString()],r);case"Boolean":case"Number":case"String":return s([o,r.valueOf()],r)}if(t&&"toJSON"in r)return i(r.toJSON());const n=[],l=s([a,n],r);for(const t of Ru(r))!e&&Lu(Du(r[t]))||n.push([i(t),i(r[t])]);return l}case 3:return s([a,r.toISOString()],r);case 4:{const{source:e,flags:t}=r;return s([a,{source:e,flags:t}],r)}case 5:{const t=[],n=s([a,t],r);for(const[s,a]of r)(e||!Lu(Du(s))&&!Lu(Du(a)))&&t.push([i(s),i(a)]);return n}case 6:{const t=[],n=s([a,t],r);for(const s of r)!e&&Lu(Du(s))||t.push(i(s));return n}}const{message:l}=r;return s([a,{name:o,message:l}],r)};return i})(!(t||n),!!t,new Map,r)(e),r},Fu="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?Ou(Mu(e,t)):structuredClone(e):(e,t)=>Ou(Mu(e,t));function $u(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Uu(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const zu=function(e){if(null==e)return qu;if("function"==typeof e)return Bu(e);if("object"==typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=zu(e[n]);return Bu(r);function r(...e){let n=-1;for(;++n<t.length;)if(t[n].apply(this,e))return!0;return!1}}(e):function(e){const t=e;return Bu(n);function n(n){const r=n;let s;for(s in e)if(r[s]!==t[s])return!1;return!0}}(e);if("string"==typeof e)return function(e){return Bu(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function Bu(e){return function(t,n,r){return Boolean(function(e){return null!==e&&"object"==typeof e&&"type"in e}(t)&&e.call(this,t,"number"==typeof n?n:void 0,r||void 0))}}function qu(){return!0}const Hu=[],Vu=!0,Wu=!1;function Gu(e,t,n,r){let s;"function"==typeof t&&"function"!=typeof n?(r=n,n=t):s=t;const i=zu(s),a=r?-1:1;!function e(s,o,l){const c=s&&"object"==typeof s?s:{};if("string"==typeof c.type){const e="string"==typeof c.tagName?c.tagName:"string"==typeof c.name?c.name:void 0;Object.defineProperty(d,"name",{value:"node ("+s.type+(e?"<"+e+">":"")+")"})}return d;function d(){let c,d,u,h=Hu;if((!t||i(s,o,l[l.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"==typeof e)return[Vu,e];return null==e?Hu:[e]}(n(s,l)),h[0]===Wu))return h;if("children"in s&&s.children){const t=s;if(t.children&&"skip"!==h[0])for(d=(r?t.children.length:-1)+a,u=l.concat(t);d>-1&&d<t.children.length;){const n=t.children[d];if(c=e(n,d,u)(),c[0]===Wu)return c;d="number"==typeof c[1]?c[1]:d+a}}return h}}(e,void 0,[])()}function Ju(e,t,n,r){let s,i,a;"function"==typeof t?(i=void 0,a=t,s=n):(i=t,a=n,s=r),Gu(e,i,(function(e,t){const n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return a(e,r,n)}),s)}const Ku={}.hasOwnProperty,Yu={};function Xu(e,t){e.position&&(t.position=function(e){const t=sc(e),n=rc(e);if(t&&n)return{start:t,end:n}}(e))}function Qu(e,t){let n=t;if(e&&e.data){const t=e.data.hName,r=e.data.hChildren,s=e.data.hProperties;if("string"==typeof t)if("element"===n.type)n.tagName=t;else{n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&s&&Object.assign(n.properties,Fu(s)),"children"in n&&n.children&&null!=r&&(n.children=r)}return n}function Zu(e,t){const n=t.data||{},r=!("value"in t)||Ku.call(n,"hProperties")||Ku.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,r),e.applyData(t,r)}function eh(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function th(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function nh(e,t){const n=function(e,t){const n=t||Yu,r=new Map,s=new Map,i=new Map,a={...Tu,...n.handlers},o={all:function(e){const t=[];if("children"in e){const n=e.children;let r=-1;for(;++r<n.length;){const s=o.one(n[r],e);if(s){if(r&&"break"===n[r-1].type&&(Array.isArray(s)||"text"!==s.type||(s.value=th(s.value)),!Array.isArray(s)&&"element"===s.type)){const e=s.children[0];e&&"text"===e.type&&(e.value=th(e.value))}Array.isArray(s)?t.push(...s):t.push(s)}}}return t},applyData:Qu,definitionById:r,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:a,one:function(e,t){const n=e.type,r=o.handlers[n];if(Ku.call(o.handlers,n)&&r)return r(o,e,t);if(o.options.passThrough&&o.options.passThrough.includes(n)){if("children"in e){const{children:t,...n}=e,r=Fu(n);return r.children=o.all(e),r}return Fu(e)}return(o.options.unknownHandler||Zu)(o,e,t)},options:n,patch:Xu,wrap:eh};return Ju(e,(function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?r:s,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}})),o}(e,t),r=n.one(e,void 0),s=function(e){const t="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||$u,r=e.options.footnoteBackLabel||Uu,s=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<e.footnoteOrder.length;){const s=e.footnoteById.get(e.footnoteOrder[l]);if(!s)continue;const i=e.all(s),a=String(s.identifier).toUpperCase(),c=td(a.toLowerCase());let d=0;const u=[],h=e.footnoteCounts.get(a);for(;void 0!==h&&++d<=h;){u.length>0&&u.push({type:"text",value:" "});let e="string"==typeof n?n:n(l,d);"string"==typeof e&&(e={type:"text",value:e}),u.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+c+(d>1?"-"+d:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof r?r:r(l,d),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const m=i[i.length-1];if(m&&"element"===m.type&&"p"===m.tagName){const e=m.children[m.children.length-1];e&&"text"===e.type?e.value+=" ":m.children.push({type:"text",value:" "}),m.children.push(...u)}else i.push(...u);const f={type:"element",tagName:"li",properties:{id:t+"fn-"+c},children:e.wrap(i,!0)};e.patch(s,f),o.push(f)}if(0!==o.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...Fu(a),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:"\n"}]}}(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&i.children.push({type:"text",value:"\n"},s),i}function rh(e,t){return e&&"run"in e?async function(n,r){const s=nh(n,{file:r,...t});await e.run(s,r)}:function(n,r){return nh(n,{file:r,...e||t})}}function sh(e){if(e)throw e}var ih=Object.prototype.hasOwnProperty,ah=Object.prototype.toString,oh=Object.defineProperty,lh=Object.getOwnPropertyDescriptor,ch=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===ah.call(e)},dh=function(e){if(!e||"[object Object]"!==ah.call(e))return!1;var t,n=ih.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&ih.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;for(t in e);return void 0===t||ih.call(e,t)},uh=function(e,t){oh&&"__proto__"===t.name?oh(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},hh=function(e,t){if("__proto__"===t){if(!ih.call(e,t))return;if(lh)return lh(e,t).value}return e[t]},mh=function e(){var t,n,r,s,i,a,o=arguments[0],l=1,c=arguments.length,d=!1;for("boolean"==typeof o&&(d=o,o=arguments[1]||{},l=2),(null==o||"object"!=typeof o&&"function"!=typeof o)&&(o={});l<c;++l)if(null!=(t=arguments[l]))for(n in t)r=hh(o,n),o!==(s=hh(t,n))&&(d&&s&&(dh(s)||(i=ch(s)))?(i?(i=!1,a=r&&ch(r)?r:[]):a=r&&dh(r)?r:{},uh(o,{name:n,newValue:e(d,a,s)})):void 0!==s&&uh(o,{name:n,newValue:s}));return o};const fh=a(mh);function ph(e){if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)}function gh(){const e=[],t={run:function(...t){let n=-1;const r=t.pop();if("function"!=typeof r)throw new TypeError("Expected function as last argument, not "+r);!function s(i,...a){const o=e[++n];let l=-1;if(i)r(i);else{for(;++l<t.length;)null!==a[l]&&void 0!==a[l]||(a[l]=t[l]);t=a,o?function(e,t){let n;return r;function r(...t){const r=e.length>t.length;let o;r&&t.push(s);try{o=e.apply(this,t)}catch(i){if(r&&n)throw i;return s(i)}r||(o&&o.then&&"function"==typeof o.then?o.then(a,s):o instanceof Error?s(o):a(o))}function s(e,...r){n||(n=!0,t(e,...r))}function a(e){s(null,e)}}(o,s)(...a):r(null,...a)}}(null,...t)},use:function(n){if("function"!=typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const xh={basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');yh(e);let n,r=0,s=-1,i=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;i--;)if(47===e.codePointAt(i)){if(n){r=i+1;break}}else s<0&&(n=!0,s=i+1);return s<0?"":e.slice(r,s)}if(t===e)return"";let a=-1,o=t.length-1;for(;i--;)if(47===e.codePointAt(i)){if(n){r=i+1;break}}else a<0&&(n=!0,a=i+1),o>-1&&(e.codePointAt(i)===t.codePointAt(o--)?o<0&&(s=i):(o=-1,s=a));r===s?s=a:s<0&&(s=e.length);return e.slice(r,s)},dirname:function(e){if(yh(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.codePointAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){yh(e);let t,n=e.length,r=-1,s=0,i=-1,a=0;for(;n--;){const o=e.codePointAt(n);if(47!==o)r<0&&(t=!0,r=n+1),46===o?i<0?i=n:1!==a&&(a=1):i>-1&&(a=-1);else if(t){s=n+1;break}}if(i<0||r<0||0===a||1===a&&i===r-1&&i===s+1)return"";return e.slice(i,r)},join:function(...e){let t,n=-1;for(;++n<e.length;)yh(e[n]),e[n]&&(t=void 0===t?e[n]:t+"/"+e[n]);return void 0===t?".":function(e){yh(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,r,s="",i=0,a=-1,o=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(a===l-1||1===o);else if(a!==l-1&&2===o){if(s.length<2||2!==i||46!==s.codePointAt(s.length-1)||46!==s.codePointAt(s.length-2))if(s.length>2){if(r=s.lastIndexOf("/"),r!==s.length-1){r<0?(s="",i=0):(s=s.slice(0,r),i=s.length-1-s.lastIndexOf("/")),a=l,o=0;continue}}else if(s.length>0){s="",i=0,a=l,o=0;continue}t&&(s=s.length>0?s+"/..":"..",i=2)}else s.length>0?s+="/"+e.slice(a+1,l):s=e.slice(a+1,l),i=l-a-1;a=l,o=0}else 46===n&&o>-1?o++:o=-1}return s}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(t)},sep:"/"};function yh(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const bh={cwd:function(){return"/"}};function vh(e){return Boolean(null!==e&&"object"==typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function wh(e){if("string"==typeof e)e=new URL(e);else if(!vh(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const jh=["history","path","basename","stem","extname","dirname"];class Nh{constructor(e){let t;t=e?vh(e)?{path:e}:"string"==typeof e||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":bh.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,r=-1;for(;++r<jh.length;){const e=jh[r];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)jh.includes(n)||(this[n]=t[n])}get basename(){return"string"==typeof this.path?xh.basename(this.path):void 0}set basename(e){_h(e,"basename"),kh(e,"basename"),this.path=xh.join(this.dirname||"",e)}get dirname(){return"string"==typeof this.path?xh.dirname(this.path):void 0}set dirname(e){Sh(this.basename,"dirname"),this.path=xh.join(e||"",this.basename)}get extname(){return"string"==typeof this.path?xh.extname(this.path):void 0}set extname(e){if(kh(e,"extname"),Sh(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=xh.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){vh(e)&&(e=wh(e)),_h(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"==typeof this.path?xh.basename(this.path,this.extname):void 0}set stem(e){_h(e,"stem"),kh(e,"stem"),this.path=xh.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){const r=new dc(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){if(void 0===this.value)return"";if("string"==typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function kh(e,t){if(e&&e.includes(xh.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+xh.sep+"`")}function _h(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Sh(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const Ch=function(e){const t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};return Object.setPrototypeOf(r,t),r},Th={}.hasOwnProperty;class Eh extends Ch{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=gh()}copy(){const e=new Eh;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(fh(!0,{},this.namespace)),e}data(e,t){return"string"==typeof e?2===arguments.length?(Ih("data",this.frozen),this.namespace[e]=t,this):Th.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Ih("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const r=t.call(e,...n);"function"==typeof r&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=Lh(e),n=this.parser||this.Parser;return Oh("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),Oh("process",this.parser||this.Parser),Ph("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,s){const i=Lh(e),a=n.parse(i);function o(e,n){e||!n?s(e):r?r(n):t(void 0,n)}n.run(a,i,(function(e,t,r){if(e||!t||!r)return o(e);const s=t,i=n.stringify(s,r);var a;"string"==typeof(a=i)||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(a)?r.value=i:r.result=i,o(e,r)}))}}processSync(e){let t,n=!1;return this.freeze(),Oh("processSync",this.parser||this.Parser),Ph("processSync",this.compiler||this.Compiler),this.process(e,(function(e,r){n=!0,sh(e),t=r})),Dh("processSync","process",n),t}run(e,t,n){Rh(e),this.freeze();const r=this.transformers;return n||"function"!=typeof t||(n=t,t=void 0),n?s(void 0,n):new Promise(s);function s(s,i){const a=Lh(t);r.run(e,a,(function(t,r,a){const o=r||e;t?i(t):s?s(o):n(void 0,o,a)}))}}runSync(e,t){let n,r=!1;return this.run(e,t,(function(e,t){sh(e),n=t,r=!0})),Dh("runSync","run",r),n}stringify(e,t){this.freeze();const n=Lh(t),r=this.compiler||this.Compiler;return Ph("stringify",r),Rh(e),r(e,n)}use(e,...t){const n=this.attachers,r=this.namespace;if(Ih("use",this.frozen),null==e);else if("function"==typeof e)o(e,t);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?a(e):i(e)}return this;function s(e){if("function"==typeof e)o(e,[]);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;o(t,n)}else i(e)}}function i(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(e.plugins),e.settings&&(r.settings=fh(!0,r.settings,e.settings))}function a(e){let t=-1;if(null==e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){s(e[t])}}}function o(e,t){let r=-1,s=-1;for(;++r<n.length;)if(n[r][0]===e){s=r;break}if(-1===s)n.push([e,...t]);else if(t.length>0){let[r,...i]=t;const a=n[s][1];ph(a)&&ph(r)&&(r=fh(!0,a,r)),n[s]=[e,r,...i]}}}}const Ah=(new Eh).freeze();function Oh(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function Ph(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function Ih(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Rh(e){if(!ph(e)||"string"!=typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function Dh(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Lh(e){return function(e){return Boolean(e&&"object"==typeof e&&"message"in e&&"messages"in e)}(e)?e:new Nh(e)}const Mh=[],Fh={allowDangerousHtml:!0},$h=/^(https?|ircs?|mailto|xmpp)$/i,Uh=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function zh(e){const t=function(e){const t=e.rehypePlugins||Mh,n=e.remarkPlugins||Mh,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Fh}:Fh,s=Ah().use(Nu).use(n).use(rh,r).use(t);return s}(e),n=function(e){const t=e.children||"",n=new Nh;"string"==typeof t&&(n.value=t);return n}(e);return function(e,t){const n=t.allowedElements,r=t.allowElement,s=t.components,i=t.disallowedElements,a=t.skipHtml,o=t.unwrapDisallowed,l=t.urlTransform||Bh;for(const d of Uh)Object.hasOwn(t,d.from)&&(d.from,d.to&&d.to,d.id);return Ju(e,c),xc(e,{Fragment:Fe.Fragment,components:s,ignoreInvalidStyle:!0,jsx:Fe.jsx,jsxs:Fe.jsxs,passKeys:!0,passNode:!0});function c(e,t,s){if("raw"===e.type&&s&&"number"==typeof t)return a?s.children.splice(t,1):s.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in Cc)if(Object.hasOwn(Cc,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],r=Cc[t];(null===r||r.includes(e.tagName))&&(e.properties[t]=l(String(n||""),t,e))}}if("element"===e.type){let a=n?!n.includes(e.tagName):!!i&&i.includes(e.tagName);if(!a&&r&&"number"==typeof t&&(a=!r(e,t,s)),a&&s&&"number"==typeof t)return o&&e.children?s.children.splice(t,1,...e.children):s.children.splice(t,1),t}}}(t.runSync(t.parse(n),n),e)}function Bh(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return-1===t||-1!==s&&t>s||-1!==n&&t>n||-1!==r&&t>r||$h.test(e.slice(0,t))?e:""}function qh(e,t){const n=String(e);if("string"!=typeof t)throw new TypeError("Expected character");let r=0,s=n.indexOf(t);for(;-1!==s;)r++,s=n.indexOf(t,s+t.length);return r}function Hh(e,t,n){const r=zu((n||{}).ignore||[]),s=function(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const e=n[r];t.push([Vh(e[0]),Wh(e[1])])}return t}(t);let i=-1;for(;++i<s.length;)Gu(e,"text",a);function a(e,t){let n,a=-1;for(;++a<t.length;){const e=t[a],s=n?n.children:void 0;if(r(e,s?s.indexOf(e):void 0,n))return;n=e}if(n)return function(e,t){const n=t[t.length-1],r=s[i][0],a=s[i][1];let o=0;const l=n.children.indexOf(e);let c=!1,d=[];r.lastIndex=0;let u=r.exec(e.value);for(;u;){const n=u.index,s={index:u.index,input:u.input,stack:[...t,e]};let i=a(...u,s);if("string"==typeof i&&(i=i.length>0?{type:"text",value:i}:void 0),!1===i?r.lastIndex=n+1:(o!==n&&d.push({type:"text",value:e.value.slice(o,n)}),Array.isArray(i)?d.push(...i):i&&d.push(i),o=n+u[0].length,c=!0),!r.global)break;u=r.exec(e.value)}c?(o<e.value.length&&d.push({type:"text",value:e.value.slice(o)}),n.children.splice(l,1,...d)):d=[e];return l+d.length}(e,t)}}function Vh(e){return"string"==typeof e?new RegExp(function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(e),"g"):e}function Wh(e){return"function"==typeof e?e:function(){return e}}const Gh="phrasing",Jh=["autolink","link","image","label"];function Kh(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Yh(e){this.config.enter.autolinkProtocol.call(this,e)}function Xh(e){this.config.exit.autolinkProtocol.call(this,e)}function Qh(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function Zh(e){this.config.exit.autolinkEmail.call(this,e)}function em(e){this.exit(e)}function tm(e){Hh(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,nm],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),rm]],{ignore:["link","linkReference"]})}function nm(e,t,n,r,s){let i="";if(!sm(s))return!1;if(/^w/i.test(t)&&(n=t+n,t="",i="http://"),!function(e){const t=e.split(".");if(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))return!1;return!0}(n))return!1;const a=function(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const s=qh(e,"(");let i=qh(e,")");for(;-1!==r&&s>i;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),i++;return[e,n]}(n+r);if(!a[0])return!1;const o={type:"link",title:null,url:i+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[o,{type:"text",value:a[1]}]:o}function rm(e,t,n,r){return!(!sm(r,!0)||/[-\d_]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function sm(e,t){const n=e.input.charCodeAt(e.index-1);return(0===e.index||Zc(n)||Qc(n))&&(!t||47!==n)}function im(){this.buffer()}function am(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function om(){this.buffer()}function lm(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function cm(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=zc(this.sliceSerialize(e)).toLowerCase(),n.label=t}function dm(e){this.exit(e)}function um(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=zc(this.sliceSerialize(e)).toLowerCase(),n.label=t}function hm(e){this.exit(e)}function mm(e,t,n,r){const s=n.createTracker(r);let i=s.move("[^");const a=n.enter("footnoteReference"),o=n.enter("reference");return i+=s.move(n.safe(n.associationId(e),{after:"]",before:i})),o(),a(),i+=s.move("]"),i}function fm(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:function(e,n,r,s){const i=r.createTracker(s);let a=i.move("[^");const o=r.enter("footnoteDefinition"),l=r.enter("label");a+=i.move(r.safe(r.associationId(e),{before:a,after:"]"})),l(),a+=i.move("]:"),e.children&&e.children.length>0&&(i.shift(4),a+=i.move((t?"\n":" ")+r.indentLines(r.containerFlow(e,i.current()),t?gm:pm)));return o(),a},footnoteReference:mm},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]}}function pm(e,t,n){return 0===t?e:gm(e,t,n)}function gm(e,t,n){return(n?"":"    ")+e}mm.peek=function(){return"["};const xm=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];function ym(e){this.enter({type:"delete",children:[]},e)}function bm(e){this.exit(e)}function vm(e,t,n,r){const s=n.createTracker(r),i=n.enter("strikethrough");let a=s.move("~~");return a+=n.containerPhrasing(e,{...s.current(),before:a,after:"~"}),a+=s.move("~~"),i(),a}function wm(e){return e.length}function jm(e){const t="string"==typeof e?e.codePointAt(0):0;return 67===t||99===t?99:76===t||108===t?108:82===t||114===t?114:0}function Nm(e,t,n){return">"+(n?"":" ")+e}function km(e,t,n){if("string"==typeof t&&(t=[t]),!t||0===t.length)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function _m(e,t,n,r){let s=-1;for(;++s<n.unsafe.length;)if("\n"===n.unsafe[s].character&&(i=n.stack,a=n.unsafe[s],km(i,a.inConstruct,!0)&&!km(i,a.notInConstruct,!1)))return/[ \t]/.test(r.before)?"":" ";var i,a;return"\\\n"}function Sm(e,t,n){return(n?"":"    ")+e}function Cm(e){const t=e.options.quote||'"';if('"'!==t&&"'"!==t)throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function Tm(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Em(e,t,n){const r=ad(e),s=ad(t);return void 0===r?void 0===s?"_"===n?{inside:!0,outside:!0}:{inside:!1,outside:!1}:1===s?{inside:!0,outside:!0}:{inside:!1,outside:!0}:1===r?void 0===s?{inside:!1,outside:!1}:1===s?{inside:!0,outside:!0}:{inside:!1,outside:!1}:void 0===s?{inside:!1,outside:!1}:1===s?{inside:!0,outside:!1}:{inside:!1,outside:!1}}function Am(e,t,n,r){const s=function(e){const t=e.options.emphasis||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}(n),i=n.enter("emphasis"),a=n.createTracker(r),o=a.move(s);let l=a.move(n.containerPhrasing(e,{after:s,before:o,...a.current()}));const c=l.charCodeAt(0),d=Em(r.before.charCodeAt(r.before.length-1),c,s);d.inside&&(l=Tm(c)+l.slice(1));const u=l.charCodeAt(l.length-1),h=Em(r.after.charCodeAt(0),u,s);h.inside&&(l=l.slice(0,-1)+Tm(u));const m=a.move(s);return i(),n.attentionEncodeSurroundingInfo={after:h.outside,before:d.outside},o+l+m}function Om(e){return e.value||""}function Pm(e,t,n,r){const s=Cm(n),i='"'===s?"Quote":"Apostrophe",a=n.enter("image");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(e.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),o(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(o=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":")",...l.current()}))),o(),e.title&&(o=n.enter(`title${i}`),c+=l.move(" "+s),c+=l.move(n.safe(e.title,{before:c,after:s,...l.current()})),c+=l.move(s),o()),c+=l.move(")"),a(),c}function Im(e,t,n,r){const s=e.referenceType,i=n.enter("imageReference");let a=n.enter("label");const o=n.createTracker(r);let l=o.move("![");const c=n.safe(e.alt,{before:l,after:"]",...o.current()});l+=o.move(c+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const u=n.safe(n.associationId(e),{before:l,after:"]",...o.current()});return a(),n.stack=d,i(),"full"!==s&&c&&c===u?"shortcut"===s?l=l.slice(0,-1):l+=o.move("]"):l+=o.move(u+"]"),l}function Rm(e,t,n){let r=e.value||"",s="`",i=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const e=n.unsafe[i],t=n.compilePattern(e);let s;if(e.atBreak)for(;s=t.exec(r);){let e=s.index;10===r.charCodeAt(e)&&13===r.charCodeAt(e-1)&&e--,r=r.slice(0,e)+" "+r.slice(s.index+1)}}return s+r+s}function Dm(e,t){const n=Ec(e);return Boolean(!t.options.resourceLink&&e.url&&!e.title&&e.children&&1===e.children.length&&"text"===e.children[0].type&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}function Lm(e,t,n,r){const s=Cm(n),i='"'===s?"Quote":"Apostrophe",a=n.createTracker(r);let o,l;if(Dm(e,n)){const t=n.stack;n.stack=[],o=n.enter("autolink");let r=a.move("<");return r+=a.move(n.containerPhrasing(e,{before:r,after:">",...a.current()})),r+=a.move(">"),o(),n.stack=t,r}o=n.enter("link"),l=n.enter("label");let c=a.move("[");return c+=a.move(n.containerPhrasing(e,{before:c,after:"](",...a.current()})),c+=a.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=a.move("<"),c+=a.move(n.safe(e.url,{before:c,after:">",...a.current()})),c+=a.move(">")):(l=n.enter("destinationRaw"),c+=a.move(n.safe(e.url,{before:c,after:e.title?" ":")",...a.current()}))),l(),e.title&&(l=n.enter(`title${i}`),c+=a.move(" "+s),c+=a.move(n.safe(e.title,{before:c,after:s,...a.current()})),c+=a.move(s),l()),c+=a.move(")"),o(),c}function Mm(e,t,n,r){const s=e.referenceType,i=n.enter("linkReference");let a=n.enter("label");const o=n.createTracker(r);let l=o.move("[");const c=n.containerPhrasing(e,{before:l,after:"]",...o.current()});l+=o.move(c+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const u=n.safe(n.associationId(e),{before:l,after:"]",...o.current()});return a(),n.stack=d,i(),"full"!==s&&c&&c===u?"shortcut"===s?l=l.slice(0,-1):l+=o.move("]"):l+=o.move(u+"]"),l}function Fm(e){const t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function $m(e){const t=e.options.rule||"*";if("*"!==t&&"-"!==t&&"_"!==t)throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}vm.peek=function(){return"~"},Am.peek=function(e,t,n){return n.options.emphasis||"*"},Om.peek=function(){return"<"},Pm.peek=function(){return"!"},Im.peek=function(){return"!"},Rm.peek=function(){return"`"},Lm.peek=function(e,t,n){return Dm(e,n)?"<":"["},Mm.peek=function(){return"["};const Um=zu(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function zm(e,t,n,r){const s=function(e){const t=e.options.strong||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}(n),i=n.enter("strong"),a=n.createTracker(r),o=a.move(s+s);let l=a.move(n.containerPhrasing(e,{after:s,before:o,...a.current()}));const c=l.charCodeAt(0),d=Em(r.before.charCodeAt(r.before.length-1),c,s);d.inside&&(l=Tm(c)+l.slice(1));const u=l.charCodeAt(l.length-1),h=Em(r.after.charCodeAt(0),u,s);h.inside&&(l=l.slice(0,-1)+Tm(u));const m=a.move(s+s);return i(),n.attentionEncodeSurroundingInfo={after:h.outside,before:d.outside},o+l+m}zm.peek=function(e,t,n){return n.options.strong||"*"};const Bm={blockquote:function(e,t,n,r){const s=n.enter("blockquote"),i=n.createTracker(r);i.move("> "),i.shift(2);const a=n.indentLines(n.containerFlow(e,i.current()),Nm);return s(),a},break:_m,code:function(e,t,n,r){const s=function(e){const t=e.options.fence||"`";if("`"!==t&&"~"!==t)throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}(n),i=e.value||"",a="`"===s?"GraveAccent":"Tilde";if(function(e,t){return Boolean(!1===t.options.fences&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}(e,n)){const e=n.enter("codeIndented"),t=n.indentLines(i,Sm);return e(),t}const o=n.createTracker(r),l=s.repeat(Math.max(function(e,t){const n=String(e);let r=n.indexOf(t),s=r,i=0,a=0;if("string"!=typeof t)throw new TypeError("Expected substring");for(;-1!==r;)r===s?++i>a&&(a=i):i=1,s=r+t.length,r=n.indexOf(t,s);return a}(i,s)+1,3)),c=n.enter("codeFenced");let d=o.move(l);if(e.lang){const t=n.enter(`codeFencedLang${a}`);d+=o.move(n.safe(e.lang,{before:d,after:" ",encode:["`"],...o.current()})),t()}if(e.lang&&e.meta){const t=n.enter(`codeFencedMeta${a}`);d+=o.move(" "),d+=o.move(n.safe(e.meta,{before:d,after:"\n",encode:["`"],...o.current()})),t()}return d+=o.move("\n"),i&&(d+=o.move(i+"\n")),d+=o.move(l),c(),d},definition:function(e,t,n,r){const s=Cm(n),i='"'===s?"Quote":"Apostrophe",a=n.enter("definition");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(e),{before:c,after:"]",...l.current()})),c+=l.move("]: "),o(),!e.url||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(o=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":"\n",...l.current()}))),o(),e.title&&(o=n.enter(`title${i}`),c+=l.move(" "+s),c+=l.move(n.safe(e.title,{before:c,after:s,...l.current()})),c+=l.move(s),o()),a(),c},emphasis:Am,hardBreak:_m,heading:function(e,t,n,r){const s=Math.max(Math.min(6,e.depth||1),1),i=n.createTracker(r);if(function(e,t){let n=!1;return Ju(e,(function(e){if("value"in e&&/\r?\n|\r/.test(e.value)||"break"===e.type)return n=!0,Wu})),Boolean((!e.depth||e.depth<3)&&Ec(e)&&(t.options.setext||n))}(e,n)){const t=n.enter("headingSetext"),r=n.enter("phrasing"),a=n.containerPhrasing(e,{...i.current(),before:"\n",after:"\n"});return r(),t(),a+"\n"+(1===s?"=":"-").repeat(a.length-(Math.max(a.lastIndexOf("\r"),a.lastIndexOf("\n"))+1))}const a="#".repeat(s),o=n.enter("headingAtx"),l=n.enter("phrasing");i.move(a+" ");let c=n.containerPhrasing(e,{before:"# ",after:"\n",...i.current()});return/^[\t ]/.test(c)&&(c=Tm(c.charCodeAt(0))+c.slice(1)),c=c?a+" "+c:a,n.options.closeAtx&&(c+=" "+a),l(),o(),c},html:Om,image:Pm,imageReference:Im,inlineCode:Rm,link:Lm,linkReference:Mm,list:function(e,t,n,r){const s=n.enter("list"),i=n.bulletCurrent;let a=e.ordered?function(e){const t=e.options.bulletOrdered||".";if("."!==t&&")"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}(n):Fm(n);const o=e.ordered?"."===a?")":".":function(e){const t=Fm(e),n=e.options.bulletOther;if(!n)return"*"===t?"-":"*";if("*"!==n&&"+"!==n&&"-"!==n)throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}(n);let l=!(!t||!n.bulletLastUsed)&&a===n.bulletLastUsed;if(!e.ordered){const t=e.children?e.children[0]:void 0;if("*"!==a&&"-"!==a||!t||t.children&&t.children[0]||"list"!==n.stack[n.stack.length-1]||"listItem"!==n.stack[n.stack.length-2]||"list"!==n.stack[n.stack.length-3]||"listItem"!==n.stack[n.stack.length-4]||0!==n.indexStack[n.indexStack.length-1]||0!==n.indexStack[n.indexStack.length-2]||0!==n.indexStack[n.indexStack.length-3]||(l=!0),$m(n)===a&&t){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n&&"listItem"===n.type&&n.children&&n.children[0]&&"thematicBreak"===n.children[0].type){l=!0;break}}}}l&&(a=o),n.bulletCurrent=a;const c=n.containerFlow(e,r);return n.bulletLastUsed=a,n.bulletCurrent=i,s(),c},listItem:function(e,t,n,r){const s=function(e){const t=e.options.listItemIndent||"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}(n);let i=n.bulletCurrent||Fm(n);t&&"list"===t.type&&t.ordered&&(i=("number"==typeof t.start&&t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+i);let a=i.length+1;("tab"===s||"mixed"===s&&(t&&"list"===t.type&&t.spread||e.spread))&&(a=4*Math.ceil(a/4));const o=n.createTracker(r);o.move(i+" ".repeat(a-i.length)),o.shift(a);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,o.current()),(function(e,t,n){if(t)return(n?"":" ".repeat(a))+e;return(n?i:i+" ".repeat(a-i.length))+e}));return l(),c},paragraph:function(e,t,n,r){const s=n.enter("paragraph"),i=n.enter("phrasing"),a=n.containerPhrasing(e,r);return i(),s(),a},root:function(e,t,n,r){return(e.children.some((function(e){return Um(e)}))?n.containerPhrasing:n.containerFlow).call(n,e,r)},strong:zm,text:function(e,t,n,r){return n.safe(e.value,r)},thematicBreak:function(e,t,n){const r=($m(n)+(n.options.ruleSpaces?" ":"")).repeat(function(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}(n));return n.options.ruleSpaces?r.slice(0,-1):r}};function qm(e){const t=e._align;this.enter({type:"table",align:t.map((function(e){return"none"===e?null:e})),children:[]},e),this.data.inTable=!0}function Hm(e){this.exit(e),this.data.inTable=void 0}function Vm(e){this.enter({type:"tableRow",children:[]},e)}function Wm(e){this.exit(e)}function Gm(e){this.enter({type:"tableCell",children:[]},e)}function Jm(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Km));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function Km(e,t){return"|"===t?t:e}function Ym(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,s=t.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:function(e,t,n){let r=Bm.inlineCode(e,t,n);n.stack.includes("tableCell")&&(r=r.replace(/\|/g,"\\$&"));return r},table:function(e,t,n,r){return o(function(e,t,n){const r=e.children;let s=-1;const i=[],a=t.enter("table");for(;++s<r.length;)i[s]=l(r[s],t,n);return a(),i}(e,n,r),e.align)},tableCell:a,tableRow:function(e,t,n,r){const s=o([l(e,n,r)]);return s.slice(0,s.indexOf("\n"))}}};function a(e,t,n,r){const s=n.enter("tableCell"),a=n.enter("phrasing"),o=n.containerPhrasing(e,{...r,before:i,after:i});return a(),s(),o}function o(e,t){return function(e,t){const n=t||{},r=(n.align||[]).concat(),s=n.stringLength||wm,i=[],a=[],o=[],l=[];let c=0,d=-1;for(;++d<e.length;){const t=[],r=[];let i=-1;for(e[d].length>c&&(c=e[d].length);++i<e[d].length;){const a=null==(u=e[d][i])?"":String(u);if(!1!==n.alignDelimiters){const e=s(a);r[i]=e,(void 0===l[i]||e>l[i])&&(l[i]=e)}t.push(a)}a[d]=t,o[d]=r}var u;let h=-1;if("object"==typeof r&&"length"in r)for(;++h<c;)i[h]=jm(r[h]);else{const e=jm(r);for(;++h<c;)i[h]=e}h=-1;const m=[],f=[];for(;++h<c;){const e=i[h];let t="",r="";99===e?(t=":",r=":"):108===e?t=":":114===e&&(r=":");let s=!1===n.alignDelimiters?1:Math.max(1,l[h]-t.length-r.length);const a=t+"-".repeat(s)+r;!1!==n.alignDelimiters&&(s=t.length+s+r.length,s>l[h]&&(l[h]=s),f[h]=s),m[h]=a}a.splice(1,0,m),o.splice(1,0,f),d=-1;const p=[];for(;++d<a.length;){const e=a[d],t=o[d];h=-1;const r=[];for(;++h<c;){const s=e[h]||"";let a="",o="";if(!1!==n.alignDelimiters){const e=l[h]-(t[h]||0),n=i[h];114===n?a=" ".repeat(e):99===n?e%2?(a=" ".repeat(e/2+.5),o=" ".repeat(e/2-.5)):(a=" ".repeat(e/2),o=a):o=" ".repeat(e)}!1===n.delimiterStart||h||r.push("|"),!1===n.padding||!1===n.alignDelimiters&&""===s||!1===n.delimiterStart&&!h||r.push(" "),!1!==n.alignDelimiters&&r.push(a),r.push(s),!1!==n.alignDelimiters&&r.push(o),!1!==n.padding&&r.push(" "),!1===n.delimiterEnd&&h===c-1||r.push("|")}p.push(!1===n.delimiterEnd?r.join("").replace(/ +$/,""):r.join(""))}return p.join("\n")}(e,{align:t,alignDelimiters:r,padding:n,stringLength:s})}function l(e,t,n){const r=e.children;let s=-1;const i=[],o=t.enter("tableRow");for(;++s<r.length;)i[s]=a(r[s],0,t,n);return o(),i}}function Xm(e){const t=this.stack[this.stack.length-2];t.type,t.checked="taskListCheckValueChecked"===e.type}function Qm(e){const t=this.stack[this.stack.length-2];if(t&&"listItem"===t.type&&"boolean"==typeof t.checked){const e=this.stack[this.stack.length-1];e.type;const n=e.children[0];if(n&&"text"===n.type){const r=t.children;let s,i=-1;for(;++i<r.length;){const e=r[i];if("paragraph"===e.type){s=e;break}}s===e&&(n.value=n.value.slice(1),0===n.value.length?e.children.shift():e.position&&n.position&&"number"==typeof n.position.start.offset&&(n.position.start.column++,n.position.start.offset++,e.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function Zm(e,t,n,r){const s=e.children[0],i="boolean"==typeof e.checked&&s&&"paragraph"===s.type,a="["+(e.checked?"x":" ")+"] ",o=n.createTracker(r);i&&o.move(a);let l=Bm.listItem(e,t,n,{...r,...o.current()});return i&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,(function(e){return e+a}))),l}const ef={tokenize:function(e,t,n){let r=0;return function t(i){if((87===i||119===i)&&r<3)return r++,e.consume(i),t;if(46===i&&3===r)return e.consume(i),s;return n(i)};function s(e){return null===e?n(e):t(e)}},partial:!0},tf={tokenize:function(e,t,n){let r,s,i;return a;function a(t){return 46===t||95===t?e.check(rf,l,o)(t):null===t||Yc(t)||Zc(t)||45!==t&&Qc(t)?l(t):(i=!0,e.consume(t),a)}function o(t){return 95===t?r=!0:(s=r,r=void 0),e.consume(t),a}function l(e){return s||r||!i?n(e):t(e)}},partial:!0},nf={tokenize:function(e,t){let n=0,r=0;return s;function s(a){return 40===a?(n++,e.consume(a),s):41===a&&r<n?i(a):33===a||34===a||38===a||39===a||41===a||42===a||44===a||46===a||58===a||59===a||60===a||63===a||93===a||95===a||126===a?e.check(rf,t,i)(a):null===a||Yc(a)||Zc(a)?t(a):(e.consume(a),s)}function i(t){return 41===t&&r++,e.consume(t),s}},partial:!0},rf={tokenize:function(e,t,n){return r;function r(a){return 33===a||34===a||39===a||41===a||42===a||44===a||46===a||58===a||59===a||63===a||95===a||126===a?(e.consume(a),r):38===a?(e.consume(a),i):93===a?(e.consume(a),s):60===a||null===a||Yc(a)||Zc(a)?t(a):n(a)}function s(e){return null===e||40===e||91===e||Yc(e)||Zc(e)?t(e):r(e)}function i(e){return Bc(e)?a(e):n(e)}function a(t){return 59===t?(e.consume(t),r):Bc(t)?(e.consume(t),a):n(t)}},partial:!0},sf={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(e){return qc(e)?n(e):t(e)}},partial:!0},af={name:"wwwAutolink",tokenize:function(e,t,n){const r=this;return function(t){if(87!==t&&119!==t||!uf.call(r,r.previous)||pf(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(ef,e.attempt(tf,e.attempt(nf,s),n),n)(t)};function s(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:uf},of={name:"protocolAutolink",tokenize:function(e,t,n){const r=this;let s="",i=!1;return function(t){if((72===t||104===t)&&hf.call(r,r.previous)&&!pf(r.events))return e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(t),e.consume(t),a;return n(t)};function a(t){if(Bc(t)&&s.length<5)return s+=String.fromCodePoint(t),e.consume(t),a;if(58===t){const n=s.toLowerCase();if("http"===n||"https"===n)return e.consume(t),o}return n(t)}function o(t){return 47===t?(e.consume(t),i?l:(i=!0,o)):n(t)}function l(t){return null===t||Vc(t)||Yc(t)||Zc(t)||Qc(t)?n(t):e.attempt(tf,e.attempt(nf,c),n)(t)}function c(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:hf},lf={name:"emailAutolink",tokenize:function(e,t,n){const r=this;let s,i;return function(t){if(!ff(t)||!mf.call(r,r.previous)||pf(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(t)};function a(t){return ff(t)?(e.consume(t),a):64===t?(e.consume(t),o):n(t)}function o(t){return 46===t?e.check(sf,c,l)(t):45===t||95===t||qc(t)?(i=!0,e.consume(t),o):c(t)}function l(t){return e.consume(t),s=!0,o}function c(a){return i&&s&&Bc(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(a)):n(a)}},previous:mf},cf={};let df=48;for(;df<123;)cf[df]=lf,df++,58===df?df=65:91===df&&(df=97);function uf(e){return null===e||40===e||42===e||95===e||91===e||93===e||126===e||Yc(e)}function hf(e){return!Bc(e)}function mf(e){return!(47===e||ff(e))}function ff(e){return 43===e||45===e||46===e||95===e||qc(e)}function pf(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if(("labelLink"===r.type||"labelImage"===r.type)&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}cf[43]=lf,cf[45]=lf,cf[46]=lf,cf[95]=lf,cf[72]=[lf,of],cf[104]=[lf,of],cf[87]=[lf,af],cf[119]=[lf,af];const gf={tokenize:function(e,t,n){const r=this;return nd(e,(function(e){const s=r.events[r.events.length-1];return s&&"gfmFootnoteDefinitionIndent"===s[1].type&&4===s[2].sliceSerialize(s[1],!0).length?t(e):n(e)}),"gfmFootnoteDefinitionIndent",5)},partial:!0};function xf(e,t,n){const r=this;let s=r.events.length;const i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;s--;){const e=r.events[s][1];if("labelImage"===e.type){a=e;break}if("gfmFootnoteCall"===e.type||"labelLink"===e.type||"label"===e.type||"image"===e.type||"link"===e.type)break}return function(s){if(!a||!a._balanced)return n(s);const o=zc(r.sliceSerialize({start:a.end,end:r.now()}));if(94!==o.codePointAt(0)||!i.includes(o.slice(1)))return n(s);return e.enter("gfmFootnoteCallLabelMarker"),e.consume(s),e.exit("gfmFootnoteCallLabelMarker"),t(s)}}function yf(e,t){let n=e.length;for(;n--;)if("labelImage"===e[n][1].type&&"enter"===e[n][0]){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},o=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",s,t],["exit",s,t],["enter",i,t],["enter",a,t],["exit",a,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...o),e}function bf(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,a=0;return function(t){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(t),e.exit("gfmFootnoteCallLabelMarker"),o};function o(t){return 94!==t?n(t):(e.enter("gfmFootnoteCallMarker"),e.consume(t),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",l)}function l(o){if(a>999||93===o&&!i||null===o||91===o||Yc(o))return n(o);if(93===o){e.exit("chunkString");const i=e.exit("gfmFootnoteCallString");return s.includes(zc(r.sliceSerialize(i)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(o),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(o)}return Yc(o)||(i=!0),a++,e.consume(o),92===o?c:l}function c(t){return 91===t||92===t||93===t?(e.consume(t),a++,l):l(t)}}function vf(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,a,o=0;return function(t){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),l};function l(t){return 94===t?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",c):n(t)}function c(t){if(o>999||93===t&&!a||null===t||91===t||Yc(t))return n(t);if(93===t){e.exit("chunkString");const n=e.exit("gfmFootnoteDefinitionLabelString");return i=zc(r.sliceSerialize(n)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),u}return Yc(t)||(a=!0),o++,e.consume(t),92===t?d:c}function d(t){return 91===t||92===t||93===t?(e.consume(t),o++,c):c(t)}function u(t){return 58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),s.includes(i)||s.push(i),nd(e,h,"gfmFootnoteDefinitionWhitespace")):n(t)}function h(e){return t(e)}}function wf(e,t,n){return e.check(ud,t,e.attempt(gf,t,n))}function jf(e){e.exit("gfmFootnoteDefinition")}function Nf(e){let t=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:function(e,n,r){const s=this.previous,i=this.events;let a=0;return function(t){if(126===s&&"characterEscape"!==i[i.length-1][1].type)return r(t);return e.enter("strikethroughSequenceTemporary"),o(t)};function o(i){const l=ad(s);if(126===i)return a>1?r(i):(e.consume(i),a++,o);if(a<2&&!t)return r(i);const c=e.exit("strikethroughSequenceTemporary"),d=ad(i);return c._open=!d||2===d&&Boolean(l),c._close=!l||2===l&&Boolean(d),n(i)}},resolveAll:function(e,t){let n=-1;for(;++n<e.length;)if("enter"===e[n][0]&&"strikethroughSequenceTemporary"===e[n][1].type&&e[n][1]._close){let r=n;for(;r--;)if("exit"===e[r][0]&&"strikethroughSequenceTemporary"===e[r][1].type&&e[r][1]._open&&e[n][1].end.offset-e[n][1].start.offset==e[r][1].end.offset-e[r][1].start.offset){e[n][1].type="strikethroughSequence",e[r][1].type="strikethroughSequence";const s={type:"strikethrough",start:Object.assign({},e[r][1].start),end:Object.assign({},e[n][1].end)},i={type:"strikethroughText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},a=[["enter",s,t],["enter",e[r][1],t],["exit",e[r][1],t],["enter",i,t]],o=t.parser.constructs.insideSpan.null;o&&Rc(a,a.length,0,od(o,e.slice(r+1,n),t)),Rc(a,a.length,0,[["exit",i,t],["enter",e[n][1],t],["exit",e[n][1],t],["exit",s,t]]),Rc(e,r-1,n-r+3,a),n=r+a.length-2;break}}n=-1;for(;++n<e.length;)"strikethroughSequenceTemporary"===e[n][1].type&&(e[n][1].type="data");return e}};return null==t&&(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}}}class kf{constructor(){this.map=[]}add(e,t,n){!function(e,t,n,r){let s=0;if(0===n&&0===r.length)return;for(;s<e.map.length;){if(e.map[s][0]===t)return e.map[s][1]+=n,void e.map[s][2].push(...r);s+=1}e.map.push([t,n,r])}(this,e,t,n)}consume(e){if(this.map.sort((function(e,t){return e[0]-t[0]})),0===this.map.length)return;let t=this.map.length;const n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push(e.slice()),e.length=0;let r=n.pop();for(;r;){for(const t of r)e.push(t);r=n.pop()}this.map.length=0}}function _f(e,t){let n=!1;const r=[];for(;t<e.length;){const s=e[t];if(n){if("enter"===s[0])"tableContent"===s[1].type&&r.push("tableDelimiterMarker"===e[t+1][1].type?"left":"none");else if("tableContent"===s[1].type){if("tableDelimiterMarker"===e[t-1][1].type){const e=r.length-1;r[e]="left"===r[e]?"center":"right"}}else if("tableDelimiterRow"===s[1].type)break}else"enter"===s[0]&&"tableDelimiterRow"===s[1].type&&(n=!0);t+=1}return r}function Sf(e,t,n){const r=this;let s,i=0,a=0;return function(e){let t=r.events.length-1;for(;t>-1;){const e=r.events[t][1].type;if("lineEnding"!==e&&"linePrefix"!==e)break;t--}const s=t>-1?r.events[t][1].type:null,i="tableHead"===s||"tableRow"===s?v:o;if(i===v&&r.parser.lazy[r.now().line])return n(e);return i(e)};function o(t){return e.enter("tableHead"),e.enter("tableRow"),function(e){if(124===e)return l(e);return s=!0,a+=1,l(e)}(t)}function l(t){return null===t?n(t):Kc(t)?a>1?(a=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),u):n(t):Xc(t)?nd(e,l,"whitespace")(t):(a+=1,s&&(s=!1,i+=1),124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),s=!0,l):(e.enter("data"),c(t)))}function c(t){return null===t||124===t||Yc(t)?(e.exit("data"),l(t)):(e.consume(t),92===t?d:c)}function d(t){return 92===t||124===t?(e.consume(t),c):c(t)}function u(t){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(t):(e.enter("tableDelimiterRow"),s=!1,Xc(t)?nd(e,h,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):h(t))}function h(t){return 45===t||58===t?f(t):124===t?(s=!0,e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),m):b(t)}function m(t){return Xc(t)?nd(e,f,"whitespace")(t):f(t)}function f(t){return 58===t?(a+=1,s=!0,e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),p):45===t?(a+=1,p(t)):null===t||Kc(t)?y(t):b(t)}function p(t){return 45===t?(e.enter("tableDelimiterFiller"),g(t)):b(t)}function g(t){return 45===t?(e.consume(t),g):58===t?(s=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),x):(e.exit("tableDelimiterFiller"),x(t))}function x(t){return Xc(t)?nd(e,y,"whitespace")(t):y(t)}function y(n){return 124===n?h(n):(null===n||Kc(n))&&s&&i===a?(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(n)):b(n)}function b(e){return n(e)}function v(t){return e.enter("tableRow"),w(t)}function w(n){return 124===n?(e.enter("tableCellDivider"),e.consume(n),e.exit("tableCellDivider"),w):null===n||Kc(n)?(e.exit("tableRow"),t(n)):Xc(n)?nd(e,w,"whitespace")(n):(e.enter("data"),j(n))}function j(t){return null===t||124===t||Yc(t)?(e.exit("data"),w(t)):(e.consume(t),92===t?N:j)}function N(t){return 92===t||124===t?(e.consume(t),j):j(t)}}function Cf(e,t){let n,r,s,i=-1,a=!0,o=0,l=[0,0,0,0],c=[0,0,0,0],d=!1,u=0;const h=new kf;for(;++i<e.length;){const m=e[i],f=m[1];"enter"===m[0]?"tableHead"===f.type?(d=!1,0!==u&&(Ef(h,t,u,n,r),r=void 0,u=0),n={type:"table",start:Object.assign({},f.start),end:Object.assign({},f.end)},h.add(i,0,[["enter",n,t]])):"tableRow"===f.type||"tableDelimiterRow"===f.type?(a=!0,s=void 0,l=[0,0,0,0],c=[0,i+1,0,0],d&&(d=!1,r={type:"tableBody",start:Object.assign({},f.start),end:Object.assign({},f.end)},h.add(i,0,[["enter",r,t]])),o="tableDelimiterRow"===f.type?2:r?3:1):!o||"data"!==f.type&&"tableDelimiterMarker"!==f.type&&"tableDelimiterFiller"!==f.type?"tableCellDivider"===f.type&&(a?a=!1:(0!==l[1]&&(c[0]=c[1],s=Tf(h,t,l,o,void 0,s)),l=c,c=[l[1],i,0,0])):(a=!1,0===c[2]&&(0!==l[1]&&(c[0]=c[1],s=Tf(h,t,l,o,void 0,s),l=[0,0,0,0]),c[2]=i)):"tableHead"===f.type?(d=!0,u=i):"tableRow"===f.type||"tableDelimiterRow"===f.type?(u=i,0!==l[1]?(c[0]=c[1],s=Tf(h,t,l,o,i,s)):0!==c[1]&&(s=Tf(h,t,c,o,i,s)),o=0):!o||"data"!==f.type&&"tableDelimiterMarker"!==f.type&&"tableDelimiterFiller"!==f.type||(c[3]=i)}for(0!==u&&Ef(h,t,u,n,r),h.consume(t.events),i=-1;++i<t.events.length;){const e=t.events[i];"enter"===e[0]&&"table"===e[1].type&&(e[1]._align=_f(t.events,i))}return e}function Tf(e,t,n,r,s,i){const a=1===r?"tableHeader":2===r?"tableDelimiter":"tableData";0!==n[0]&&(i.end=Object.assign({},Af(t.events,n[0])),e.add(n[0],0,[["exit",i,t]]));const o=Af(t.events,n[1]);if(i={type:a,start:Object.assign({},o),end:Object.assign({},o)},e.add(n[1],0,[["enter",i,t]]),0!==n[2]){const s=Af(t.events,n[2]),i=Af(t.events,n[3]),a={type:"tableContent",start:Object.assign({},s),end:Object.assign({},i)};if(e.add(n[2],0,[["enter",a,t]]),2!==r){const r=t.events[n[2]],s=t.events[n[3]];if(r[1].end=Object.assign({},s[1].end),r[1].type="chunkText",r[1].contentType="text",n[3]>n[2]+1){const t=n[2]+1,r=n[3]-n[2]-1;e.add(t,r,[])}}e.add(n[3]+1,0,[["exit",a,t]])}return void 0!==s&&(i.end=Object.assign({},Af(t.events,s)),e.add(s,0,[["exit",i,t]]),i=void 0),i}function Ef(e,t,n,r,s){const i=[],a=Af(t.events,n);s&&(s.end=Object.assign({},a),i.push(["exit",s,t])),r.end=Object.assign({},a),i.push(["exit",r,t]),e.add(n+1,0,i)}function Af(e,t){const n=e[t],r="enter"===n[0]?"start":"end";return n[1][r]}const Of={name:"tasklistCheck",tokenize:function(e,t,n){const r=this;return function(t){if(null!==r.previous||!r._gfmTasklistFirstContentOfListItem)return n(t);return e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),s};function s(t){return Yc(t)?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),i):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),i):n(t)}function i(t){return 93===t?(e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):n(t)}function a(r){return Kc(r)?t(r):Xc(r)?e.check({tokenize:Pf},t,n)(r):n(r)}}};function Pf(e,t,n){return nd(e,(function(e){return null===e?n(e):t(e)}),"whitespace")}const If={};function Rf(e){const t=e||If,n=this.data(),r=n.micromarkExtensions||(n.micromarkExtensions=[]),s=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),i=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);r.push(function(e){return Mc([{text:cf},{document:{91:{name:"gfmFootnoteDefinition",tokenize:vf,continuation:{tokenize:wf},exit:jf}},text:{91:{name:"gfmFootnoteCall",tokenize:bf},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:xf,resolveTo:yf}}},Nf(e),{flow:{null:{name:"table",tokenize:Sf,resolveAll:Cf}}},{text:{91:Of}}])}(t)),s.push([{transforms:[tm],enter:{literalAutolink:Kh,literalAutolinkEmail:Yh,literalAutolinkHttp:Yh,literalAutolinkWww:Yh},exit:{literalAutolink:em,literalAutolinkEmail:Zh,literalAutolinkHttp:Xh,literalAutolinkWww:Qh}},{enter:{gfmFootnoteCallString:im,gfmFootnoteCall:am,gfmFootnoteDefinitionLabelString:om,gfmFootnoteDefinition:lm},exit:{gfmFootnoteCallString:cm,gfmFootnoteCall:dm,gfmFootnoteDefinitionLabelString:um,gfmFootnoteDefinition:hm}},{canContainEols:["delete"],enter:{strikethrough:ym},exit:{strikethrough:bm}},{enter:{table:qm,tableData:Gm,tableHeader:Gm,tableRow:Vm},exit:{codeText:Jm,table:Hm,tableData:Wm,tableHeader:Wm,tableRow:Wm}},{exit:{taskListCheckValueChecked:Xm,taskListCheckValueUnchecked:Xm,paragraph:Qm}}]),i.push(function(e){return{extensions:[{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Gh,notInConstruct:Jh},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Gh,notInConstruct:Jh},{character:":",before:"[ps]",after:"\\/",inConstruct:Gh,notInConstruct:Jh}]},fm(e),{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:xm}],handlers:{delete:vm}},Ym(e),{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Zm}}]}}(t))}function Df(){var e;const{id:t}=m(),[n,r]=s.useState(null),[i,a]=s.useState(!0);s.useEffect((()=>{o()}),[t]);const o=async()=>{try{if(!t)return;a(!0);const e=await async function(e){try{const{data:t,error:n}=await gi.from("blog_posts").select("*, blog_tabs(name)").eq("id",e).single();return n?(console.error("Error fetching blog post by id:",n),null):t}catch(t){return console.error("Error in getBlogPostById:",t),null}}(t);e?r(e):x.error("Blog post not found")}catch(e){console.error("Error loading blog post:",e),x.error("Failed to load blog post")}finally{a(!1)}};if(i)return Fe.jsx("div",{className:"text-center py-12 text-xl text-gray-700",children:"Loading..."});if(!n)return Fe.jsx("div",{className:"text-center py-12 text-xl text-gray-700",children:"Post not found."});const l={"@context":"https://schema.org","@type":"BlogPosting",headline:n.title,description:n.excerpt,image:n.image_url,datePublished:n.date,dateModified:n.updated_at||n.date,author:{"@type":"Person",name:n.author},publisher:{"@type":"Organization",name:"Admissions.app",logo:{"@type":"ImageObject",url:"https://admissions.app/logo.png"}},mainEntityOfPage:{"@type":"WebPage","@id":`https://admissions.app/blog/post/${n.id}`}};return Fe.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white py-12",children:[Fe.jsx(Sa,{title:`${n.title} | Admissions.app Blog`,description:n.excerpt,canonicalUrl:`/blog/post/${n.id}`,ogType:"article",ogImage:n.image_url,keywords:[n.category,"college admissions","education blog"],author:n.author,schema:l}),Fe.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6",children:[Fe.jsx(h,{to:"/blog",className:"inline-flex items-center text-primary hover:underline mb-8",children:" Back to All Posts"}),Fe.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md",children:[n.image_url&&Fe.jsx("img",{src:n.image_url,alt:n.title,className:"w-full h-96 object-cover rounded-lg mb-8 shadow-lg"}),Fe.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[(null==(e=n.blog_tabs)?void 0:e.name)&&Fe.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-primary/10 text-primary",children:[Fe.jsx(je,{size:14,className:"mr-1"}),n.blog_tabs.name]}),n.category&&Fe.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800",children:n.category})]}),Fe.jsx("h1",{className:"text-4xl font-extrabold text-gray-900 leading-tight mb-6",children:n.title}),Fe.jsxs("div",{className:"flex items-center mb-8 text-gray-600",children:[Fe.jsx("span",{className:"font-semibold mr-2",children:n.author}),Fe.jsx("span",{className:"mx-2",children:""}),Fe.jsx("span",{children:new Date(n.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),n.excerpt&&Fe.jsx("p",{className:"text-xl text-gray-600 italic mb-8 border-l-4 border-primary pl-4",children:n.excerpt}),Fe.jsx("div",{className:"prose prose-lg max-w-none text-gray-800",children:Fe.jsx(zh,{remarkPlugins:[Rf],children:n.content})})]})]})]})}function Lf(){const[e,t]=s.useState(""),[n,r]=s.useState([]),[i,a]=s.useState(!0),[l,c]=s.useState(1),[d,u]=s.useState(""),[m,f]=s.useState([]),[p,g]=s.useState(""),[y,b]=s.useState(!1),v={location:d,specializations:m,verifiedOnly:y};s.useEffect((()=>{w()}),[]);const w=async()=>{try{a(!0);const{data:e,error:t}=await gi.from("agencies").select("\n          id,\n          name,\n          slug,\n          location,\n          description,\n          rating,\n          trust_score,\n          image_url,\n          price,\n          is_verified,\n          agency_services (\n            name\n          ),\n          agency_photos (\n            id,\n            url,\n            caption,\n            is_cover\n          )\n        ").eq("status","approved").order("trust_score",{ascending:!1});if(t)throw t;const n=e.map((e=>{var t;return{...e,specializations:(null==(t=e.agency_services)?void 0:t.map((e=>e.name)))||[],photos:e.agency_photos||[]}}));r(n)}catch(e){console.error("Error loading agencies:",e),x.error("Failed to load agencies. Please try refreshing the page.")}finally{a(!1)}},j=n.filter((t=>{if(e){const n=e.toLowerCase();if(!(t.name.toLowerCase().includes(n)||t.location.toLowerCase().includes(n)||t.description.toLowerCase().includes(n)||t.specializations.some((e=>e.toLowerCase().includes(n)))))return!1}if(v.location&&""!==v.location&&!t.location.toLowerCase().includes(v.location.toLowerCase()))return!1;if(v.specializations&&v.specializations.length>0){if(!v.specializations.some((e=>t.specializations.includes(e))))return!1}if(v.verifiedOnly&&!t.is_verified)return!1;if(p){const e=parseInt(p);if(t.trust_score<e)return!1}return!0})),N=Math.ceil(j.length/5),_=5*(l-1),S=_+5,C=[...j].sort(((e,t)=>t.trust_score-e.trust_score)).slice(_,S),T=e=>{c(e),window.scrollTo({top:0,behavior:"smooth"})};s.useEffect((()=>{c(1)}),[e,d,m,p,y]);const E=e=>{var t,n;const r=null==(t=e.photos)?void 0:t.find((e=>e.is_cover));return r?r.url:(null==(n=e.photos)?void 0:n[0])?e.photos[0].url:e.image_url||"https://images.unsplash.com/photo-1522071820081-009f0129c71c?auto=format&fit=crop&q=80"},A=e=>{const t=Math.min(5,Math.max(0,Math.round(e/20)));return Fe.jsx("div",{className:"flex",children:[...Array(5)].map(((e,n)=>Fe.jsx(P,{className:"h-5 w-5 text-yellow-400 "+(n<t?"fill-yellow-400":"")},`star-${n}`)))})};return Fe.jsx("div",{className:"flex-1 bg-white",children:Fe.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Fe.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Consultancy Directory"}),Fe.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"Find verified overseas education consultants to guide your study abroad journey."}),Fe.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[Fe.jsx("div",{className:"w-full lg:w-1/4",children:Fe.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-6",children:[Fe.jsx("h2",{className:"text-xl font-bold mb-6",children:"Filters"}),Fe.jsxs("div",{className:"mb-6",children:[Fe.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),Fe.jsxs("select",{id:"location",className:"block w-full px-3 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary",value:d,onChange:e=>u(e.target.value),children:[Fe.jsx("option",{value:"",children:"All locations"}),Array.from(new Set(n.map((e=>e.location)))).sort().map((e=>Fe.jsx("option",{value:e,children:e},e)))]})]}),Fe.jsxs("div",{className:"mb-6",children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Specialization"}),Fe.jsx("div",{className:"space-y-2",children:["USA","UK","Canada","Australia","Europe"].map((e=>Fe.jsxs("div",{className:"flex items-center",children:[Fe.jsx("input",{id:`spec-${e}`,type:"checkbox",className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded",checked:m.includes(e),onChange:()=>{return t=e,void(m.includes(t)?f(m.filter((e=>e!==t))):f([...m,t]));var t}}),Fe.jsx("label",{htmlFor:`spec-${e}`,className:"ml-2 block text-sm text-gray-700",children:e})]},e)))})]}),Fe.jsxs("div",{className:"mb-6",children:[Fe.jsx("label",{htmlFor:"trust-score",className:"block text-sm font-medium text-gray-700 mb-1",children:"Trust Score"}),Fe.jsxs("select",{id:"trust-score",className:"block w-full px-3 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary",value:p,onChange:e=>g(e.target.value),children:[Fe.jsx("option",{value:"",children:"All scores"}),Fe.jsx("option",{value:"90",children:"90+"}),Fe.jsx("option",{value:"80",children:"80+"}),Fe.jsx("option",{value:"70",children:"70+"}),Fe.jsx("option",{value:"60",children:"60+"}),Fe.jsx("option",{value:"50",children:"50+"})]})]}),Fe.jsx("div",{className:"mb-6",children:Fe.jsxs("div",{className:"flex items-center",children:[Fe.jsx("input",{id:"verified-only",type:"checkbox",className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded",checked:y,onChange:()=>b(!y)}),Fe.jsxs("label",{htmlFor:"verified-only",className:"ml-2 flex items-center gap-2",children:[Fe.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Verified Only"}),Fe.jsx(R,{className:"h-4 w-4 text-blue-600"})]})]})}),Fe.jsx("button",{className:"w-full bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-lg",onClick:()=>c(1),children:"Apply Filters"})]})}),Fe.jsxs("div",{className:"w-full lg:w-3/4",children:[Fe.jsxs("div",{className:"flex mb-6",children:[Fe.jsx("input",{type:"text",placeholder:"Search consultants by name, location, or specialization...",className:"w-full px-4 py-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-primary focus:border-primary",value:e,onChange:e=>t(e.target.value)}),Fe.jsx("button",{className:"bg-primary hover:bg-primary/90 text-white px-6 py-2 rounded-r-lg",onClick:()=>c(1),children:"Search"})]}),Fe.jsx("div",{className:"flex justify-between items-center mb-6",children:Fe.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",j.length," consultants"]})}),i?Fe.jsx("div",{className:"flex justify-center py-12",children:Fe.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):0===j.length?Fe.jsx("div",{className:"text-center py-12",children:Fe.jsx("p",{className:"text-gray-500",children:"No consultants found matching your criteria."})}):Fe.jsx("div",{className:"space-y-6",children:C.map((e=>Fe.jsx("div",{className:"bg-blue-50 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:Fe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4",children:[Fe.jsx("div",{className:"md:col-span-1 p-6 flex items-center justify-center",children:Fe.jsx("div",{className:"bg-white rounded-full p-4",children:Fe.jsx("img",{src:E(e),alt:e.name,className:"h-28 w-28 object-cover rounded-full"})})}),Fe.jsx("div",{className:"md:col-span-3 p-6",children:Fe.jsxs("div",{className:"flex flex-col h-full",children:[Fe.jsxs("div",{className:"flex justify-between items-start mb-2",children:[Fe.jsxs("div",{children:[Fe.jsxs("div",{className:"flex items-center gap-2",children:[Fe.jsx("h3",{className:"text-xl font-bold text-gray-900",children:e.name}),e.is_verified&&Fe.jsxs("div",{className:"flex items-center gap-1 bg-green-100 text-green-800 px-2 py-0.5 rounded-full text-xs font-medium",children:[Fe.jsx(R,{className:"h-3 w-3"}),Fe.jsx("span",{children:"Verified"})]})]}),Fe.jsxs("div",{className:"flex items-center text-gray-600 mt-1",children:[Fe.jsx(k,{className:"h-4 w-4 mr-1"}),Fe.jsx("span",{className:"text-sm",children:e.location})]})]}),Fe.jsx("div",{className:"flex flex-col items-end",children:Fe.jsxs("div",{className:"flex items-center mb-1",children:[A(e.trust_score),Fe.jsxs("span",{className:"ml-2 text-gray-600",children:["(",Math.floor(100*Math.random())+20," reviews)"]})]})})]}),Fe.jsxs("div",{className:"my-4",children:[Fe.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Trust Score:"}),Fe.jsxs("div",{className:"flex items-center",children:[Fe.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2.5",children:Fe.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:`${e.trust_score}%`}})}),Fe.jsxs("span",{className:"ml-3 text-sm font-medium",children:[e.trust_score,"/100"]})]})]}),Fe.jsxs("div",{className:"mb-4",children:[Fe.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Specialization"}),Fe.jsx("div",{className:"flex flex-wrap gap-2",children:e.specializations.map(((e,t)=>Fe.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:e},t)))})]}),Fe.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:e.description}),Fe.jsxs("div",{className:"flex gap-4 mt-auto",children:[Fe.jsx(h,{to:`/agency/${e.slug}`,className:"bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg",children:"View Profile"}),Fe.jsx("button",{className:"bg-white hover:bg-gray-50 text-gray-800 border border-gray-300 px-4 py-2 rounded-lg",children:"Contact Now"})]})]})})]})},e.id)))}),!i&&j.length>0&&N>1&&Fe.jsxs("div",{className:"flex flex-col items-center space-y-4 mt-8",children:[Fe.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-1 sm:gap-2 max-w-full px-2",children:[Fe.jsx("button",{onClick:()=>T(l-1),disabled:1===l,className:"p-1.5 sm:p-2 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Previous page",children:Fe.jsx(de,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),(O=l,I=N,I<=5?Array.from({length:I},((e,t)=>t+1)):O<=3?[1,2,3,4,"...",I]:O>=I-2?[1,"...",I-3,I-2,I-1,I]:[1,"...",O-1,O,O+1,"...",I]).map(((e,t)=>Fe.jsx(o.Fragment,{children:"..."===e?Fe.jsx("span",{className:"px-2 py-1 text-gray-500",children:"..."}):Fe.jsx("button",{onClick:()=>T(Number(e)),className:"min-w-[2rem] sm:min-w-[2.5rem] px-2 sm:px-4 py-1 sm:py-2 rounded-lg text-sm sm:text-base "+(l===e?"bg-indigo-600 text-white":"hover:bg-gray-100"),children:e})},t))),Fe.jsx("button",{onClick:()=>T(l+1),disabled:l===N,className:"p-1.5 sm:p-2 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Next page",children:Fe.jsx(ue,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]}),Fe.jsxs("div",{className:"text-center text-sm text-gray-500 px-4",children:["Showing ",Fe.jsx("span",{className:"font-medium",children:_+1})," to"," ",Fe.jsx("span",{className:"font-medium",children:Math.min(S,j.length)})," ","of ",Fe.jsx("span",{className:"font-medium",children:j.length})," consultants"]})]})]})]})]})});var O,I}function Mf(){const{isOpen:e,setIsOpen:t}=Ma(),[n,r]=s.useState(!1);return s.useEffect((()=>{const e=setTimeout((()=>{r(!0);const e=setInterval((()=>{r((t=>(t||clearInterval(e),!t)))}),2e3);setTimeout((()=>{clearInterval(e),r(!1)}),1e4)}),3e3);return()=>{clearTimeout(e)}}),[]),s.useEffect((()=>{e&&r(!1)}),[e]),Fe.jsxs("div",{className:"fixed bottom-6 right-6 z-50",children:[Fe.jsx("div",{className:(n?"animate-ping opacity-70":"opacity-0")+" absolute inset-0 rounded-full bg-primary transition-opacity duration-300"}),Fe.jsx("button",{id:"chatbotButton",className:"relative bg-gradient-to-r from-primary to-primary/80 hover:from-primary hover:to-primary text-white w-16 h-16 rounded-full shadow-lg flex items-center justify-center focus:outline-none transition-all duration-300 transform hover:scale-105","aria-label":"Open Chatbot",onClick:()=>t(!e),children:e?Fe.jsx(y,{className:"w-6 h-6"}):Fe.jsxs(Fe.Fragment,{children:[Fe.jsx(z,{className:"w-6 h-6"}),Fe.jsx("span",{className:"absolute top-0 right-0 w-3 h-3 bg-green-400 rounded-full border-2 border-white"})]})}),!e&&Fe.jsx("div",{className:"absolute -top-10 right-0 bg-white px-3 py-1.5 rounded-full shadow-md text-sm font-medium text-gray-700 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:"Ask admission questions"})]})}function Ff(){const[e,t]=s.useState(""),[n,r]=s.useState("Relevance");return Fe.jsx("div",{className:"flex-1 bg-white",children:Fe.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Fe.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Course Finder"}),Fe.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"Find the perfect international program that matches your academic goals and preferences."}),Fe.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[Fe.jsx("div",{className:"w-full lg:w-1/4",children:Fe.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-6",children:[Fe.jsx("h2",{className:"text-xl font-bold mb-6",children:"Filters"}),Fe.jsxs("div",{className:"mb-6",children:[Fe.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),Fe.jsxs("select",{id:"country",className:"block w-full px-3 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary",children:[Fe.jsx("option",{value:"",children:"Select country"}),Fe.jsx("option",{value:"us",children:"United States"}),Fe.jsx("option",{value:"uk",children:"United Kingdom"}),Fe.jsx("option",{value:"ca",children:"Canada"}),Fe.jsx("option",{value:"au",children:"Australia"})]})]}),Fe.jsxs("div",{className:"mb-6",children:[Fe.jsx("label",{htmlFor:"field",className:"block text-sm font-medium text-gray-700 mb-1",children:"Field of Study"}),Fe.jsxs("select",{id:"field",className:"block w-full px-3 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary",children:[Fe.jsx("option",{value:"",children:"Select field"}),Fe.jsx("option",{value:"cs",children:"Computer Science"}),Fe.jsx("option",{value:"business",children:"Business"}),Fe.jsx("option",{value:"engineering",children:"Engineering"}),Fe.jsx("option",{value:"medicine",children:"Medicine"})]})]}),Fe.jsxs("div",{className:"mb-6",children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Degree Level"}),Fe.jsxs("div",{className:"space-y-2",children:[Fe.jsxs("div",{className:"flex items-center",children:[Fe.jsx("input",{id:"bachelor",type:"checkbox",className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),Fe.jsx("label",{htmlFor:"bachelor",className:"ml-2 block text-sm text-gray-700",children:"Bachelor's"})]}),Fe.jsxs("div",{className:"flex items-center",children:[Fe.jsx("input",{id:"master",type:"checkbox",className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),Fe.jsx("label",{htmlFor:"master",className:"ml-2 block text-sm text-gray-700",children:"Master's"})]}),Fe.jsxs("div",{className:"flex items-center",children:[Fe.jsx("input",{id:"phd",type:"checkbox",className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),Fe.jsx("label",{htmlFor:"phd",className:"ml-2 block text-sm text-gray-700",children:"PhD"})]}),Fe.jsxs("div",{className:"flex items-center",children:[Fe.jsx("input",{id:"diploma",type:"checkbox",className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),Fe.jsx("label",{htmlFor:"diploma",className:"ml-2 block text-sm text-gray-700",children:"Diploma/Certificate"})]})]})]}),Fe.jsxs("div",{className:"mb-6",children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tuition Fee Range (USD/year)"}),Fe.jsx("input",{type:"range",className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer",min:"0",max:"100000",step:"5000"}),Fe.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[Fe.jsx("span",{children:"$0"}),Fe.jsx("span",{children:"$50k"}),Fe.jsx("span",{children:"$100k"})]})]}),Fe.jsxs("div",{className:"mb-6",children:[Fe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Intake"}),Fe.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Fe.jsxs("div",{className:"flex items-center",children:[Fe.jsx("input",{id:"fall",type:"checkbox",className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),Fe.jsx("label",{htmlFor:"fall",className:"ml-2 block text-sm text-gray-700",children:"Fall"})]}),Fe.jsxs("div",{className:"flex items-center",children:[Fe.jsx("input",{id:"winter",type:"checkbox",className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),Fe.jsx("label",{htmlFor:"winter",className:"ml-2 block text-sm text-gray-700",children:"Winter"})]}),Fe.jsxs("div",{className:"flex items-center",children:[Fe.jsx("input",{id:"spring",type:"checkbox",className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),Fe.jsx("label",{htmlFor:"spring",className:"ml-2 block text-sm text-gray-700",children:"Spring"})]}),Fe.jsxs("div",{className:"flex items-center",children:[Fe.jsx("input",{id:"summer",type:"checkbox",className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),Fe.jsx("label",{htmlFor:"summer",className:"ml-2 block text-sm text-gray-700",children:"Summer"})]})]})]}),Fe.jsx("button",{className:"w-full bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-lg",children:"Apply Filters"})]})}),Fe.jsxs("div",{className:"w-full lg:w-3/4",children:[Fe.jsxs("div",{className:"flex mb-6",children:[Fe.jsx("input",{type:"text",placeholder:"Search courses by name, university, or keyword...",className:"w-full px-4 py-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-primary focus:border-primary",value:e,onChange:e=>t(e.target.value)}),Fe.jsx("button",{className:"bg-primary hover:bg-primary/90 text-white px-6 py-2 rounded-r-lg",children:"Search"})]}),Fe.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Fe.jsx("p",{className:"text-sm text-gray-500",children:"Showing 120 courses"}),Fe.jsxs("div",{className:"flex items-center",children:[Fe.jsx("label",{htmlFor:"sort",className:"text-sm text-gray-500 mr-2",children:"Sort by:"}),Fe.jsxs("select",{id:"sort",className:"text-sm border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-primary focus:border-primary",value:n,onChange:e=>r(e.target.value),children:[Fe.jsx("option",{value:"Relevance",children:"Relevance"}),Fe.jsx("option",{value:"PriceLowToHigh",children:"Price: Low to High"}),Fe.jsx("option",{value:"PriceHighToLow",children:"Price: High to Low"}),Fe.jsx("option",{value:"Rating",children:"Rating"})]})]})]}),Fe.jsx("div",{className:"space-y-6",children:[{id:1,title:"Master of Computer Science",university:"Stanford University",location:"California, USA",tuition:"$52,000/year",duration:"2 years",degree:"Master's",description:"This program offers a comprehensive curriculum covering advanced algorithms, machine learning, and software engineering principles. Graduates are well-prepared for careers in tech companies and research institutions."},{id:2,title:"Master of Computer Science",university:"Stanford University",location:"California, USA",tuition:"$52,000/year",duration:"2 years",degree:"Master's",description:"This program offers a comprehensive curriculum covering advanced algorithms, machine learning, and software engineering principles. Graduates are well-prepared for careers in tech companies and research institutions."},{id:3,title:"Master of Computer Science",university:"Stanford University",location:"California, USA",tuition:"$52,000/year",duration:"2 years",degree:"Master's",description:"This program offers a comprehensive curriculum covering advanced algorithms, machine learning, and software engineering principles. Graduates are well-prepared for careers in tech companies and research institutions."},{id:4,title:"Master of Computer Science",university:"Stanford University",location:"California, USA",tuition:"$52,000/year",duration:"2 years",degree:"Master's",description:"This program offers a comprehensive curriculum covering advanced algorithms, machine learning, and software engineering principles. Graduates are well-prepared for careers in tech companies and research institutions."}].map((e=>Fe.jsx("div",{className:"bg-blue-50 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:Fe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4",children:[Fe.jsx("div",{className:"md:col-span-1 p-6 flex items-center justify-center",children:Fe.jsx("div",{className:"bg-white rounded-full p-4",children:Fe.jsxs("svg",{className:"h-16 w-16 text-primary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Fe.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),Fe.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]})})}),Fe.jsx("div",{className:"md:col-span-3 p-6",children:Fe.jsxs("div",{className:"flex flex-col h-full",children:[Fe.jsxs("div",{className:"flex justify-between items-start mb-2",children:[Fe.jsxs("div",{children:[Fe.jsx("h3",{className:"text-xl font-bold text-gray-900",children:e.title}),Fe.jsx("p",{className:"text-primary font-medium",children:e.university})]}),Fe.jsxs("div",{className:"flex items-center text-gray-600",children:[Fe.jsx(k,{className:"h-4 w-4 mr-1"}),Fe.jsx("span",{className:"text-sm",children:e.location})]})]}),Fe.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[Fe.jsxs("div",{children:[Fe.jsx("p",{className:"text-sm text-gray-500",children:"Tuition:"}),Fe.jsx("p",{className:"font-medium",children:e.tuition})]}),Fe.jsxs("div",{children:[Fe.jsx("p",{className:"text-sm text-gray-500",children:"Duration:"}),Fe.jsx("p",{className:"font-medium",children:e.duration})]}),Fe.jsxs("div",{children:[Fe.jsx("p",{className:"text-sm text-gray-500",children:"Degree:"}),Fe.jsx("p",{className:"font-medium",children:e.degree})]})]}),Fe.jsx("p",{className:"text-gray-600 text-sm mb-4",children:e.description}),Fe.jsxs("div",{className:"flex justify-between mt-auto",children:[Fe.jsx("button",{className:"bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg",children:"View Details"}),Fe.jsx("button",{className:"bg-white hover:bg-gray-50 text-gray-800 border border-gray-300 px-4 py-2 rounded-lg",children:"Save to Wishlist"})]})]})})]})},e.id)))}),Fe.jsx("div",{className:"flex justify-center mt-8",children:Fe.jsxs("nav",{className:"inline-flex rounded-md shadow-sm -space-x-px",children:[Fe.jsx("a",{href:"#",className:"inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"<"}),Fe.jsx("a",{href:"#",className:"inline-flex items-center px-4 py-2 border border-primary bg-primary text-sm font-medium text-white",children:"1"}),Fe.jsx("a",{href:"#",className:"inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50",children:"2"}),Fe.jsx("a",{href:"#",className:"inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50",children:"3"}),Fe.jsx("a",{href:"#",className:"inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:">"})]})})]})]})]})})}function $f(){const[e,t]=s.useState("Articles"),[n,r]=s.useState(null),[i,a]=s.useState(""),[o,l]=s.useState([]),[c,d]=s.useState([]),[u,m]=s.useState([]),[f,p]=s.useState(!0);s.useEffect((()=>{!async function(){try{p(!0);const e=await async function(){try{const{data:e,error:t}=await gi.from("guides").select("*").order("created_at",{ascending:!1});return t?(console.error("Error fetching guides:",t),[]):e||[]}catch(e){return console.error("Error in getGuides:",e),[]}}();l(e);const[t,n]=await Promise.all([qi(),Hi()]);d(t),m(n)}catch(e){console.error("Error loading data:",e),Ne.error("Failed to load data. Please try again later.")}finally{p(!1)}}()}),[]);const g=Array.from(new Set(o.map((e=>e.category)))).filter(Boolean).slice(0,8);o.filter((e=>e.title.toLowerCase().includes(i.toLowerCase())||e.description.toLowerCase().includes(i.toLowerCase())||e.category.toLowerCase().includes(i.toLowerCase())));const x=c.filter((e=>e.title.toLowerCase().includes(i.toLowerCase())||e.excerpt.toLowerCase().includes(i.toLowerCase())||e.category.toLowerCase().includes(i.toLowerCase())||e.author.toLowerCase().includes(i.toLowerCase()))),y=n?x.filter((e=>e.tab_id===n)):x;return Fe.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Fe.jsxs("div",{className:"mb-8",children:[Fe.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"Knowledge Hub"}),Fe.jsx("p",{className:"text-xl text-gray-600 mt-2",children:"Explore guides, tips, and resources to navigate your study abroad journey."})]}),Fe.jsx("div",{className:"relative mb-8",children:Fe.jsxs("form",{onSubmit:e=>{e.preventDefault(),Ne.success(`Searching for "${i}"`)},className:"relative max-w-3xl",children:[Fe.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:Fe.jsx(j,{className:"h-5 w-5 text-gray-400"})}),Fe.jsx("input",{type:"text",placeholder:"Search articles, guides, and resources...",value:i,onChange:e=>a(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm"}),Fe.jsx("button",{type:"submit",className:"absolute inset-y-0 right-0 px-4 text-white bg-primary rounded-r-md hover:bg-primary/90 focus:outline-none",children:"Search"})]})}),Fe.jsxs("div",{className:"flex flex-wrap mb-8 gap-2",children:[Fe.jsx("button",{className:"px-4 py-2 rounded-full font-medium transition-colors "+(null===n?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>r(null),children:"All Articles"}),u.map((e=>Fe.jsx("button",{className:"px-4 py-2 rounded-full font-medium transition-colors "+(n===e.id?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>r(e.id),children:e.name},e.id)))]}),Fe.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:f?Array(6).fill(null).map(((e,t)=>Fe.jsxs("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden animate-pulse",children:[Fe.jsx("div",{className:"bg-gray-200 h-48"}),Fe.jsxs("div",{className:"p-6",children:[Fe.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-2"}),Fe.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-3"}),Fe.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),Fe.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3 mb-4"}),Fe.jsxs("div",{className:"flex justify-between items-center",children:[Fe.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),Fe.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]})]})]},t))):y.length>0?y.map((e=>{var t,n;return Fe.jsxs("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[Fe.jsx("div",{className:"bg-gray-200 h-48 flex items-center justify-center",children:e.image_url?Fe.jsx("img",{src:e.image_url,alt:e.title,className:"w-full h-full object-cover"}):Fe.jsx("div",{className:"text-gray-400",children:Fe.jsx("svg",{className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Fe.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),Fe.jsxs("div",{className:"p-6",children:[Fe.jsx("span",{className:"inline-block px-3 py-1 text-xs font-medium bg-blue-50 text-primary rounded-full mb-2",children:(null==(t=e.blog_tabs)?void 0:t.name)||e.category}),Fe.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e.title}),Fe.jsx("p",{className:"text-gray-600 mb-4 truncate",children:e.excerpt}),Fe.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[Fe.jsxs("div",{className:"flex items-center",children:[Fe.jsx(V,{className:"h-4 w-4 mr-1"}),Fe.jsx("span",{children:e.author})]}),Fe.jsxs("div",{className:"flex items-center",children:[Fe.jsx(xe,{className:"h-4 w-4 mr-1"}),Fe.jsx("span",{children:(n=e.date,new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))})]})]}),Fe.jsx("div",{className:"mt-4",children:Fe.jsxs(h,{to:`/blog/post/${e.id}`,className:"inline-flex items-center text-primary font-medium",children:["Read Article",Fe.jsx(ke,{className:"ml-1 h-4 w-4"})]})})]})]},e.id)})):Fe.jsxs("div",{className:"col-span-3 text-center py-16",children:[Fe.jsx("div",{className:"text-gray-400 mb-4",children:Fe.jsx("svg",{className:"h-16 w-16 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Fe.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M12 13a1 1 0 100-2 1 1 0 000 2z"})})}),Fe.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:n?"No articles found in this category":"No articles found"}),Fe.jsx("p",{className:"text-gray-600 mt-1",children:n?"Try selecting a different category or viewing all articles":"Try adjusting your search terms or check back later for new content"}),n&&Fe.jsx("button",{className:"mt-4 px-4 py-2 bg-primary text-white rounded-md",onClick:()=>r(null),children:"View All Articles"})]})}),Fe.jsxs("div",{className:"bg-blue-50 rounded-lg p-8 mb-12 grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[Fe.jsxs("div",{children:[Fe.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Need Personalized Guidance?"}),Fe.jsx("p",{className:"mt-4 text-gray-700",children:"Connect with our verified education consultants who can provide tailored advice for your study abroad journey."}),Fe.jsx("div",{className:"mt-6",children:Fe.jsx(h,{to:"/agencies",className:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary hover:bg-primary/90 focus:outline-none",children:"Find a Consultant"})})]}),Fe.jsx("div",{className:"bg-gray-200 h-64 rounded-lg flex items-center justify-center",children:Fe.jsx("svg",{className:"h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Fe.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),Fe.jsxs("div",{className:"mb-12",children:[Fe.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Popular Topics"}),Fe.jsx("div",{className:"flex flex-wrap gap-3",children:g.length>0?g.map(((e,t)=>Fe.jsx(h,{to:`/knowledge-hub?category=${e.toLowerCase().replace(/\s+/g,"-")}`,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-full text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:e},t))):["Study in USA","Scholarships","SOP Writing","Visa Interview","IELTS Preparation","Financial Planning","University Selection","Application Timeline"].map(((e,t)=>Fe.jsx(h,{to:`/knowledge-hub?category=${e.toLowerCase().replace(/\s+/g,"-")}`,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-full text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:e},t)))})]})]})}function Uf(){const{slug:e}=m(),t=d(),[n,r]=s.useState(null),[i,a]=s.useState(!0),[o,l]=s.useState(null);if(s.useEffect((()=>{!async function(){if(e)try{a(!0),l(null);const t=await async function(e){try{const{data:t,error:n}=await gi.from("guides").select("*").eq("slug",e).single();return n?(console.error("Error fetching guide by slug:",n),null):t}catch(o){return console.error("Error in getGuideBySlug:",o),null}}(e);if(!t)return void l("Guide not found");r(t)}catch(t){console.error("Error loading guide:",t),l("Failed to load guide. Please try again later."),Ne.error("Failed to load guide. Please try again later.")}finally{a(!1)}}()}),[e]),i)return Fe.jsx("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:Fe.jsxs("div",{className:"animate-pulse",children:[Fe.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4 mb-4"}),Fe.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-8"}),Fe.jsx("div",{className:"h-64 bg-gray-200 rounded mb-8"}),Fe.jsxs("div",{className:"space-y-3",children:[Fe.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),Fe.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),Fe.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),Fe.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),Fe.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"})]})]})});if(o||!n)return Fe.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-12 text-center",children:[Fe.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"404"}),Fe.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Guide Not Found"}),Fe.jsx("p",{className:"text-gray-600 mb-8",children:"The guide you're looking for doesn't exist or has been removed."}),Fe.jsxs(h,{to:"/knowledge-hub",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/90",children:[Fe.jsx(de,{className:"mr-2 h-4 w-4"}),"Back to Knowledge Hub"]})]});return Fe.jsxs("div",{className:"bg-white min-h-screen",children:[Fe.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[Fe.jsx("div",{className:"mb-8",children:Fe.jsxs("button",{onClick:()=>t("/knowledge-hub"),className:"inline-flex items-center text-gray-600 hover:text-gray-900",children:[Fe.jsx(de,{className:"h-4 w-4 mr-1"}),"Back to Knowledge Hub"]})}),Fe.jsx("div",{className:"mb-4",children:Fe.jsx(h,{to:`/knowledge-hub?category=${n.category.toLowerCase().replace(/\s+/g,"-")}`,className:"text-sm font-medium text-primary hover:underline",children:n.category})}),Fe.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:n.title}),Fe.jsxs("div",{className:"flex flex-wrap items-center text-sm text-gray-500 mb-8",children:[Fe.jsxs("div",{className:"flex items-center mr-6 mb-2",children:[Fe.jsx(C,{className:"h-4 w-4 mr-1"}),Fe.jsxs("span",{children:[n.read_time," min read"]})]}),Fe.jsxs("div",{className:"flex items-center mr-6 mb-2",children:[Fe.jsx(xe,{className:"h-4 w-4 mr-1"}),Fe.jsx("span",{children:(c=n.updated_at||n.created_at,new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))})]}),n.author_name&&Fe.jsxs("div",{className:"flex items-center mb-2",children:[n.author_image?Fe.jsx("img",{src:n.author_image,alt:n.author_name,className:"h-5 w-5 rounded-full mr-2"}):Fe.jsx("div",{className:"h-5 w-5 rounded-full bg-gray-200 mr-2"}),Fe.jsxs("span",{children:["By ",n.author_name]})]})]}),n.image_url&&Fe.jsx("div",{className:"mb-8",children:Fe.jsx("img",{src:n.image_url,alt:n.title,className:"w-full h-auto rounded-lg object-cover"})}),Fe.jsx("div",{className:"prose prose-lg max-w-none prose-primary mb-12",children:Fe.jsx(zh,{children:n.content})}),Fe.jsxs("div",{className:"flex border-t pt-6",children:[Fe.jsxs("button",{className:"mr-4 flex items-center text-gray-500 hover:text-gray-900",children:[Fe.jsx(_e,{className:"h-5 w-5 mr-2"}),"Share"]}),Fe.jsxs("button",{className:"flex items-center text-gray-500 hover:text-gray-900",children:[Fe.jsx(Se,{className:"h-5 w-5 mr-2"}),"Save"]})]})]}),Fe.jsx("div",{className:"bg-gray-50 py-12",children:Fe.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Fe.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-8",children:"More Resources"}),Fe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Fe.jsx(h,{to:"/agencies",className:"group block",children:Fe.jsxs("div",{className:"bg-white p-6 rounded-lg border hover:shadow-md transition-shadow",children:[Fe.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2 group-hover:text-primary",children:"Find a Consultant"}),Fe.jsx("p",{className:"text-gray-600",children:"Get personalized guidance from verified education consultants."})]})}),Fe.jsx(h,{to:"/course-finder",className:"group block",children:Fe.jsxs("div",{className:"bg-white p-6 rounded-lg border hover:shadow-md transition-shadow",children:[Fe.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2 group-hover:text-primary",children:"Course Finder"}),Fe.jsx("p",{className:"text-gray-600",children:"Explore programs and universities that match your preferences."})]})}),Fe.jsx(h,{to:"/application-tracker",className:"group block",children:Fe.jsxs("div",{className:"bg-white p-6 rounded-lg border hover:shadow-md transition-shadow",children:[Fe.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2 group-hover:text-primary",children:"Application Tracker"}),Fe.jsx("p",{className:"text-gray-600",children:"Keep track of your university applications in one place."})]})})]})]})})]});var c}const zf=()=>Fe.jsx("div",{className:"min-h-screen bg-gray-50",children:Fe.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:Fe.jsxs("div",{className:"text-center mb-8",children:[Fe.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Scholarship Finder"}),Fe.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Find scholarships based on eligibility and preferences"})]})})}),Bf=()=>Fe.jsx("div",{className:"min-h-screen bg-gray-50",children:Fe.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:Fe.jsxs("div",{className:"text-center mb-8",children:[Fe.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Find a Buddy"}),Fe.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Connect with students heading to the same destination"})]})})});function qf(){const{user:e,loading:t,error:n}=_i(),[r,i]=s.useState(!1),[a,o]=s.useState(!1),[l,c]=s.useState(!1),[d,h]=s.useState(!1),[m,g]=s.useState(!1),[y,b]=s.useState(!0);(()=>{const e=u();s.useEffect((()=>{window.gtag("config","G-99C8F3BX84",{page_path:e.pathname+e.search})}),[e])})(),s.useEffect((()=>{e?v():(h(!1),g(!1),b(!1))}),[e]);const v=async()=>{try{const{data:t,error:n}=await gi.from("profiles").select("is_admin, is_super_admin").eq("id",null==e?void 0:e.id).single();if(n){if("PGRST116"!==n.code)throw n;h(!1),g(!1)}else h((null==t?void 0:t.is_super_admin)||!1),g((null==t?void 0:t.is_admin)||!1)}catch(t){console.error("Error checking admin status:",t),t instanceof Error&&"Failed to fetch"===t.message||x.error("Unable to verify admin status. Please try again later."),h(!1),g(!1)}finally{b(!1)}};return t||y?Fe.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:Fe.jsxs("div",{className:"text-center",children:[Fe.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),Fe.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):n?Fe.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:Fe.jsxs("div",{className:"text-center",children:[Fe.jsx("p",{className:"text-red-600 mb-4",children:"Unable to connect to the service"}),Fe.jsx("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700",children:"Retry"})]})}):a&&!(null==e?void 0:e.email)?Fe.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:Fe.jsxs("div",{className:"text-center",children:[Fe.jsx("p",{className:"text-red-600 mb-4",children:"Access Denied"}),Fe.jsx("p",{className:"text-gray-600 mb-4",children:"Please sign in to access the dashboard."}),Fe.jsx("button",{onClick:()=>{o(!1),i(!0)},className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700",children:"Sign In"})]})}):a&&!d&&"superadmin@superadmin.com"===(null==e?void 0:e.email)?Fe.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:Fe.jsxs("div",{className:"text-center",children:[Fe.jsx("p",{className:"text-red-600 mb-4",children:"Access Denied"}),Fe.jsx("p",{className:"text-gray-600 mb-4",children:"You do not have permission to access the Super Admin Dashboard."}),Fe.jsx("button",{onClick:()=>o(!1),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700",children:"Return to Home"})]})}):Fe.jsx(La,{children:Fe.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[Fe.jsx(Ki,{isSuperAdmin:d,isAdmin:m,showDashboard:a,showProfile:l,setShowDashboard:o,setShowProfile:c,setShowAuth:i}),r&&Fe.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:Fe.jsx(Si,{onClose:()=>i(!1)})}),l&&Fe.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:Fe.jsx(Ji,{onClose:()=>c(!1)})}),a?d?Fe.jsx(Gi,{}):m?Fe.jsx(Di,{}):Fe.jsx(Yi,{}):Fe.jsxs(f,{children:[Fe.jsx(p,{path:"/",element:Fe.jsx(Yi,{})}),Fe.jsx(p,{path:"/about",element:Fe.jsx(Oa,{})}),Fe.jsx(p,{path:"/blog",element:Fe.jsx(Pa,{})}),Fe.jsx(p,{path:"/blog/post/:id",element:Fe.jsx(Df,{})}),Fe.jsx(p,{path:"/agency/:slug",element:Fe.jsx(Ca,{})}),Fe.jsx(p,{path:"/agencies",element:Fe.jsx(Lf,{})}),Fe.jsx(p,{path:"/contact",element:Fe.jsx(Ia,{})}),Fe.jsx(p,{path:"/course-finder",element:Fe.jsx(Ff,{})}),Fe.jsx(p,{path:"/knowledge-hub",element:Fe.jsx($f,{})}),Fe.jsx(p,{path:"/knowledge-hub/:slug",element:Fe.jsx(Uf,{})}),Fe.jsx(p,{path:"/scholarship-finder",element:Fe.jsx(zf,{})}),Fe.jsx(p,{path:"/find-buddy",element:Fe.jsx(Bf,{})})]}),Fe.jsx(Ra,{}),Fe.jsx(Mf,{}),Fe.jsx(Vo,{})]})})}Me(document.getElementById("root")).render(Fe.jsx(s.StrictMode,{children:Fe.jsx(At,{children:Fe.jsx(g,{children:Fe.jsxs(ki,{children:[Fe.jsx(qf,{}),Fe.jsx(Ce,{position:"top-center"})]})})})}));
